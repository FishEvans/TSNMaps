
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tilminra.html</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        body { margin: 0; background: black; color: white; display: flex; height: 100vh; }
        /* === Description typography controls ===
           Tweak these two variables to change description sizes globally */
        :root {
            --desc-font-size: 130%;
            --hull-desc-font-size: 130%;
        }
        .desc-text { font-size: var(--desc-font-size); margin-top: 8px; }
        .hull-desc { font-size: var(--hull-desc-font-size); margin-top: 5px; color: #ccc; }
        #controls { flex: 1; min-width: 200px; max-width: 350px; overflow-y: auto; background: #333; padding: 10px; }
        #plot { flex: 3; min-width: 400px; }
        #info { flex: 1; min-width: 200px; background: #333; padding: 10px; overflow-y: auto; }
        h2.header { margin-top: 0; margin-bottom: 5px; text-align: center; }
        h3.subheader { margin-top: 0; margin-bottom: 15px; text-align: center; color: #ccc; }
        .alignment-image { display: block; max-width: 100%; height: auto; margin: 10px auto; }
        button { display: block; width: 100%; margin-bottom: 5px; background: #555; color: white; border: none; padding: 5px; text-align: left; cursor: pointer; font-size: 20px; }
        button.header { background: #444; cursor: default; font-size: 24px; }
    </style>
</head>
<body>
    <div id="controls">
        <div id="gm-controls" style="margin-bottom:10px;"></div>
        <h2 class="header">Tilminra</h2>
        <h3 class="subheader">Alignment: Unknown</h3>
        <img src="Images/Factions/Unknown.png" alt="Alignment Logo" class="alignment-image" onerror="this.style.display='none';">

        <input type="text" id="search-box" placeholder="Search objects..." style="width: 95%; padding: 6px; margin-bottom: 10px; font-size: 16px;">
        <div id="object-buttons">
    </div>
    </div>
    <div id="plot"></div>
    <div id="info">
        <img src="Images/Compass.png" alt="Compass" style="display:block; max-width:100%; height:auto; margin-bottom:10px;">
        <button id="galactic-map-btn" title="Back to Galactic Map">Show Galactic Map</button>
        Select an object
    </div>
<script>
    var objData = {"Planet Tilminra": {"type": "planet", "x": -101644.76880429809, "y": 733.1011374028776, "grid": "M06", "hidden": false}, "Planet Krynk": {"type": "planet", "x": 153585.00069835913, "y": 79310.131104184, "grid": "P19", "hidden": false}, "Acantha Gate": {"type": "jumpnode", "x": -127061.43547096477, "y": 116805.32335962508, "grid": "R05", "hidden": false, "label": "Acantha Gate", "destinations": {"Tilminra Gate": "Acantha"}}, "Sumri Gate": {"type": "jumpnode", "x": 191155.2311957019, "y": -61666.89886259712, "grid": "I21", "hidden": false, "label": "Sumri Gate", "destinations": {"Tilminra Gate": "Sumri"}}, "Tilminra Alders": {"type": "station", "x": -119904.97899519892, "y": -17119.556612940054, "grid": "L06", "hidden": false, "label": "Tilminra Alders", "hull": "", "facilities": [], "sides": ["Unknown"]}, "Immigration": {"type": "station", "x": -80554.46673525378, "y": 19719.220821902203, "grid": "M07", "hidden": false, "label": "Immigration", "hull": "", "facilities": [], "sides": ["Unknown"]}, "Intu Hospitality": {"type": "station", "x": -79023.7597165067, "y": -9871.917866940985, "grid": "L08", "hidden": false, "label": "Intu Hospitality", "hull": "", "facilities": [], "sides": ["Unknown"]}, "TSN Exosciences": {"type": "station", "x": -51259.2682924087, "y": -84269.29872661369, "grid": "H09", "hidden": false, "label": "TSN Exosciences", "hull": "starbase_science", "facilities": [], "sides": ["USFP"], "hullName": "Science Starbase", "hullImage": "Images/Ships/science_station256.png", "hullDescription": ""}, "TSN Logistics": {"type": "station", "x": -48352.46342021039, "y": -90890.43638545951, "grid": "H09", "hidden": false, "label": "TSN Logistics", "hull": "starbase_command", "facilities": [], "sides": ["USFP"], "hullName": "Command Starbase", "hullImage": "Images/Ships/tsn-big-base256.png", "hullDescription": ""}, "WP 32": {"type": "platform", "x": -45916.593323182904, "y": -86409.02598503993, "grid": "H09", "hidden": false, "label": "WP 32"}, "WP 71": {"type": "platform", "x": -54960.905965014266, "y": -88508.59856260793, "grid": "H09", "hidden": false, "label": "WP 71"}, "TSN Materials Research": {"type": "station", "x": -4727.215502910128, "y": -119640.15150856123, "grid": "G11", "hidden": false, "label": "TSN Materials Research", "hull": "starbase_science", "facilities": [], "sides": ["USFP"], "hullName": "Science Starbase", "hullImage": "Images/Ships/science_station256.png", "hullDescription": ""}, "WP 21": {"type": "platform", "x": -4519.945077871168, "y": -123395.46605003312, "grid": "F11", "hidden": false, "label": "WP 21"}, "TSN Refinery": {"type": "station", "x": -6054.3171457194985, "y": -73817.88487089606, "grid": "I11", "hidden": false, "label": "TSN Refinery", "hull": "starbase_industry", "facilities": [], "sides": ["USFP"], "hullName": "Industrial Starbase", "hullImage": "Images/Ships/industry_station256.png", "hullDescription": ""}, "WP 6": {"type": "platform", "x": -6724.113099080267, "y": -67119.92533728837, "grid": "I11", "hidden": false, "label": "WP 6"}, "Krynk Welcome": {"type": "station", "x": 164422.6847404259, "y": -49473.2132316642, "grid": "J20", "hidden": false, "label": "Krynk Welcome", "hull": "", "facilities": [], "sides": ["Unknown"]}, "Aydos": {"type": "station", "x": 193223.91073493895, "y": -35072.600234407684, "grid": "K21", "hidden": false, "label": "Aydos", "hull": "", "facilities": [], "sides": ["Unknown"]}, "Anhoto": {"type": "station", "x": 173464.9301107963, "y": -81623.41899298108, "grid": "H20", "hidden": false, "label": "Anhoto", "hull": "", "facilities": [], "sides": ["Unknown"]}, "Tilmi Police": {"type": "station", "x": 161660.80345327457, "y": 46973.742501074696, "grid": "O20", "hidden": false, "label": "Tilmi Police", "hull": "", "facilities": [], "sides": ["Unknown"]}, "Mildraz Innkeep": {"type": "station", "x": 161465.84817778302, "y": 99083.15322352554, "grid": "Q20", "hidden": false, "label": "Mildraz Innkeep", "hull": "", "facilities": [], "sides": ["Unknown"]}, "Yashi Traders": {"type": "station", "x": 128196.36872533674, "y": 74078.41999878845, "grid": "P18", "hidden": false, "label": "Yashi Traders", "hull": "", "facilities": [], "sides": ["Unknown"]}, "Crixia Metals": {"type": "station", "x": 15304.907819986982, "y": 55541.485842409864, "grid": "O12", "hidden": false, "label": "Crixia Metals", "hull": "", "facilities": [], "sides": ["Unknown"]}, "Yandro Shipyards": {"type": "station", "x": 3174.6351862421125, "y": 66373.96183692288, "grid": "P12", "hidden": false, "label": "Yandro Shipyards", "hull": "usfp_shipyard", "facilities": [], "sides": ["Unknown"], "hullName": "Ship Yard", "hullImage": "Images/Ships/TSN Mod/USFP/ShipYard256.png", "hullDescription": ""}, "Aga Medical Inst": {"type": "station", "x": 32199.941256200942, "y": 26730.166397965404, "grid": "N13", "hidden": false, "label": "Aga Medical Inst", "hull": "", "facilities": [], "sides": ["Unknown"]}, "L'Shawa Labs": {"type": "station", "x": 16285.589404349086, "y": 8886.802200434538, "grid": "M12", "hidden": false, "label": "L'Shawa Labs", "hull": "", "facilities": [], "sides": ["Unknown"]}, "LNya Traders": {"type": "station", "x": 40398.243725336746, "y": 13709.33306463207, "grid": "M14", "hidden": false, "label": "LNya Traders", "hull": "", "facilities": [], "sides": ["Unknown"]}, "Tasn Mining": {"type": "station", "x": 6823.348034893146, "y": 45829.65699581637, "grid": "O12", "hidden": false, "label": "Tasn Mining", "hull": "", "facilities": [], "sides": ["Unknown"]}, "Tilminra Welcome": {"type": "station", "x": -102018.13716172324, "y": 101112.47163916338, "grid": "R06", "hidden": false, "label": "Tilminra Welcome", "hull": "", "facilities": [], "sides": ["Unknown"]}, "Sondo": {"type": "station", "x": -145768.13716172325, "y": 94862.47163916338, "grid": "Q04", "hidden": false, "label": "Sondo", "hull": "", "facilities": [], "sides": ["Unknown"]}, "Mirilis": {"type": "station", "x": -103407.02605061213, "y": 140001.3605280523, "grid": "T06", "hidden": false, "label": "Mirilis", "hull": "", "facilities": [], "sides": ["Unknown"]}, "Mel Ya Foundry": {"type": "station", "x": 13271.574486653639, "y": 77152.59695352096, "grid": "P12", "hidden": false, "label": "Mel Ya Foundry", "hull": "", "facilities": [], "sides": ["Unknown"]}, "SR 80": {"type": "sensor_relay", "x": -68947.23246513942, "y": 80846.68315281555, "grid": "Q08", "hidden": false, "label": "SR 80"}, "SR 49": {"type": "sensor_relay", "x": -33332.15310006005, "y": 61104.61966075205, "grid": "P10", "hidden": false, "label": "SR 49"}, "SR 47": {"type": "sensor_relay", "x": -5217.073734980697, "y": 42195.8895020219, "grid": "O11", "hidden": false, "label": "SR 47"}, "SR 22": {"type": "sensor_relay", "x": 73513.08499517805, "y": 1878.4291845615517, "grid": "M15", "hidden": false, "label": "SR 22"}, "SR 83": {"type": "sensor_relay", "x": 109128.1643602574, "y": -17863.634307501925, "grid": "L17", "hidden": false, "label": "SR 83"}, "SR 74": {"type": "sensor_relay", "x": 144743.2437253368, "y": -37605.69779956543, "grid": "K19", "hidden": false, "label": "SR 74"}, "SR 55": {"type": "sensor_relay", "x": -54145.645163552086, "y": -244.58668845430984, "grid": "L09", "hidden": false, "label": "SR 55"}, "SR 25": {"type": "sensor_relay", "x": -16923.422941329896, "y": 6560.968867101262, "grid": "M11", "hidden": false, "label": "SR 25"}, "SR 89": {"type": "sensor_relay", "x": 53354.35483644787, "y": 39338.74664487903, "grid": "N14", "hidden": false, "label": "SR 89"}, "SR 57": {"type": "sensor_relay", "x": 81965.46594755902, "y": 51422.079978212365, "grid": "O16", "hidden": false, "label": "SR 57"}, "SR 75": {"type": "sensor_relay", "x": 114743.24372533678, "y": 60172.079978212365, "grid": "P17", "hidden": false, "label": "SR 75"}, "SR 71": {"type": "sensor_relay", "x": -121462.58160616769, "y": 83751.36052805228, "grid": "Q05", "hidden": false, "label": "SR 71"}, "SR 85": {"type": "sensor_relay", "x": -119726.47049505658, "y": 57709.693861385604, "grid": "O06", "hidden": false, "label": "SR 85"}, "SR 84": {"type": "sensor_relay", "x": -117990.35938394547, "y": 31668.02719471894, "grid": "N06", "hidden": false, "label": "SR 84"}, "SR 37": {"type": "sensor_relay", "x": 161026.54090754976, "y": 26136.227068975913, "grid": "N20", "hidden": false, "label": "SR 37"}, "SR 35": {"type": "sensor_relay", "x": 166186.73823836824, "y": -9010.645787677055, "grid": "L20", "hidden": false, "label": "SR 35"}};
        console.log("[DEBUG JS] objData keys:", Object.keys(objData));
        console.log("[DEBUG JS] objData sample:", objData[Object.keys(objData)[0]]);

    function clearAnnotations() {
        Plotly.relayout('plot', {annotations: []});
        document.getElementById('info').innerHTML = getInfoHeader() + 'Select an object';
        document.getElementById('galactic-map-btn').addEventListener('click', function() {
            window.location.href = 'index.html';
        });
        document.getElementById('galactic-map-btn').addEventListener('click', function() {
            window.location.href = 'index.html';
        });
    }
    
    function getInfoHeader() {
    return '<img src="Images/Compass.png" alt="Compass" '
         + 'style="display:block; max-width:100%; height:auto; margin-bottom:10px;">'
         + '<button id="galactic-map-btn" title="Back to Galactic Map">Galactic Map</button>';
        }
    
    function highlight(name) {
        var obj = objData[name];
        if (obj.hidden && !isGM()) {
            alert("This object is not visible on the public map.");
            return;
        }
        var annotation = {
            x: obj.x, y: obj.y, xref: 'x', yref: 'y', text: name,
            showarrow: true, arrowcolor: 'yellow', arrowwidth: 2,
            arrowhead: 3, font: {color: 'yellow', size: 28}
        };

        Plotly.relayout('plot', {annotations: [annotation]});

        var label = obj.label || name;
        var infoHtml = '<span style="font-size:20pt;">' + label + '</span><br>';
        infoHtml += '<b>Location:</b> ' + obj.grid + '<br>';

        if (obj.type === 'station') {
            // Station selected: display detailed station info
            if (obj.hullImage) {
                infoHtml += '<img src="' + obj.hullImage + '" alt="Hull Art" style="max-width:48%; height:auto;">';
            }
            if (obj.sides && obj.sides.length > 0) {
                infoHtml += '<img src="Images/Factions/' + obj.sides[0] + '.png" alt="Faction Logo" style="max-width:48%; height:auto;">';
            }
            infoHtml += '<b>Facilities:</b> ' + (obj.facilities.length ? obj.facilities.join(', ') : 'None') + '<br>';
            if (obj.hullName && obj.hullImage) {
                infoHtml += '<b>General Class:</b> ' + obj.hullName + '<br>';
            }
            if (obj.hullDescription) {
                infoHtml += '<p class="hull-desc">' + obj.hullDescription + '</p>';
            }
        } 
        else if ((obj.type === 'jump_point' || obj.type === 'jumppoint' || obj.type === 'jumpnode') && obj.destinations && typeof obj.destinations === 'object') {
        
            // Generate a random 5-character alphanumeric serial
            const serial = Math.random().toString(36).substring(2, 7).toUpperCase();
            infoHtml += 'Oliver Class jump stabilisation node. Serial: ' + serial;
            infoHtml += '<br><br><b>Destinations:</b><br>';
            for (const [target, label] of Object.entries(obj.destinations)) {
                if (typeof target === 'string' && typeof label === 'string') {
                    let file = label + '.html';
                    // Correctly escape single quotes for JS string
                    infoHtml += `<button onclick="window.open('${file}', '_blank')">${label}, ${target}</button>`;
                }
            }
            }
        else if (obj.type === 'sensor_relay') {
            // Generate a random 5-character alphanumeric serial
            const serial = Math.random().toString(36).substring(2, 7).toUpperCase();
            infoHtml += 'Standard sensor and info relay buoy, Serial: ' + serial;
        }
        else if (obj.type === 'jumpnode' || obj.type === 'jumppoint') {
            // Generate a random 5-character alphanumeric serial
            const serial = Math.random().toString(36).substring(2, 7).toUpperCase();
            infoHtml += 'Oliver Class jump stabilisation node. Serial: ' + serial;
        }
        else if (obj.type === 'planet') {
            if (obj['class']) {
                infoHtml += '<b>Class:</b> ' + obj['class'] + '<br>';
            }
        }
        else {
            infoHtml += '<b>Type:</b> ' + obj.type;
        }

            // ——— append a description paragraph if one exists ———
            if (obj.description) {
                infoHtml += '<p class="desc-text">'
                          + obj.description
                          + '</p>';
            }
            document.getElementById('info').innerHTML = getInfoHeader() + infoHtml;
            document.getElementById('galactic-map-btn').addEventListener('click', function() {
                window.location.href = 'index.html';
            });
                + infoHtml;
         
    }
         document.getElementById('galactic-map-btn').addEventListener('click', function() {
        window.location.href = 'index.html';
    });
    

    var fig = {"data": [{"type": "scatter", "x": [-51194.173036839646, -116194.17303683964, -127139.1602964937, -62139.1602964937, -51194.173036839646], "y": [35036.36280640213, 77536.36280640213, 60796.97052693121, 18296.970526931214, 35036.36280640213], "fill": "toself", "fillcolor": "rgba(165,42,42,0.4)", "line": {"shape": "spline", "color": "rgba(165,42,42,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-7052.686990561839, -62886.02032389518, -63780.646342771506, -7947.313009438169, -7052.686990561839], "y": [36656.657210785685, 39156.657210785685, 19176.67612254765, 16676.67612254765, 36656.657210785685], "fill": "toself", "fillcolor": "rgba(165,42,42,0.4)", "line": {"shape": "spline", "color": "rgba(165,42,42,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [26310.640734090986, -19711.450029512125, -7332.73149769409, 38689.35926590902, 26310.640734090986], "y": [68687.74813505511, 32421.869505654126, 16713.039902210563, 52978.918531611554, 68687.74813505511], "fill": "toself", "fillcolor": "rgba(165,42,42,0.4)", "line": {"shape": "spline", "color": "rgba(165,42,42,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [71111.19087887031, 24618.421102921515, 26480.258595295243, 72973.02837124403, 71111.19087887031], "y": [73198.04827984558, 68851.0725425342, 48937.922084809245, 53284.89782212063, 73198.04827984558], "fill": "toself", "fillcolor": "rgba(165,42,42,0.4)", "line": {"shape": "spline", "color": "rgba(165,42,42,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [95650.17121171253, 69608.50454504587, 57114.603593957385, 83156.27026062403, 95650.17121171253], "y": [52531.64262689489, 73364.97596022821, 57747.59977136761, 36914.26643803428, 52531.64262689489], "fill": "toself", "fillcolor": "rgba(165,42,42,0.4)", "line": {"shape": "spline", "color": "rgba(165,42,42,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [106466.55121945545, 95921.28372974346, 76680.1680306589, 87225.43552037088, 106466.55121945545], "y": [14947.624804055029, 52129.33776701799, 46672.28117445443, 9490.568211491465, 14947.624804055029], "fill": "toself", "fillcolor": "rgba(165,42,42,0.4)", "line": {"shape": "spline", "color": "rgba(165,42,42,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [133666.78182419212, 104185.04314106451, 86099.02178806213, 115580.76047118976, 133666.78182419212], "y": [-42539.728482178754, 19912.04620917928, 11374.140633527702, -51077.63405783033, -42539.728482178754], "fill": "toself", "fillcolor": "rgba(165,42,42,0.4)", "line": {"shape": "spline", "color": "rgba(165,42,42,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [159214.58311350291, 126807.17570609551, 116653.32955224936, 149060.7369596568, 159214.58311350291], "y": [-52660.88924721252, -33563.6670249903, -50794.43625575954, -69891.65847798175, -52660.88924721252], "fill": "toself", "fillcolor": "rgba(165,42,42,0.4)", "line": {"shape": "spline", "color": "rgba(165,42,42,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-15794.456461280777, -93340.7527575771, -123846.8901322263, -46300.59383592999, -15794.456461280777], "y": [12423.761887693647, 103858.94707287884, 77986.65335007508, -13448.531835110116, 12423.761887693647], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-76160.94720335092, -111461.87312927688, -99938.73272348949, -64637.806797563535, -76160.94720335092], "y": [-38056.587278474886, -62940.846537734156, -79287.62711338604, -54403.36785412678, -38056.587278474886], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-40460.61235829667, -78076.35309903743, -77768.69719817335, -40152.95645743259, -40460.61235829667], "y": [-36231.16078821824, -36809.86449192195, -56807.49804808713, -56228.79434438342, -36231.16078821824], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [25452.16306964463, -40081.10953901358, -52106.53335078977, 13426.739257868447, 25452.16306964463], "y": [-85816.36790401091, -36503.41618397275, -52484.31672640672, -101797.2684464449, -85816.36790401091], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [168989.05450795288, 89127.94339684174, 59425.15445409571, 139286.26556520682, 168989.05450795288], "y": [-39779.04660519315, 48762.620061473535, 21971.869250369266, -66569.79741629743, -39779.04660519315], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [78997.14571299401, 13024.92349077178, 21741.094456187577, 87713.31667840981, 78997.14571299401], "y": [142472.38395797112, 110527.93951352667, 92527.15165016796, 124471.5960946124, 142472.38395797112], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [121541.1942455157, 76402.30535662682, 69474.82370144366, 114613.71259033254, 121541.1942455157], "y": [126880.73254546341, 143547.39921213005, 124785.46972934231, 108118.80306267565, 126880.73254546341], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [150888.8899510231, 107138.8899510231, 112349.3502181585, 156099.3502181585, 150888.8899510231], "y": [141043.33307029758, 129237.777514742, 109928.42476006369, 121733.98031561925, 141043.33307029758], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-101644.76880429809], "y": [733.1011374028776], "mode": "markers+text", "marker": {"symbol": "circle", "size": 50, "color": "#98FB98"}, "text": ["Planet Tilminra"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "hovertext": ["Planet Tilminra [M06]"], "hoverinfo": "text", "meta": {"base_marker_size": 50, "base_text_size": 14}}, {"type": "scatter", "x": [6276.649416096576, -29557.434088704533, -16040.997870772882, 19793.085634028226, 6276.649416096576], "y": [-49709.865586395186, -67794.35632713592, -94576.92438859308, -76492.43364785235, -49709.865586395186], "fill": "toself", "fillcolor": "rgba(165,42,42,0.4)", "line": {"shape": "spline", "color": "rgba(165,42,42,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [153585.00069835913], "y": [79310.131104184], "mode": "markers+text", "marker": {"symbol": "circle", "size": 50, "color": "#98FB98"}, "text": ["Planet Krynk"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "hovertext": ["Planet Krynk [P19]"], "hoverinfo": "text", "meta": {"base_marker_size": 50, "base_text_size": 14}}, {"type": "scatter", "x": [-127061.43547096477], "y": [116805.32335962508], "mode": "markers+text", "marker": {"symbol": "circle-open", "size": 16, "color": "#50CC50", "line": {"color": "#50CC50", "width": 5}}, "hovertext": ["Acantha Gate [R05]"], "hoverinfo": "text", "text": ["Acantha Gate"], "textposition": "top center", "textfont": {"color": "#50CC50", "size": 20}, "meta": {"base_marker_size": 16, "base_text_size": 20}}, {"type": "scatter", "x": [191155.2311957019], "y": [-61666.89886259712], "mode": "markers+text", "marker": {"symbol": "circle-open", "size": 16, "color": "#50CC50", "line": {"color": "#50CC50", "width": 5}}, "hovertext": ["Sumri Gate [I21]"], "hoverinfo": "text", "text": ["Sumri Gate"], "textposition": "top center", "textfont": {"color": "#50CC50", "size": 20}, "meta": {"base_marker_size": 16, "base_text_size": 20}}, {"type": "scatter", "x": [-119904.97899519892], "y": [-17119.556612940054], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "red"}, "hovertext": ["Tilminra Alders [L06]"], "hoverinfo": "text", "text": ["Tilminra Alders"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [-80554.46673525378], "y": [19719.220821902203], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "red"}, "hovertext": ["Immigration [M07]"], "hoverinfo": "text", "text": ["Immigration"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [-79023.7597165067], "y": [-9871.917866940985], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "red"}, "hovertext": ["Intu Hospitality [L08]"], "hoverinfo": "text", "text": ["Intu Hospitality"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [-51259.2682924087], "y": [-84269.29872661369], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["TSN Exosciences [H09]"], "hoverinfo": "text", "text": ["TSN Exosciences"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [-48352.46342021039], "y": [-90890.43638545951], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["TSN Logistics [H09]"], "hoverinfo": "text", "text": ["TSN Logistics"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [-45916.593323182904], "y": [-86409.02598503993], "mode": "markers", "marker": {"symbol": "pentagon-open", "size": 3, "color": "orange"}, "hovertext": ["WP 32 [H09]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [-54960.905965014266], "y": [-88508.59856260793], "mode": "markers", "marker": {"symbol": "pentagon-open", "size": 3, "color": "orange"}, "hovertext": ["WP 71 [H09]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [-4727.215502910128], "y": [-119640.15150856123], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["TSN Materials Research [G11]"], "hoverinfo": "text", "text": ["TSN Materials Research"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [-4519.945077871168], "y": [-123395.46605003312], "mode": "markers", "marker": {"symbol": "pentagon-open", "size": 3, "color": "orange"}, "hovertext": ["WP 21 [F11]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [-6054.3171457194985], "y": [-73817.88487089606], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["TSN Refinery [I11]"], "hoverinfo": "text", "text": ["TSN Refinery"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [-6724.113099080267], "y": [-67119.92533728837], "mode": "markers", "marker": {"symbol": "pentagon-open", "size": 3, "color": "orange"}, "hovertext": ["WP 6 [I11]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [164422.6847404259], "y": [-49473.2132316642], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "red"}, "hovertext": ["Krynk Welcome [J20]"], "hoverinfo": "text", "text": ["Krynk Welcome"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [193223.91073493895], "y": [-35072.600234407684], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "red"}, "hovertext": ["Aydos [K21]"], "hoverinfo": "text", "text": ["Aydos"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [173464.9301107963], "y": [-81623.41899298108], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "red"}, "hovertext": ["Anhoto [H20]"], "hoverinfo": "text", "text": ["Anhoto"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [161660.80345327457], "y": [46973.742501074696], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "red"}, "hovertext": ["Tilmi Police [O20]"], "hoverinfo": "text", "text": ["Tilmi Police"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [161465.84817778302], "y": [99083.15322352554], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "red"}, "hovertext": ["Mildraz Innkeep [Q20]"], "hoverinfo": "text", "text": ["Mildraz Innkeep"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [128196.36872533674], "y": [74078.41999878845], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "red"}, "hovertext": ["Yashi Traders [P18]"], "hoverinfo": "text", "text": ["Yashi Traders"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [15304.907819986982], "y": [55541.485842409864], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "red"}, "hovertext": ["Crixia Metals [O12]"], "hoverinfo": "text", "text": ["Crixia Metals"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [3174.6351862421125], "y": [66373.96183692288], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "red"}, "hovertext": ["Yandro Shipyards [P12]"], "hoverinfo": "text", "text": ["Yandro Shipyards"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [32199.941256200942], "y": [26730.166397965404], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "red"}, "hovertext": ["Aga Medical Inst [N13]"], "hoverinfo": "text", "text": ["Aga Medical Inst"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [16285.589404349086], "y": [8886.802200434538], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "red"}, "hovertext": ["L'Shawa Labs [M12]"], "hoverinfo": "text", "text": ["L'Shawa Labs"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [40398.243725336746], "y": [13709.33306463207], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "red"}, "hovertext": ["LNya Traders [M14]"], "hoverinfo": "text", "text": ["LNya Traders"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [6823.348034893146], "y": [45829.65699581637], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "red"}, "hovertext": ["Tasn Mining [O12]"], "hoverinfo": "text", "text": ["Tasn Mining"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [-102018.13716172324], "y": [101112.47163916338], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "red"}, "hovertext": ["Tilminra Welcome [R06]"], "hoverinfo": "text", "text": ["Tilminra Welcome"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [-145768.13716172325], "y": [94862.47163916338], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "red"}, "hovertext": ["Sondo [Q04]"], "hoverinfo": "text", "text": ["Sondo"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [-103407.02605061213], "y": [140001.3605280523], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "red"}, "hovertext": ["Mirilis [T06]"], "hoverinfo": "text", "text": ["Mirilis"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [13271.574486653639], "y": [77152.59695352096], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "red"}, "hovertext": ["Mel Ya Foundry [P12]"], "hoverinfo": "text", "text": ["Mel Ya Foundry"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [-68947.23246513942], "y": [80846.68315281555], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 80 [Q08]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [-33332.15310006005], "y": [61104.61966075205], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 49 [P10]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [-5217.073734980697], "y": [42195.8895020219], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 47 [O11]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [73513.08499517805], "y": [1878.4291845615517], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 22 [M15]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [109128.1643602574], "y": [-17863.634307501925], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 83 [L17]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [144743.2437253368], "y": [-37605.69779956543], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 74 [K19]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [-54145.645163552086], "y": [-244.58668845430984], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 55 [L09]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [-16923.422941329896], "y": [6560.968867101262], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 25 [M11]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [53354.35483644787], "y": [39338.74664487903], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 89 [N14]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [81965.46594755902], "y": [51422.079978212365], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 57 [O16]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [114743.24372533678], "y": [60172.079978212365], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 75 [P17]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [-121462.58160616769], "y": [83751.36052805228], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 71 [Q05]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [-119726.47049505658], "y": [57709.693861385604], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 85 [O06]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [-117990.35938394547], "y": [31668.02719471894], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 84 [N06]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [161026.54090754976], "y": [26136.227068975913], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 37 [N20]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [166186.73823836824], "y": [-9010.645787677055], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 35 [L20]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}], "layout": {"title": "Tilminra", "paper_bgcolor": "black", "plot_bgcolor": "black", "font": {"color": "white"}, "margin": {"l": 0, "r": 0, "t": 40, "b": 0}, "autosize": true, "dragmode": "pan", "hovermode": "closest", "xaxis": {"color": "white", "showgrid": true, "gridcolor": "gray", "dtick": 20000, "title": "X Axis"}, "yaxis": {"color": "white", "showgrid": true, "gridcolor": "gray", "dtick": 20000, "scaleanchor": "x", "scaleratio": 1, "title": "Z Axis"}, "shapes": []}};
    fig.layout.showlegend = false;
    fig.layout.dragmode = 'pan';
    fig.layout.title = 'Tilminra';
    if (!isGM()) {
        fig.data = fig.data.filter(t => !t.gmOnly);
        }
    Plotly.newPlot('plot', fig.data, fig.layout, {responsive: true, scrollZoom: true});
        console.log("[DEBUG JS] Plotted traces count:", fig.data.length);
        console.log("[DEBUG JS] fig.data sample:", fig.data.slice(0,3));

    var plotDiv = document.getElementById('plot');
    // Use Plotly's built-in nearest-point selection for accurate clicks
    plotDiv.on('plotly_click', function(ev) {
        if (!ev || !ev.points || !ev.points.length) return;
        var p = ev.points[0];
        var picked = null;
        // Prefer original name from hovertext: "Name [Grid]"
        if (p.hovertext && typeof p.hovertext === 'string') {
            picked = p.hovertext.split(' [')[0];
        } else if (p.text && typeof p.text === 'string') {
            // Fallback to text label (strip any ** used for GM marking)
            picked = p.text.replace(/\*/g, '');
        }
        if (picked && objData[picked]) {
            highlight(picked);
        }
    });

    // ——— Auto-scale markers based on current zoom/span (optimized: planets & blackholes only) ———
    (function() {
        var refSpan = null;
        var planetIdx = [16, 18];
        var bhIdx = [];
        function rescaleMarkers() {
            try {
                var full = plotDiv._fullLayout || {};
                var xaxis = full.xaxis || (fig.layout && fig.layout.xaxis);
                if (!xaxis || !xaxis.range) return;
                var curr = Math.abs(xaxis.range[1] - xaxis.range[0]);
                if (!curr) return;
                if (!refSpan) refSpan = curr;
                var scale = refSpan / curr;
                var indices = [];
                var markerSizes = [];
                var textSizes = [];
                function pushForIndex(i) {
                    var t = fig.data[i];
                    if (!t || !t.meta || !t.meta.base_marker_size) return;
                    var base = t.meta.base_marker_size;
                    var baseText = t.meta.base_text_size || (t.textfont && t.textfont.size) || 12;
                    var newMarker = Math.max(2, Math.round(base * scale));
                    var newText = Math.max(8, Math.round(baseText * Math.sqrt(scale)));
                    indices.push(i);
                    markerSizes.push(newMarker);
                    textSizes.push(newText);
                }
                planetIdx.forEach(pushForIndex);
                bhIdx.forEach(pushForIndex);
                if (indices.length) {
                    Plotly.restyle(plotDiv, {'marker.size': [markerSizes], 'textfont.size': [textSizes]}, indices);
                }
            } catch (e) { console.error(e); }
        }
        // initial scale after plot settles
        setTimeout(rescaleMarkers, 250);
        plotDiv.on('plotly_relayout', rescaleMarkers);
    })();

  var ctrl = document.getElementById('object-buttons');

  // Helper: create and append a single button
function addButton(label, fn, header, color, isHidden) {
    if (isHidden && !isGM()) return;
    var btn = document.createElement('button');
    btn.textContent = label;
    if (header) {
      btn.className = 'header';     // section header style
      btn.onclick = null;           // no click action
    } else {
      btn.onclick = fn;             // bind the handler
      if (color) btn.style.backgroundColor = color;
    }
    ctrl.appendChild(btn);
  }
  
  function enterGMMode() {
    const pw = prompt("Enter ONI Auth Code: --We will store a cookie for the purpose of tracking if you have authenticated or not--");
    if (pw === "oni1") {
      document.cookie = "gmMode=1; path=/; max-age=31536000";
      location.reload();
    } else {
      alert("Incorrect password.");
    }
  }

  function isGM() {
    return document.cookie.split(';').some(c => c.trim() === 'gmMode=1');
  }

  function exitGMMode() {
    document.cookie = "gmMode=; path=/; expires=Thu, 01 Jan 1970 00:00:00 UTC;";
    location.reload();
  }

  function renderGMControls() {
    const div = document.getElementById('gm-controls');
    div.innerHTML = '';
    const btn = document.createElement('button');
    btn.style.width = '100%';
    if (isGM()) {
      btn.textContent = 'ONI Logout';
      btn.onclick = exitGMMode;
    } else {
      btn.textContent = 'ONI Login';
      btn.onclick = enterGMMode;
    }
    div.appendChild(btn);
  }

  renderGMControls();

  // ——— Populate the sidebar ———
  addButton('None', clearAnnotations, false, null);

  addButton('--- Gates ---', null, true, null);
  addButton('Acantha Gate',function(){highlight('Acantha Gate');},false,null,false)
    addButton('Sumri Gate',function(){highlight('Sumri Gate');},false,null,false)

  addButton('--- Nav Points/POI ---', null, true, null);
  

    addButton('--- Planets ---', null, true, null);
    addButton('Planet Tilminra',function(){highlight('Planet Tilminra');},false,null,false)
    addButton('Planet Krynk',function(){highlight('Planet Krynk');},false,null,false)

    addButton('--- Stations ---', null, true, null);
    addButton('Aga Medical Inst',function(){highlight('Aga Medical Inst');},false,'red',false)
    addButton('Anhoto',function(){highlight('Anhoto');},false,'red',false)
    addButton('Aydos',function(){highlight('Aydos');},false,'red',false)
    addButton('Crixia Metals',function(){highlight('Crixia Metals');},false,'red',false)
    addButton('Immigration',function(){highlight('Immigration');},false,'red',false)
    addButton('Intu Hospitality',function(){highlight('Intu Hospitality');},false,'red',false)
    addButton('Krynk Welcome',function(){highlight('Krynk Welcome');},false,'red',false)
    addButton('L'Shawa Labs',function(){highlight('L'Shawa Labs');},false,'red',false)
    addButton('LNya Traders',function(){highlight('LNya Traders');},false,'red',false)
    addButton('Mel Ya Foundry',function(){highlight('Mel Ya Foundry');},false,'red',false)
    addButton('Mildraz Innkeep',function(){highlight('Mildraz Innkeep');},false,'red',false)
    addButton('Mirilis',function(){highlight('Mirilis');},false,'red',false)
    addButton('Sondo',function(){highlight('Sondo');},false,'red',false)
    addButton('TSN Exosciences',function(){highlight('TSN Exosciences');},false,'blue',false)
    addButton('TSN Logistics',function(){highlight('TSN Logistics');},false,'blue',false)
    addButton('TSN Materials Research',function(){highlight('TSN Materials Research');},false,'blue',false)
    addButton('TSN Refinery',function(){highlight('TSN Refinery');},false,'blue',false)
    addButton('Tasn Mining',function(){highlight('Tasn Mining');},false,'red',false)
    addButton('Tilmi Police',function(){highlight('Tilmi Police');},false,'red',false)
    addButton('Tilminra Alders',function(){highlight('Tilminra Alders');},false,'red',false)
    addButton('Tilminra Welcome',function(){highlight('Tilminra Welcome');},false,'red',false)
    addButton('Yandro Shipyards',function(){highlight('Yandro Shipyards');},false,'red',false)
    addButton('Yashi Traders',function(){highlight('Yashi Traders');},false,'red',false)
    
  // Search filter
  document.getElementById('search-box').addEventListener('input', function() {
    const query = this.value.toLowerCase();
    const buttons = document.querySelectorAll('#object-buttons button');
    buttons.forEach(btn => {
      const label = btn.textContent.toLowerCase();
      const isHeader = btn.classList.contains('header');
      if (isHeader) {
        btn.style.display = ''; // always show section headers
      } else {
        btn.style.display = label.includes(query) ? '' : 'none';
      }
    });
  });
</script>
</body>
</html>