
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GeTorin.html</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        body { margin: 0; background: black; color: white; display: flex; height: 100vh; }
        /* === Description typography controls ===
           Tweak these two variables to change description sizes globally */
        :root {
            --desc-font-size: 130%;
            --hull-desc-font-size: 130%;
        }
        .desc-text { font-size: var(--desc-font-size); margin-top: 8px; }
        .hull-desc { font-size: var(--hull-desc-font-size); margin-top: 5px; color: #ccc; }
        #controls { flex: 1; min-width: 200px; max-width: 350px; overflow-y: auto; background: #333; padding: 10px; }
        #plot { flex: 3; min-width: 400px; }
        #info { flex: 1; min-width: 200px; background: #333; padding: 10px; overflow-y: auto; }
        h2.header { margin-top: 0; margin-bottom: 5px; text-align: center; }
        h3.subheader { margin-top: 0; margin-bottom: 15px; text-align: center; color: #ccc; }
        .alignment-image { display: block; max-width: 100%; height: auto; margin: 10px auto; }
        button { display: block; width: 100%; margin-bottom: 5px; background: #555; color: white; border: none; padding: 5px; text-align: left; cursor: pointer; font-size: 20px; }
        button.header { background: #444; cursor: default; font-size: 24px; }
    </style>
</head>
<body>
    <div id="controls">
        <div id="gm-controls" style="margin-bottom:10px;"></div>
        <h2 class="header">GeTorin</h2>
        <h3 class="subheader">Alignment: League Of Traders</h3>
        <img src="Images/Factions/League Of Traders.png" alt="Alignment Logo" class="alignment-image" onerror="this.style.display='none';">

        <input type="text" id="search-box" placeholder="Search objects..." style="width: 95%; padding: 6px; margin-bottom: 10px; font-size: 16px;">
        <div id="object-buttons">
    </div>
    </div>
    <div id="plot"></div>
    <div id="info">
        <img src="Images/Compass.png" alt="Compass" style="display:block; max-width:100%; height:auto; margin-bottom:10px;">
        <button id="galactic-map-btn" title="Back to Galactic Map">Show Galactic Map</button>
        Select an object
    </div>
<script>
    var objData = {"1766410318478": {"type": "blackhole", "x": -19567.043895747636, "y": 19954.88254458165, "grid": "M11"}, "1766410327135": {"type": "blackhole", "x": 19950.917352537697, "y": -20567.772633744833, "grid": "K12"}, "Planet G'Torin": {"type": "planet", "x": -117815.35866020697, "y": 125901.00586061036, "grid": "S06", "hidden": false}, "Initi Research": {"type": "station", "x": -169.7530864197687, "y": 88.7345679012745, "grid": "M11", "hidden": false, "label": "Initi Research", "hull": "", "facilities": [], "sides": ["League Of Traders"]}, "Sumri Gate": {"type": "jumpnode", "x": -2157.4534711288607, "y": 189406.1643220233, "grid": "V11", "hidden": false, "label": "Sumri Gate", "destinations": {"Sumri Gate": "Sumri"}}, "G'Torin Commerce": {"type": "station", "x": -21157.45347112886, "y": 126406.1643220233, "grid": "S10", "hidden": false, "label": "G'Torin Commerce", "hull": "", "facilities": [], "sides": ["League Of Traders"]}, "G'Torin Shipyards": {"type": "station", "x": -42018.56458223997, "y": 109822.83098868997, "grid": "R09", "hidden": false, "label": "G'Torin Shipyards", "hull": "", "facilities": [], "sides": ["League Of Traders"]}, "Caska": {"type": "station", "x": 189441.58578423754, "y": -43755.6299418588, "grid": "J21", "hidden": false, "label": "Caska", "hull": "", "facilities": [], "sides": ["League Of Traders"]}, "G'Torin Manufacturing": {"type": "station", "x": 162119.05492003998, "y": -64928.469448031676, "grid": "I20", "hidden": false, "label": "G'Torin Manufacturing", "hull": "", "facilities": [], "sides": ["League Of Traders"]}, "Shorin Refinery": {"type": "station", "x": 185008.71541386718, "y": -93381.40154679707, "grid": "H21", "hidden": false, "label": "Shorin Refinery", "hull": "", "facilities": [], "sides": ["League Of Traders"]}, "Maansta": {"type": "station", "x": -229603.8103062975, "y": 177745.95613495877, "grid": "U00", "hidden": false, "label": "Maansta", "hull": "", "facilities": [], "sides": ["League Of Traders"]}, "G'Torin Center": {"type": "station", "x": -100771.8272816061, "y": 150410.2651198696, "grid": "T06", "hidden": false, "label": "G'Torin Center", "hull": "", "facilities": [], "sides": ["League Of Traders"]}, "Rishondi": {"type": "station", "x": -147563.7725833894, "y": 119465.69207460212, "grid": "R04", "hidden": false, "label": "Rishondi", "hull": "", "facilities": [], "sides": ["League Of Traders"]}, "Alrin Factory": {"type": "station", "x": -89463.5282418256, "y": 87992.24814456093, "grid": "Q07", "hidden": false, "label": "Alrin Factory", "hull": "", "facilities": [], "sides": ["League Of Traders"]}, "Lisbeth Mining": {"type": "station", "x": -279147.1290648709, "y": 196994.71213633055, "grid": "V98", "hidden": false, "label": "Lisbeth Mining", "hull": "", "facilities": [], "sides": ["League Of Traders"]}, "Kiquin Foundry": {"type": "station", "x": -284907.1290648709, "y": 159554.71213633055, "grid": "T97", "hidden": false, "label": "Kiquin Foundry", "hull": "", "facilities": [], "sides": ["League Of Traders"]}, "Purrino": {"type": "station", "x": -253278.42536116714, "y": 126965.17509929356, "grid": "S99", "hidden": false, "label": "Purrino", "hull": "", "facilities": [], "sides": ["League Of Traders"]}};
        console.log("[DEBUG JS] objData keys:", Object.keys(objData));
        console.log("[DEBUG JS] objData sample:", objData[Object.keys(objData)[0]]);

    function clearAnnotations() {
        Plotly.relayout('plot', {annotations: []});
        document.getElementById('info').innerHTML = getInfoHeader() + 'Select an object';
        document.getElementById('galactic-map-btn').addEventListener('click', function() {
            window.location.href = 'index.html';
        });
        document.getElementById('galactic-map-btn').addEventListener('click', function() {
            window.location.href = 'index.html';
        });
    }
    
    function getInfoHeader() {
    return '<img src="Images/Compass.png" alt="Compass" '
         + 'style="display:block; max-width:100%; height:auto; margin-bottom:10px;">'
         + '<button id="galactic-map-btn" title="Back to Galactic Map">Galactic Map</button>';
        }
    
    function highlight(name) {
        var obj = objData[name];
        if (obj.hidden && !isGM()) {
            alert("This object is not visible on the public map.");
            return;
        }
        var annotation = {
            x: obj.x, y: obj.y, xref: 'x', yref: 'y', text: name,
            showarrow: true, arrowcolor: 'yellow', arrowwidth: 2,
            arrowhead: 3, font: {color: 'yellow', size: 28}
        };

        Plotly.relayout('plot', {annotations: [annotation]});

        var label = obj.label || name;
        var infoHtml = '<span style="font-size:20pt;">' + label + '</span><br>';
        infoHtml += '<b>Location:</b> ' + obj.grid + '<br>';

        if (obj.type === 'station') {
            // Station selected: display detailed station info
            if (obj.hullImage) {
                infoHtml += '<img src="' + obj.hullImage + '" alt="Hull Art" style="max-width:48%; height:auto;">';
            }
            if (obj.sides && obj.sides.length > 0) {
                infoHtml += '<img src="Images/Factions/' + obj.sides[0] + '.png" alt="Faction Logo" style="max-width:48%; height:auto;">';
            }
            infoHtml += '<b>Facilities:</b> ' + (obj.facilities.length ? obj.facilities.join(', ') : 'None') + '<br>';
            if (obj.hullName && obj.hullImage) {
                infoHtml += '<b>General Class:</b> ' + obj.hullName + '<br>';
            }
            if (obj.hullDescription) {
                infoHtml += '<p class="hull-desc">' + obj.hullDescription + '</p>';
            }
        } 
        else if ((obj.type === 'jump_point' || obj.type === 'jumppoint' || obj.type === 'jumpnode') && obj.destinations && typeof obj.destinations === 'object') {
        
            // Generate a random 5-character alphanumeric serial
            const serial = Math.random().toString(36).substring(2, 7).toUpperCase();
            infoHtml += 'Oliver Class jump stabilisation node. Serial: ' + serial;
            infoHtml += '<br><br><b>Destinations:</b><br>';
            for (const [target, label] of Object.entries(obj.destinations)) {
                if (typeof target === 'string' && typeof label === 'string') {
                    let file = label + '.html';
                    // Correctly escape single quotes for JS string
                    infoHtml += `<button onclick="window.open('${file}', '_blank')">${label}, ${target}</button>`;
                }
            }
            }
        else if (obj.type === 'sensor_relay') {
            // Generate a random 5-character alphanumeric serial
            const serial = Math.random().toString(36).substring(2, 7).toUpperCase();
            infoHtml += 'Standard sensor and info relay buoy, Serial: ' + serial;
        }
        else if (obj.type === 'jumpnode' || obj.type === 'jumppoint') {
            // Generate a random 5-character alphanumeric serial
            const serial = Math.random().toString(36).substring(2, 7).toUpperCase();
            infoHtml += 'Oliver Class jump stabilisation node. Serial: ' + serial;
        }
        else if (obj.type === 'planet') {
            if (obj['class']) {
                infoHtml += '<b>Class:</b> ' + obj['class'] + '<br>';
            }
        }
        else {
            infoHtml += '<b>Type:</b> ' + obj.type;
        }

            // ——— append a description paragraph if one exists ———
            if (obj.description) {
                infoHtml += '<p class="desc-text">'
                          + obj.description
                          + '</p>';
            }
            document.getElementById('info').innerHTML = getInfoHeader() + infoHtml;
            document.getElementById('galactic-map-btn').addEventListener('click', function() {
                window.location.href = 'index.html';
            });
                + infoHtml;
         
    }
         document.getElementById('galactic-map-btn').addEventListener('click', function() {
        window.location.href = 'index.html';
    });
    

    var fig = {"data": [{"type": "scatter", "x": [-42660.757029059474, -42821.47412185745, -36821.80505687989, -36661.08796408192, -42660.757029059474], "y": [36396.391776804565, 21094.91441689148, 21031.897667123296, 36333.37502703638, 36396.391776804565], "fill": "toself", "fillcolor": "rgba(128,0,128,0.6807246046702194)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.6807246046702194)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-33258.39331917189, -42300.63868954227, -37021.20630359911, -27978.960933228733, -33258.39331917189], "y": [53530.535050103186, 36785.63621608397, 33934.74272767467, 50679.64156169388, 53530.535050103186], "fill": "toself", "fillcolor": "rgba(128,0,128,0.5473715497745859)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.5473715497745859)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-11005.821556866063, -32774.19004109104, -30472.5520713919, -8704.183587166928, -11005.821556866063], "y": [62578.23191825929, 53535.98654788891, 47995.00625046507, 57037.25162083545, 62578.23191825929], "fill": "toself", "fillcolor": "rgba(128,0,128,0.44191449018223394)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.44191449018223394)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [15817.396719571581, -14044.339534429339, -13703.217049932871, 16158.519204068049, 15817.396719571581], "y": [64073.882648614046, 62799.40979291369, 54806.685886098756, 56081.15874179911, 64073.882648614046], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [38700.850429785074, 14746.342375563152, 12578.21276084892, 36532.72081507085, 38700.850429785074], "y": [57415.91473645982, 64160.38787793978, 56459.78959119614, 49715.31644971618, 57415.91473645982], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [56435.849207480416, 36667.565861763294, 32054.100280974053, 51822.383626691175, 56435.849207480416], "y": [44739.948999355394, 58694.03136103806, 52158.28845491997, 38204.206093237306, 44739.948999355394], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [81597.07040706532, 70201.2364783578, 61313.80029195158, 72709.6342206591, 81597.07040706532], "y": [5855.5101468859775, 27949.47388621688, 23365.427853228408, 1271.464113897507, 5855.5101468859775], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [86768.4723421791, 81186.83939750603, 69398.77660043634, 74980.4095451094, 86768.4723421791], "y": [-19733.484355212968, 9570.088604320646, 7324.743309640706, -21978.829649892912, -19733.484355212968], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [70953.87413173664, 56302.08765196982, 48235.056552419715, 62886.84303218653, 70953.87413173664], "y": [26053.98708367572, 46054.83846875423, 40145.26917489775, 20144.417789819247, 26053.98708367572], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [86175.9307531443, 85710.79467442156, 73712.40681925318, 74177.54289797593, 86175.9307531443], "y": [-45177.45369406181, -16804.15289197371, -17000.847774845322, -45374.148576933425, -45177.45369406181], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [75888.27894938948, 86270.1162264814, 75158.90088219107, 64777.063605099145, 75888.27894938948], "y": [-69163.54278230062, -43711.29655459142, -39179.090295736154, -64631.33652344535, -69163.54278230062], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [48000.84113727251, 76467.16915510516, 68216.94911954811, 39750.62110171546, 48000.84113727251], "y": [-89967.52720656223, -69203.85265237841, -57893.06711975986, -78656.74167394367, -89967.52720656223], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [13280.400317345639, 51123.871682229044, 48683.91771725274, 10840.446352369332, 13280.400317345639], "y": [-96563.37201819717, -89865.41248458947, -76079.67258247334, -82777.63211608105, -96563.37201819717], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-21446.68511704426, 17401.4801778803, 18775.69365232849, -20072.471642596072, -21446.68511704426], "y": [-94626.85842881518, -97975.83819561903, -82034.96189201999, -78685.98212521613, -94626.85842881518], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-53195.4130367013, -19705.615368662886, -12436.398043926685, -45926.195711965105, -53195.4130367013], "y": [-77708.00104805936, -94787.79785875896, -80534.43055535464, -63454.633744655046, -77708.00104805936], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-80621.96797468593, -52825.43591021405, -40937.80521156619, -68734.33727603809, -80621.96797468593], "y": [-55570.98554218547, -80018.53783985351, -66502.46457974704, -42054.91228207901, -55570.98554218547], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-101170.08083980872, -81076.20223898567, -65600.91919829529, -85694.79779911834, -101170.08083980872], "y": [-22598.953782494435, -56423.64942721323, -47230.41197729816, -13405.716332579359, -22598.953782494435], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-111933.45310535021, -103226.10571166025, -83638.77292726682, -92346.12032095679, -111933.45310535021], "y": [19494.71090346975, -22702.434158258657, -18660.60358370129, 23536.541478027117, 19494.71090346975], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-112604.2029870052, -111466.25159254143, -91473.72992704404, -92611.68132150781, -112604.2029870052], "y": [60163.5886474535, 18563.002505204673, 19109.882249406033, 60710.46839165486, 60163.5886474535], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-98945.03031344997, -112206.99018999317, -93008.89411851985, -79746.93424197665, -98945.03031344997], "y": [105839.31296904516, 60427.14733118507, 54820.623699692864, 100232.78933755294, 105839.31296904516], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-68789.0001741772, -100939.20593549407, -83379.04462816298, -51228.83886684612, -68789.0001741772], "y": [146233.38617182762, 103634.36353808273, 90381.41160802155, 132980.4342417664, 146233.38617182762], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-26338.265769690417, -69339.16597545175, -58716.22450590077, -15715.324300139448, -26338.265769690417], "y": [168931.5785003659, 145220.8017513947, 125955.46722187007, 149666.2439708413, 168931.5785003659], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [25170.413622106957, -25064.28287995066, -22615.59319810966, 27619.10330394796, 25170.413622106957], "y": [175053.09246516274, 169426.80645693233, 147563.50572620903, 153189.79173443944, 175053.09246516274], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [69471.5905638117, 23255.66978191869, 22300.050847839928, 68515.97162973294, 69471.5905638117], "y": [172297.91683759153, 174307.30469767386, 152328.06921386256, 150318.68135378024, 172297.91683759153], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [128273.36515215316, 68273.36515215316, 59745.06123892244, 119745.06123892244, 128273.36515215316], "y": [151853.5886237422, 172686.92195707557, 148125.4066869711, 127292.07335363774, 151853.5886237422], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [174172.55077021936, 129172.55077021937, 108845.87562085623, 153845.87562085624, 174172.55077021936], "y": [103367.92272610762, 150867.92272610762, 131611.0725846057, 84111.07258460569, 103367.92272610762], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [206751.3727107044, 171751.3727107044, 142933.7203470379, 177933.7203470379, 206751.3727107044], "y": [35695.482708655465, 108195.48270865547, 94283.51260205786, 21783.51260205784, 35695.482708655465], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [218487.47352134355, 206820.80685467686, 171197.61953639874, 182864.28620306542, 218487.47352134355], "y": [-40329.6449360189, 39670.3550639811, 34475.30691339886, -45524.69308660114, -40329.6449360189], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [206320.88324311178, 220487.54990977846, 180864.2098146305, 166697.54314796382, 206320.88324311178], "y": [-137332.03397723488, -34832.03397723488, -29355.637378718497, -131855.6373787185, -137332.03397723488], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [156977.6051734226, 206310.93850675592, 170040.821217653, 120707.4878843197, 156977.6051734226], "y": [-208048.53952667094, -136215.20619333762, -111305.79849594912, -183139.13182928244, -208048.53952667094], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [52304.88265830899, 154304.88265830898, 133380.2103994333, 31380.210399433294, 52304.88265830899], "y": [-257299.33110782053, -210299.33110782053, -164888.34024813285, -211888.34024813285, -257299.33110782053], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-124379.90119481618, 50620.09880518382, 55064.99425255846, -119935.00574744154, -124379.90119481618], "y": [-251511.40118915218, -264511.40118915215, -204676.2701668012, -191676.2701668012, -251511.40118915218], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-334513.11751662166, -242513.11751662169, -175801.78942563603, -267801.789425636, -334513.11751662166], "y": [-28670.965837583437, -167670.96583758344, -123516.70551836994, 15483.294481630055, -28670.965837583437], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-80669.53199810664, -197669.53199810663, -240645.3749441511, -123645.37494415107, -80669.53199810664], "y": [-199966.50806980528, -108966.50806980528, -164221.1632861481, -255221.1632861481, -199966.50806980528], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-366343.23506204935, -339343.23506204935, -250971.6718802083, -277971.6718802083, -366343.23506204935], "y": [108884.62072948863, -31115.379270511377, -14072.292085442034, 125927.70791455796, 108884.62072948863], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-354847.38798392547, -370847.38798392547, -271467.5189583322, -255467.5189583322, -354847.38798392547], "y": [246965.87727450405, 103965.87727450405, 92846.45136954257, 235846.45136954257, 246965.87727450405], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-271005.3477290089, -355973.94419287983, -268340.9627493778, -183372.3662855068, -271005.3477290089], "y": [403066.6302574952, 248491.7438423651, 200320.58480168157, 354895.4712168117, 403066.6302574952], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-117815.35866020697], "y": [125901.00586061036], "mode": "markers+text", "marker": {"symbol": "circle", "size": 50, "color": "#98FB98"}, "text": ["Planet G'Torin"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "hovertext": ["Planet G'Torin [S06]"], "hoverinfo": "text", "meta": {"base_marker_size": 50, "base_text_size": 14}}, {"type": "scatter", "x": [-58253.30294937642, -27253.302949376422, -43061.6039928813, -74061.6039928813, -58253.30294937642], "y": [50280.447667665154, 90280.44766766515, 102531.88097638144, 62531.880976381435, 50280.447667665154], "fill": "toself", "fillcolor": "rgba(165,42,42,0.4)", "line": {"shape": "spline", "color": "rgba(165,42,42,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-11408.25115623934, -43408.251156239334, -36906.65578601838, -4906.65578601838, -11408.25115623934], "y": [110863.03031507196, 99863.03031507196, 80949.29832897463, 91949.29832897463, 110863.03031507196], "fill": "toself", "fillcolor": "rgba(165,42,42,0.4)", "line": {"shape": "spline", "color": "rgba(165,42,42,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [69659.57376151209, 5423.462650400965, 4523.474350172823, 68759.58546128395, 69659.57376151209], "y": [165298.28340055022, 168191.80191906876, 148212.06165400395, 145318.5431354854, 165298.28340055022], "fill": "toself", "fillcolor": "rgba(165,42,42,0.4)", "line": {"shape": "spline", "color": "rgba(165,42,42,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [125933.00130896954, 68641.33464230286, 60518.56532123391, 117810.2319879006, 125933.00130896954], "y": [139562.26949496107, 165025.23245792405, 146749.00148551894, 121286.03852255594, 139562.26949496107], "fill": "toself", "fillcolor": "rgba(165,42,42,0.4)", "line": {"shape": "spline", "color": "rgba(165,42,42,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-26697.55510918693, -35469.70987793927, -33052.69158832272, -24280.53681957039, -26697.55510918693], "y": [40663.450497892336, 34011.00025316057, 30823.8349628659, 37476.28520759767, 40663.450497892336], "fill": "toself", "fillcolor": "rgba(165,42,42,1)", "line": {"shape": "spline", "color": "rgba(165,42,42,1)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-14893.405248517283, -26871.73597951418, -26781.8710265059, -14803.540295509007, -14893.405248517283], "y": [40784.70496722312, 40515.52899574004, 36516.53858687171, 36785.7145583548, 40784.70496722312], "fill": "toself", "fillcolor": "rgba(165,42,42,1)", "line": {"shape": "spline", "color": "rgba(165,42,42,1)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-35756.21593691256, -35821.12140843143, -39821.049697498194, -39756.144225979326, -35756.21593691256], "y": [13067.730701180893, 23906.944444832938, 23882.99277843134, 13043.7790347793, 13067.730701180893], "fill": "toself", "fillcolor": "rgba(165,42,42,1)", "line": {"shape": "spline", "color": "rgba(165,42,42,1)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-35477.169013282124, -39870.30787256891, -36161.29606247398, -31768.15720318719, -35477.169013282124], "y": [34030.19250253715, 23151.01381577395, 21653.271717622098, 32532.4504043853, 34030.19250253715], "fill": "toself", "fillcolor": "rgba(165,42,42,1)", "line": {"shape": "spline", "color": "rgba(165,42,42,1)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-25346.33565985312, -14175.532843305456, -14175.532843305456, -25346.33565985312, -25346.33565985312], "y": [-630.2502733586584, -630.2502733586584, 3369.7497266413416, 3369.7497266413416, -630.2502733586584], "fill": "toself", "fillcolor": "rgba(165,42,42,1)", "line": {"shape": "spline", "color": "rgba(165,42,42,1)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-31713.36394006051, -36502.26751779316, -39918.76924636296, -35129.86566863031, -31713.36394006051], "y": [7658.815289158492, 15523.8093599925, 13443.541122798173, 5578.547051964166, 7658.815289158492], "fill": "toself", "fillcolor": "rgba(165,42,42,1)", "line": {"shape": "spline", "color": "rgba(165,42,42,1)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-23234.02641510927, -33462.71333146617, -35533.92404908926, -25305.237132732364, -23234.02641510927], "y": [3349.925856160884, 9540.97320027164, 6118.972884198707, -72.07445991204781, 3349.925856160884], "fill": "toself", "fillcolor": "rgba(165,42,42,1)", "line": {"shape": "spline", "color": "rgba(165,42,42,1)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [1979.427173083922, 1745.7674756159738, -2253.3647512964744, -2019.7050538285264, 1979.427173083922], "y": [15434.009470023255, 26649.67494848477, 26566.35969375743, 15350.694215295913, 15434.009470023255], "fill": "toself", "fillcolor": "rgba(165,42,42,1)", "line": {"shape": "spline", "color": "rgba(165,42,42,1)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-4671.273072032684, -15185.959458090354, -16787.810409940506, -6273.124023882836, -4671.273072032684], "y": [36385.07312401246, 40980.38050754876, 37315.12832958654, 32719.82094605024, 36385.07312401246], "fill": "toself", "fillcolor": "rgba(165,42,42,1)", "line": {"shape": "spline", "color": "rgba(165,42,42,1)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-3218.64002184593, 2155.533019916879, -1416.9452424349897, -6791.118284197799, -3218.64002184593], "y": [4834.778994146391, 15505.23851184936, 17304.515884858694, 6634.056367155727, 4834.778994146391], "fill": "toself", "fillcolor": "rgba(165,42,42,1)", "line": {"shape": "spline", "color": "rgba(165,42,42,1)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-5115.206316296088, -15785.665833999055, -14007.280190997624, -3336.820673294655, -5115.206316296088], "y": [7993.199083610458, 2696.9126076702973, -886.0114083767053, 4410.275067563454, 7993.199083610458], "fill": "toself", "fillcolor": "rgba(165,42,42,1)", "line": {"shape": "spline", "color": "rgba(165,42,42,1)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-7968.040419452716, -1269.7957587048681, 2008.3835361867573, -4689.861124561092, -7968.040419452716], "y": [34029.509401609765, 24449.461805423893, 26741.52212542942, 36321.5697216153, 34029.509401609765], "fill": "toself", "fillcolor": "rgba(165,42,42,1)", "line": {"shape": "spline", "color": "rgba(165,42,42,1)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-35591.83859371722, -39096.734055736444, -42821.70517455946, -39316.809712540235, -35591.83859371722], "y": [13916.294433431221, 22873.2495030359, 21415.652108713854, 12458.697039109173, 13916.294433431221], "fill": "toself", "fillcolor": "rgba(128,0,128,1)", "line": {"shape": "spline", "color": "rgba(128,0,128,1)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [25952.87142917949, 13167.012783733364, 13167.012783733364, 25952.87142917949, 25952.87142917949], "y": [1940.7481981887547, 1940.7481981887547, -2059.251801811245, -2059.251801811245, 1940.7481981887547], "fill": "toself", "fillcolor": "rgba(165,42,42,1)", "line": {"shape": "spline", "color": "rgba(165,42,42,1)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [26242.248390333294, 12918.037801921015, 12877.63582257956, 26201.84641099184, 26242.248390333294], "y": [-38031.98558964615, -37897.39760390461, -41897.19355870847, -42031.781544450016, -38031.98558964615], "fill": "toself", "fillcolor": "rgba(165,42,42,1)", "line": {"shape": "spline", "color": "rgba(165,42,42,1)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [1842.802195321088, 1842.802195321088, -2157.197804678912, -2157.197804678912, 1842.802195321088], "y": [-26169.321035669647, -14190.990304672752, -14190.990304672752, -26169.321035669647, -26169.321035669647], "fill": "toself", "fillcolor": "rgba(165,42,42,1)", "line": {"shape": "spline", "color": "rgba(165,42,42,1)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [41546.25798907484, 41546.25798907484, 37546.25798907484, 37546.25798907484, 41546.25798907484], "y": [-27246.024921601955, -13383.462390223522, -13383.462390223522, -27246.024921601955, -27246.024921601955], "fill": "toself", "fillcolor": "rgba(165,42,42,1)", "line": {"shape": "spline", "color": "rgba(165,42,42,1)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [2661.0868472019965, -2453.256610976454, 1062.1571156863245, 6176.500573864775, 2661.0868472019965], "y": [-4623.17549140584, -14044.334493313512, -15952.70194493045, -6531.542943022778, -4623.17549140584], "fill": "toself", "fillcolor": "rgba(165,42,42,1)", "line": {"shape": "spline", "color": "rgba(165,42,42,1)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [13067.125584325875, 2703.8506822274376, 4787.856881423953, 15151.13178352239, 13067.125584325875], "y": [1782.4476449742467, -4543.187684878046, -7957.410606965955, -1631.7752771136618, 1782.4476449742467], "fill": "toself", "fillcolor": "rgba(165,42,42,1)", "line": {"shape": "spline", "color": "rgba(165,42,42,1)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [34675.37237789099, 25523.389347466404, 23421.417824578737, 32573.40085500333, 34675.37237789099], "y": [-3606.587251012649, 2046.1081501319543, -1357.0838393052147, -7009.779240449819, -3606.587251012649], "fill": "toself", "fillcolor": "rgba(165,42,42,1)", "line": {"shape": "spline", "color": "rgba(165,42,42,1)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [41096.21280465632, 34635.98948906249, 31266.90388641645, 37727.127202010284, 41096.21280465632], "y": [-13247.470897567557, -3153.371966952193, -5309.586752645662, -15403.685683261025, -13247.470897567557], "fill": "toself", "fillcolor": "rgba(165,42,42,1)", "line": {"shape": "spline", "color": "rgba(165,42,42,1)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [37466.56857970865, 41773.38412343788, 38126.65976916104, 33819.84422543181, 37466.56857970865], "y": [-36412.27707516083, -26856.530087511623, -25212.936012344595, -34768.682999993805, -36412.27707516083], "fill": "toself", "fillcolor": "rgba(165,42,42,1)", "line": {"shape": "spline", "color": "rgba(165,42,42,1)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [35332.11792275496, 24430.491077690374, 26129.371923253228, 37030.99876831782, 35332.11792275496], "y": [-32972.30280088347, -38086.64625906193, -41707.94490355117, -36593.60144537272, -32972.30280088347], "fill": "toself", "fillcolor": "rgba(165,42,42,1)", "line": {"shape": "spline", "color": "rgba(165,42,42,1)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [3569.2671829391184, 12855.838199105252, 14824.06722577686, 5537.4962096107265, 3569.2671829391184], "y": [-36658.66578630991, -41907.59723022989, -38425.34587534935, -33176.414431429366, -36658.66578630991], "fill": "toself", "fillcolor": "rgba(165,42,42,1)", "line": {"shape": "spline", "color": "rgba(165,42,42,1)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-2441.720667827013, 3345.5627190591276, 6837.904559423025, 1050.6211725368837, -2441.720667827013], "y": [-26336.92753119216, -36700.2024332906, -34749.93361334712, -24386.65871124868, -26336.92753119216], "fill": "toself", "fillcolor": "rgba(165,42,42,1)", "line": {"shape": "spline", "color": "rgba(165,42,42,1)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [14208.451372274529, -16937.0604590012, -16679.53134700934, 14465.98048426639, 14208.451372274529], "y": [60427.65637566664, 58418.26851558433, 54426.5672797105, 56435.95513979281, 60427.65637566664], "fill": "toself", "fillcolor": "rgba(165,42,42,0.5006365937121761)", "line": {"shape": "spline", "color": "rgba(165,42,42,0.5006365937121761)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [70396.67633749126, 46953.81796986435, 44011.637549228006, 67454.49591685491, 70396.67633749126], "y": [22947.979832391044, 48400.22606010024, 45690.32304109308, 20238.07681338388, 22947.979832391044], "fill": "toself", "fillcolor": "rgba(165,42,42,0.451547268767136)", "line": {"shape": "spline", "color": "rgba(165,42,42,0.451547268767136)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [82294.43071009766, 84973.61452354072, 76990.21205179306, 74311.02823835, 82294.43071009766], "y": [-50667.565775387, -9140.21666701936, -8625.15844303564, -50152.50755140327, -50667.565775387], "fill": "toself", "fillcolor": "rgba(165,42,42,0.4)", "line": {"shape": "spline", "color": "rgba(165,42,42,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-93206.91951099959, -68424.46923665116, -60303.147946588484, -85085.59822093691, -93206.91951099959], "y": [-28544.95423110805, -63039.44582918763, -57204.71014506493, -22710.21854698535, -28544.95423110805], "fill": "toself", "fillcolor": "rgba(165,42,42,0.4)", "line": {"shape": "spline", "color": "rgba(165,42,42,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-88414.27878028901, -61287.542669177885, -74807.83000103022, -101934.56611214134, -88414.27878028901], "y": [82955.12833864886, 125822.06935373803, 134377.87618092584, 91510.93516583666, 82955.12833864886], "fill": "toself", "fillcolor": "rgba(165,42,42,0.4)", "line": {"shape": "spline", "color": "rgba(165,42,42,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-94536.23439026231, -95875.82629698384, -107868.93766266186, -106529.34575594033, -94536.23439026231], "y": [5051.402562862797, 44569.363811148134, 44162.81766315904, 4644.85641487371, 5051.402562862797], "fill": "toself", "fillcolor": "rgba(165,42,42,0.4)", "line": {"shape": "spline", "color": "rgba(165,42,42,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [38613.03661289721, -23308.259683399094, -23457.766278990082, 38463.53001730623, 38613.03661289721], "y": [-83747.84085547886, -82590.43344807145, -90589.03631218933, -91746.44371959675, -83747.84085547886], "fill": "toself", "fillcolor": "rgba(165,42,42,0.4)", "line": {"shape": "spline", "color": "rgba(165,42,42,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [188549.737256913, 159614.55207172784, 141999.0515955127, 170934.23678069786, 188549.737256913], "y": [48353.94804358339, 102173.39248802784, 92702.693307267, 38883.24886282256, 48353.94804358339], "fill": "toself", "fillcolor": "rgba(165,42,42,0.4)", "line": {"shape": "spline", "color": "rgba(165,42,42,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [197323.44107483377, 204267.8855192782, 178364.2366664808, 171419.79222203637, 197323.44107483377], "y": [-106226.396514597, -25786.58169978217, -23550.295467885993, -103990.11028270083, -106226.396514597], "fill": "toself", "fillcolor": "rgba(165,42,42,0.4)", "line": {"shape": "spline", "color": "rgba(165,42,42,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-153383.2644241338, -27549.931090800463, -18290.168945662772, -144123.5022789961, -153383.2644241338], "y": [-196042.51275833388, -236875.8460916672, -208340.6607056306, -167507.3273722973, -196042.51275833388], "fill": "toself", "fillcolor": "rgba(165,42,42,0.4)", "line": {"shape": "spline", "color": "rgba(165,42,42,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-296774.49547781906, -258441.16214448574, -220732.27122531086, -259065.60455864418, -296774.49547781906], "y": [29886.840259240686, -78446.49307409266, -65103.347056538485, 43229.98627679486, 29886.840259240686], "fill": "toself", "fillcolor": "rgba(165,42,42,0.4)", "line": {"shape": "spline", "color": "rgba(165,42,42,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-297410.1255066057, -315410.1255066057, -265963.3078631909, -247963.30786319086, -297410.1255066057], "y": [251533.59125794054, 131533.59125794054, 124116.5686114283, 244116.5686114283, 251533.59125794054], "fill": "toself", "fillcolor": "rgba(165,42,42,0.4)", "line": {"shape": "spline", "color": "rgba(165,42,42,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-105374.3574616388, -279061.39746163867, -212756.31655287696, -39069.276552877105, -105374.3574616388], "y": [509572.54052511737, 394430.14052511746, 294411.96094918955, 409554.36094918946, 509572.54052511737], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [109202.35128762493, -132717.64871237506, -111949.98530214083, 129970.01469785914, 109202.35128762493], "y": [542612.9954379343, 506324.99543793424, 367873.9060363726, 404161.9060363726, 542612.9954379343], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-19567.043895747636], "y": [19954.88254458165], "mode": "markers+text", "marker": {"symbol": "star", "size": 40, "color": "yellow"}, "text": ["1766410318478"], "textposition": "top center", "hovertext": ["1766410318478 [M11]"], "hoverinfo": "text", "meta": {"base_marker_size": 140, "base_text_size": 14}}, {"type": "scatter", "x": [19950.917352537697], "y": [-20567.772633744833], "mode": "markers+text", "marker": {"symbol": "star", "size": 40, "color": "yellow"}, "text": ["1766410327135"], "textposition": "top center", "hovertext": ["1766410327135 [K12]"], "hoverinfo": "text", "meta": {"base_marker_size": 140, "base_text_size": 14}}, {"type": "scatter", "x": [-169.7530864197687], "y": [88.7345679012745], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "red"}, "hovertext": ["Initi Research [M11]"], "hoverinfo": "text", "text": ["Initi Research"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [-2157.4534711288607], "y": [189406.1643220233], "mode": "markers+text", "marker": {"symbol": "circle-open", "size": 16, "color": "#50CC50", "line": {"color": "#50CC50", "width": 5}}, "hovertext": ["Sumri Gate [V11]"], "hoverinfo": "text", "text": ["Sumri Gate"], "textposition": "top center", "textfont": {"color": "#50CC50", "size": 20}, "meta": {"base_marker_size": 16, "base_text_size": 20}}, {"type": "scatter", "x": [-21157.45347112886], "y": [126406.1643220233], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "red"}, "hovertext": ["G'Torin Commerce [S10]"], "hoverinfo": "text", "text": ["G'Torin Commerce"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [-42018.56458223997], "y": [109822.83098868997], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "red"}, "hovertext": ["G'Torin Shipyards [R09]"], "hoverinfo": "text", "text": ["G'Torin Shipyards"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [189441.58578423754], "y": [-43755.6299418588], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "red"}, "hovertext": ["Caska [J21]"], "hoverinfo": "text", "text": ["Caska"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [162119.05492003998], "y": [-64928.469448031676], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "red"}, "hovertext": ["G'Torin Manufacturing [I20]"], "hoverinfo": "text", "text": ["G'Torin Manufacturing"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [185008.71541386718], "y": [-93381.40154679707], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "red"}, "hovertext": ["Shorin Refinery [H21]"], "hoverinfo": "text", "text": ["Shorin Refinery"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [-229603.8103062975], "y": [177745.95613495877], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "red"}, "hovertext": ["Maansta [U00]"], "hoverinfo": "text", "text": ["Maansta"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [-100771.8272816061], "y": [150410.2651198696], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "red"}, "hovertext": ["G'Torin Center [T06]"], "hoverinfo": "text", "text": ["G'Torin Center"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [-147563.7725833894], "y": [119465.69207460212], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "red"}, "hovertext": ["Rishondi [R04]"], "hoverinfo": "text", "text": ["Rishondi"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [-89463.5282418256], "y": [87992.24814456093], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "red"}, "hovertext": ["Alrin Factory [Q07]"], "hoverinfo": "text", "text": ["Alrin Factory"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [-279147.1290648709], "y": [196994.71213633055], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "red"}, "hovertext": ["Lisbeth Mining [V98]"], "hoverinfo": "text", "text": ["Lisbeth Mining"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [-284907.1290648709], "y": [159554.71213633055], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "red"}, "hovertext": ["Kiquin Foundry [T97]"], "hoverinfo": "text", "text": ["Kiquin Foundry"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [-253278.42536116714], "y": [126965.17509929356], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "red"}, "hovertext": ["Purrino [S99]"], "hoverinfo": "text", "text": ["Purrino"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}], "layout": {"title": "GeTorin", "paper_bgcolor": "black", "plot_bgcolor": "black", "font": {"color": "white"}, "margin": {"l": 0, "r": 0, "t": 40, "b": 0}, "autosize": true, "dragmode": "pan", "hovermode": "closest", "xaxis": {"color": "white", "showgrid": true, "gridcolor": "gray", "dtick": 20000, "title": "X Axis"}, "yaxis": {"color": "white", "showgrid": true, "gridcolor": "gray", "dtick": 20000, "scaleanchor": "x", "scaleratio": 1, "title": "Z Axis"}, "shapes": []}};
    fig.layout.showlegend = false;
    fig.layout.dragmode = 'pan';
    fig.layout.title = 'GeTorin';
    if (!isGM()) {
        fig.data = fig.data.filter(t => !t.gmOnly);
        }
    Plotly.newPlot('plot', fig.data, fig.layout, {responsive: true, scrollZoom: true});
        console.log("[DEBUG JS] Plotted traces count:", fig.data.length);
        console.log("[DEBUG JS] fig.data sample:", fig.data.slice(0,3));

    var plotDiv = document.getElementById('plot');
    // Use Plotly's built-in nearest-point selection for accurate clicks
    plotDiv.on('plotly_click', function(ev) {
        if (!ev || !ev.points || !ev.points.length) return;
        var p = ev.points[0];
        var picked = null;
        // Prefer original name from hovertext: "Name [Grid]"
        if (p.hovertext && typeof p.hovertext === 'string') {
            picked = p.hovertext.split(' [')[0];
        } else if (p.text && typeof p.text === 'string') {
            // Fallback to text label (strip any ** used for GM marking)
            picked = p.text.replace(/\*/g, '');
        }
        if (picked && objData[picked]) {
            highlight(picked);
        }
    });

    // ——— Auto-scale markers based on current zoom/span (optimized: planets & blackholes only) ———
    (function() {
        var refSpan = null;
        var planetIdx = [37];
        var bhIdx = [81, 82];
        function rescaleMarkers() {
            try {
                var full = plotDiv._fullLayout || {};
                var xaxis = full.xaxis || (fig.layout && fig.layout.xaxis);
                if (!xaxis || !xaxis.range) return;
                var curr = Math.abs(xaxis.range[1] - xaxis.range[0]);
                if (!curr) return;
                if (!refSpan) refSpan = curr;
                var scale = refSpan / curr;
                var indices = [];
                var markerSizes = [];
                var textSizes = [];
                function pushForIndex(i) {
                    var t = fig.data[i];
                    if (!t || !t.meta || !t.meta.base_marker_size) return;
                    var base = t.meta.base_marker_size;
                    var baseText = t.meta.base_text_size || (t.textfont && t.textfont.size) || 12;
                    var newMarker = Math.max(2, Math.round(base * scale));
                    var newText = Math.max(8, Math.round(baseText * Math.sqrt(scale)));
                    indices.push(i);
                    markerSizes.push(newMarker);
                    textSizes.push(newText);
                }
                planetIdx.forEach(pushForIndex);
                bhIdx.forEach(pushForIndex);
                if (indices.length) {
                    Plotly.restyle(plotDiv, {'marker.size': [markerSizes], 'textfont.size': [textSizes]}, indices);
                }
            } catch (e) { console.error(e); }
        }
        // initial scale after plot settles
        setTimeout(rescaleMarkers, 250);
        plotDiv.on('plotly_relayout', rescaleMarkers);
    })();

  var ctrl = document.getElementById('object-buttons');

  // Helper: create and append a single button
function addButton(label, fn, header, color, isHidden) {
    if (isHidden && !isGM()) return;
    var btn = document.createElement('button');
    btn.textContent = label;
    if (header) {
      btn.className = 'header';     // section header style
      btn.onclick = null;           // no click action
    } else {
      btn.onclick = fn;             // bind the handler
      if (color) btn.style.backgroundColor = color;
    }
    ctrl.appendChild(btn);
  }
  
  function enterGMMode() {
    const pw = prompt("Enter ONI Auth Code: --We will store a cookie for the purpose of tracking if you have authenticated or not--");
    if (pw === "oni1") {
      document.cookie = "gmMode=1; path=/; max-age=31536000";
      location.reload();
    } else {
      alert("Incorrect password.");
    }
  }

  function isGM() {
    return document.cookie.split(';').some(c => c.trim() === 'gmMode=1');
  }

  function exitGMMode() {
    document.cookie = "gmMode=; path=/; expires=Thu, 01 Jan 1970 00:00:00 UTC;";
    location.reload();
  }

  function renderGMControls() {
    const div = document.getElementById('gm-controls');
    div.innerHTML = '';
    const btn = document.createElement('button');
    btn.style.width = '100%';
    if (isGM()) {
      btn.textContent = 'ONI Logout';
      btn.onclick = exitGMMode;
    } else {
      btn.textContent = 'ONI Login';
      btn.onclick = enterGMMode;
    }
    div.appendChild(btn);
  }

  renderGMControls();

  // ——— Populate the sidebar ———
  addButton('None', clearAnnotations, false, null);

  addButton('--- Gates ---', null, true, null);
  addButton('Sumri Gate',function(){highlight('Sumri Gate');},false,null,false)

  addButton('--- Nav Points/POI ---', null, true, null);
  

    addButton('--- Planets ---', null, true, null);
    addButton('Planet G'Torin',function(){highlight('Planet G'Torin');},false,null,false)

    addButton('--- Stations ---', null, true, null);
    addButton('Alrin Factory',function(){highlight('Alrin Factory');},false,'red',false)
    addButton('Caska',function(){highlight('Caska');},false,'red',false)
    addButton('G'Torin Center',function(){highlight('G'Torin Center');},false,'red',false)
    addButton('G'Torin Commerce',function(){highlight('G'Torin Commerce');},false,'red',false)
    addButton('G'Torin Manufacturing',function(){highlight('G'Torin Manufacturing');},false,'red',false)
    addButton('G'Torin Shipyards',function(){highlight('G'Torin Shipyards');},false,'red',false)
    addButton('Initi Research',function(){highlight('Initi Research');},false,'red',false)
    addButton('Kiquin Foundry',function(){highlight('Kiquin Foundry');},false,'red',false)
    addButton('Lisbeth Mining',function(){highlight('Lisbeth Mining');},false,'red',false)
    addButton('Maansta',function(){highlight('Maansta');},false,'red',false)
    addButton('Purrino',function(){highlight('Purrino');},false,'red',false)
    addButton('Rishondi',function(){highlight('Rishondi');},false,'red',false)
    addButton('Shorin Refinery',function(){highlight('Shorin Refinery');},false,'red',false)
    
  // Search filter
  document.getElementById('search-box').addEventListener('input', function() {
    const query = this.value.toLowerCase();
    const buttons = document.querySelectorAll('#object-buttons button');
    buttons.forEach(btn => {
      const label = btn.textContent.toLowerCase();
      const isHeader = btn.classList.contains('header');
      if (isHeader) {
        btn.style.display = ''; // always show section headers
      } else {
        btn.style.display = label.includes(query) ? '' : 'none';
      }
    });
  });
</script>
</body>
</html>