
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Krisenda.html</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        body { margin: 0; background: black; color: white; display: flex; height: 100vh; }
        /* === Description typography controls ===
           Tweak these two variables to change description sizes globally */
        :root {
            --desc-font-size: 130%;
            --hull-desc-font-size: 130%;
        }
        .desc-text { font-size: var(--desc-font-size); margin-top: 8px; }
        .hull-desc { font-size: var(--hull-desc-font-size); margin-top: 5px; color: #ccc; }
        #controls { flex: 1; min-width: 200px; max-width: 350px; overflow-y: auto; background: #333; padding: 10px; }
        #plot { flex: 3; min-width: 400px; }
        #info { flex: 1; min-width: 200px; background: #333; padding: 10px; overflow-y: auto; }
        h2.header { margin-top: 0; margin-bottom: 5px; text-align: center; }
        h3.subheader { margin-top: 0; margin-bottom: 15px; text-align: center; color: #ccc; }
        .alignment-image { display: block; max-width: 100%; height: auto; margin: 10px auto; }
        button { display: block; width: 100%; margin-bottom: 5px; background: #555; color: white; border: none; padding: 5px; text-align: left; cursor: pointer; font-size: 20px; }
        button.header { background: #444; cursor: default; font-size: 24px; }
    </style>
</head>
<body>
    <div id="controls">
        <div id="gm-controls" style="margin-bottom:10px;"></div>
        <h2 class="header">Krisenda</h2>
        <h3 class="subheader">Alignment: USFP</h3>
        <img src="Images/Factions/USFP.png" alt="Alignment Logo" class="alignment-image" onerror="this.style.display='none';">

        <input type="text" id="search-box" placeholder="Search objects..." style="width: 95%; padding: 6px; margin-bottom: 10px; font-size: 16px;">
        <div id="object-buttons">
    </div>
    </div>
    <div id="plot"></div>
    <div id="info">
        <img src="Images/Compass.png" alt="Compass" style="display:block; max-width:100%; height:auto; margin-bottom:10px;">
        <button id="galactic-map-btn" title="Back to Galactic Map">Show Galactic Map</button>
        Select an object
    </div>
<script>
    var objData = {"Cerberus Gate": {"type": "jumpnode", "x": -73019.243772151, "y": 118398.23880485221, "grid": "R08", "hidden": false, "label": "Cerberus Gate", "destinations": {"Krisenda Gate": "Cerberus"}}, "Waypoint 60": {"type": "jumpnode", "x": 77948.48346288674, "y": -82691.4872208886, "grid": "H15", "hidden": false, "label": "Waypoint 60", "destinations": {"Delphinium Gate": "Waypoint 60"}}, "Cerberus Command": {"type": "station", "x": -49144.651727319266, "y": 43300.50081539946, "grid": "O09", "hidden": false, "label": "Cerberus Command", "hull": "starbase_command", "facilities": ["Docking", "Refuel", "Repair"], "sides": ["USFP"], "hullName": "Command Starbase", "hullImage": "Images/Ships/tsn-big-base256.png", "hullDescription": ""}, "WP 18": {"type": "platform", "x": -48315.78831537092, "y": 38208.82338609161, "grid": "N09", "hidden": false, "label": "WP 18"}, "WP 19": {"type": "platform", "x": -45303.39316733056, "y": 46403.38957226124, "grid": "O09", "hidden": false, "label": "WP 19"}, "WP 13": {"type": "platform", "x": -53926.8062305188, "y": 44887.12564038976, "grid": "O09", "hidden": false, "label": "WP 13"}, "QRF 32": {"type": "platform", "x": -50669.10678250853, "y": 51111.22629619703, "grid": "O09", "hidden": false, "label": "QRF 32"}, "QRF 78": {"type": "platform", "x": -54846.80234601594, "y": 37861.86125194121, "grid": "N09", "hidden": false, "label": "QRF 78"}, "QRF 58": {"type": "platform", "x": -41565.55052568628, "y": 40656.74277992116, "grid": "O09", "hidden": false, "label": "QRF 58"}, "DS 12": {"type": "station", "x": 139346.21620292627, "y": -21937.6532199144, "grid": "K18", "hidden": false, "label": "DS 12", "hull": "starbase_command", "facilities": ["Refuel", "Repair"], "sides": ["USFP"], "hullName": "Command Starbase", "hullImage": "Images/Ships/tsn-big-base256.png", "hullDescription": ""}, "WP 3": {"type": "platform", "x": 44437.74907803272, "y": -75791.09211926544, "grid": "I14", "hidden": false, "label": "WP 3"}, "WP 37": {"type": "platform", "x": 44028.772490273244, "y": -84680.11279534704, "grid": "H14", "hidden": false, "label": "WP 37"}, "WP 26": {"type": "platform", "x": 36483.36719182293, "y": -80006.91884598808, "grid": "H13", "hidden": false, "label": "WP 26"}, "QRF 65": {"type": "platform", "x": 50204.96525619086, "y": -80388.16484899574, "grid": "H14", "hidden": false, "label": "QRF 65"}, "QRF 55": {"type": "platform", "x": 37911.599012987004, "y": -72738.90807297011, "grid": "I13", "hidden": false, "label": "QRF 55"}, "QRF 62": {"type": "platform", "x": 36898.421787122265, "y": -87496.70109966415, "grid": "H13", "hidden": false, "label": "QRF 62"}, "I 54": {"type": "station", "x": -56718.57470166151, "y": -52630.456932191526, "grid": "J09", "hidden": false, "label": "I 54", "hull": "starbase_industry", "facilities": [], "sides": ["USFP"], "hullName": "Industrial Starbase", "hullImage": "Images/Ships/industry_station256.png", "hullDescription": ""}, "C 40": {"type": "station", "x": 123674.91990662999, "y": -13326.542108803305, "grid": "L18", "hidden": false, "label": "C 40", "hull": "starbase_civil", "facilities": [], "sides": ["USFP"], "hullName": "Civilian Starbase", "hullImage": "Images/Ships/civil_station256.png", "hullDescription": ""}, "Stephenson Labs": {"type": "station", "x": 72159.72998070403, "y": 69590.98292823369, "grid": "P15", "hidden": false, "label": "Stephenson Labs", "hull": "starbase_science", "facilities": [], "sides": ["USFP"], "hullName": "Science Starbase", "hullImage": "Images/Ships/science_station256.png", "hullDescription": ""}, "Brunell": {"type": "station", "x": 59659.729980704025, "y": 44590.98292823368, "grid": "O14", "hidden": false, "label": "Brunell", "hull": "starbase_civil", "facilities": ["Refuel", "Repair"], "sides": ["USFP"], "hullName": "Civilian Starbase", "hullImage": "Images/Ships/civil_station256.png", "hullDescription": ""}, "Juaqim Apartments": {"type": "station", "x": 80801.70528934598, "y": 53348.698977616375, "grid": "O16", "hidden": false, "label": "Juaqim Apartments", "hull": "starbase_civil", "facilities": [], "sides": ["USFP"], "hullName": "Civilian Starbase", "hullImage": "Images/Ships/civil_station256.png", "hullDescription": ""}, "DS 33": {"type": "station", "x": 57668.98923996327, "y": 138348.69897761644, "grid": "S14", "hidden": false, "label": "DS 33", "hull": "starbase_command", "facilities": ["Docking", "Refuel", "Repair"], "sides": ["USFP"], "hullName": "Command Starbase", "hullImage": "Images/Ships/tsn-big-base256.png", "hullDescription": ""}, "DS 54": {"type": "station", "x": -145433.04779707376, "y": -44007.22694830945, "grid": "J04", "hidden": false, "label": "DS 54", "hull": "starbase_command", "facilities": ["Refuel", "Repair", "Docking"], "sides": ["USFP"], "hullName": "Command Starbase", "hullImage": "Images/Ships/tsn-big-base256.png", "hullDescription": ""}, "WP 1": {"type": "platform", "x": -76779.72590778049, "y": 122178.17797700383, "grid": "S08", "hidden": false, "label": "WP 1"}, "WP 96": {"type": "platform", "x": -68699.89616856282, "y": 121241.4558016265, "grid": "S08", "hidden": false, "label": "WP 96"}, "WP 47": {"type": "platform", "x": -73546.62210774655, "y": 114352.0104393626, "grid": "R08", "hidden": false, "label": "WP 47"}, "WP 69": {"type": "platform", "x": -73043.44135074966, "y": 117338.05974895762, "grid": "R08", "hidden": false, "label": "WP 69"}, "DS-12": {"type": "station", "x": 41978.00894512175, "y": -79968.20077433663, "grid": "I14", "hidden": false, "label": "DS-12", "hull": "starbase_command", "facilities": ["Docking", "Refuel", "Repair"], "sides": ["USFP"], "hullName": "Command Starbase", "hullImage": "Images/Ships/tsn-big-base256.png", "hullDescription": ""}, "I 18A": {"type": "station", "x": -185833.33333333334, "y": 125833.33333333334, "grid": "S02", "hidden": false, "label": "I 18A", "hull": "starbase_industry", "facilities": [], "sides": ["USFP"], "hullName": "Industrial Starbase", "hullImage": "Images/Ships/industry_station256.png", "hullDescription": ""}, "I 82S": {"type": "station", "x": -167500.0, "y": 160833.33333333334, "grid": "U03", "hidden": false, "label": "I 82S", "hull": "starbase_industry", "facilities": [], "sides": ["USFP"], "hullName": "Industrial Starbase", "hullImage": "Images/Ships/industry_station256.png", "hullDescription": ""}, "I 902S": {"type": "station", "x": -142500.0, "y": 178333.33333333334, "grid": "U04", "hidden": false, "label": "I 902S", "hull": "starbase_industry", "facilities": [], "sides": ["USFP"], "hullName": "Industrial Starbase", "hullImage": "Images/Ships/industry_station256.png", "hullDescription": ""}, "I 32A": {"type": "station", "x": -114166.66666666667, "y": 185833.33333333334, "grid": "V06", "hidden": false, "label": "I 32A", "hull": "starbase_industry", "facilities": [], "sides": ["USFP"], "hullName": "Industrial Starbase", "hullImage": "Images/Ships/industry_station256.png", "hullDescription": ""}, "C 45B": {"type": "station", "x": -135000.0, "y": 133333.33333333334, "grid": "S05", "hidden": false, "label": "C 45B", "hull": "starbase_civil", "facilities": [], "sides": ["USFP"], "hullName": "Civilian Starbase", "hullImage": "Images/Ships/civil_station256.png", "hullDescription": ""}, "I 23": {"type": "station", "x": 65425.311499771386, "y": 150518.8343645214, "grid": "T15", "hidden": false, "label": "I 23", "hull": "starbase_industry", "facilities": [], "sides": ["USFP"], "hullName": "Industrial Starbase", "hullImage": "Images/Ships/industry_station256.png", "hullDescription": ""}, "I 91": {"type": "station", "x": -62552.54325988798, "y": 154276.29291457095, "grid": "T08", "hidden": false, "label": "I 91", "hull": "starbase_industry", "facilities": [], "sides": ["USFP"], "hullName": "Industrial Starbase", "hullImage": "Images/Ships/industry_station256.png", "hullDescription": ""}, "I 002": {"type": "station", "x": -52937.552392927915, "y": 147584.74804161588, "grid": "T09", "hidden": false, "label": "I 002", "hull": "starbase_industry", "facilities": [], "sides": ["USFP"], "hullName": "Industrial Starbase", "hullImage": "Images/Ships/industry_station256.png", "hullDescription": ""}, "S 11": {"type": "station", "x": 17112.732314870456, "y": -2383.9113716022816, "grid": "L12", "hidden": false, "label": "S 11", "hull": "starbase_science", "facilities": [], "sides": ["USFP"], "hullName": "Science Starbase", "hullImage": "Images/Ships/science_station256.png", "hullDescription": ""}, "P 383": {"type": "station", "x": 11409.047663140542, "y": -8225.94609858749, "grid": "L12", "hidden": false, "label": "P 383", "hull": "starbase_civil", "facilities": [], "sides": ["USFP"], "hullName": "Civilian Starbase", "hullImage": "Images/Ships/civil_station256.png", "hullDescription": ""}, "S 73": {"type": "station", "x": 20842.305026728376, "y": -12256.331615277024, "grid": "L13", "hidden": false, "label": "S 73", "hull": "starbase_science", "facilities": [], "sides": ["USFP"], "hullName": "Science Starbase", "hullImage": "Images/Ships/science_station256.png", "hullDescription": ""}, "DS 601": {"type": "station", "x": -75368.21247600991, "y": -41665.061984775, "grid": "J08", "hidden": false, "label": "DS 601", "hull": "starbase_command", "facilities": ["Docking", "Refuel", "Repair"], "sides": ["USFP"], "hullName": "Command Starbase", "hullImage": "Images/Ships/tsn-big-base256.png", "hullDescription": ""}, "C 43": {"type": "station", "x": -78968.21247600991, "y": -59665.061984775, "grid": "J08", "hidden": false, "label": "C 43", "hull": "starbase_civil", "facilities": [], "sides": ["USFP"], "hullName": "Civilian Starbase", "hullImage": "Images/Ships/civil_station256.png", "hullDescription": ""}, "R 56X": {"type": "station", "x": 163196.76701774108, "y": 139265.36564428307, "grid": "S20", "hidden": false, "label": "R 56X", "hull": "starbase_science", "facilities": [], "sides": ["USFP"], "hullName": "Science Starbase", "hullImage": "Images/Ships/science_station256.png", "hullDescription": ""}, "S 121": {"type": "station", "x": 143696.76701774108, "y": 163932.03231094975, "grid": "U19", "hidden": false, "label": "S 121", "hull": "starbase_science", "facilities": [], "sides": ["USFP"], "hullName": "Science Starbase", "hullImage": "Images/Ships/science_station256.png", "hullDescription": ""}, "DS 96": {"type": "station", "x": 168173.61886959293, "y": 156686.66194057936, "grid": "T20", "hidden": false, "label": "DS 96", "hull": "starbase_command", "facilities": ["Docking", "Refuel", "Repair"], "sides": ["USFP"], "hullName": "Command Starbase", "hullImage": "Images/Ships/tsn-big-base256.png", "hullDescription": ""}, "C 44 Traders": {"type": "station", "x": -42744.462406127255, "y": 153416.38587747925, "grid": "T09", "hidden": false, "label": "C 44 Traders", "hull": "starbase_civil", "facilities": [], "sides": ["USFP"], "hullName": "Civilian Starbase", "hullImage": "Images/Ships/civil_station256.png", "hullDescription": ""}, "P 282": {"type": "station", "x": -154216.48401106554, "y": 46575.97778420085, "grid": "O04", "hidden": false, "label": "P 282", "hull": "starbase_industry", "facilities": [], "sides": ["USFP"], "hullName": "Industrial Starbase", "hullImage": "Images/Ships/industry_station256.png", "hullDescription": ""}, "S 382": {"type": "station", "x": -149206.19594522196, "y": 33701.10638502388, "grid": "N04", "hidden": false, "label": "S 382", "hull": "starbase_science", "facilities": [], "sides": ["USFP"], "hullName": "Science Starbase", "hullImage": "Images/Ships/science_station256.png", "hullDescription": ""}};
        console.log("[DEBUG JS] objData keys:", Object.keys(objData));
        console.log("[DEBUG JS] objData sample:", objData[Object.keys(objData)[0]]);

    function clearAnnotations() {
        Plotly.relayout('plot', {annotations: []});
        document.getElementById('info').innerHTML = getInfoHeader() + 'Select an object';
        document.getElementById('galactic-map-btn').addEventListener('click', function() {
            window.location.href = 'index.html';
        });
        document.getElementById('galactic-map-btn').addEventListener('click', function() {
            window.location.href = 'index.html';
        });
    }
    
    function getInfoHeader() {
    return '<img src="Images/Compass.png" alt="Compass" '
         + 'style="display:block; max-width:100%; height:auto; margin-bottom:10px;">'
         + '<button id="galactic-map-btn" title="Back to Galactic Map">Galactic Map</button>';
        }
    
    function highlight(name) {
        var obj = objData[name];
        if (obj.hidden && !isGM()) {
            alert("This object is not visible on the public map.");
            return;
        }
        var annotation = {
            x: obj.x, y: obj.y, xref: 'x', yref: 'y', text: name,
            showarrow: true, arrowcolor: 'yellow', arrowwidth: 2,
            arrowhead: 3, font: {color: 'yellow', size: 28}
        };

        Plotly.relayout('plot', {annotations: [annotation]});

        var label = obj.label || name;
        var infoHtml = '<span style="font-size:20pt;">' + label + '</span><br>';
        infoHtml += '<b>Location:</b> ' + obj.grid + '<br>';

        if (obj.type === 'station') {
            // Station selected: display detailed station info
            if (obj.hullImage) {
                infoHtml += '<img src="' + obj.hullImage + '" alt="Hull Art" style="max-width:48%; height:auto;">';
            }
            if (obj.sides && obj.sides.length > 0) {
                infoHtml += '<img src="Images/Factions/' + obj.sides[0] + '.png" alt="Faction Logo" style="max-width:48%; height:auto;">';
            }
            infoHtml += '<b>Facilities:</b> ' + (obj.facilities.length ? obj.facilities.join(', ') : 'None') + '<br>';
            if (obj.hullName && obj.hullImage) {
                infoHtml += '<b>General Class:</b> ' + obj.hullName + '<br>';
            }
            if (obj.hullDescription) {
                infoHtml += '<p class="hull-desc">' + obj.hullDescription + '</p>';
            }
        } 
        else if ((obj.type === 'jump_point' || obj.type === 'jumppoint' || obj.type === 'jumpnode') && obj.destinations && typeof obj.destinations === 'object') {
        
            // Generate a random 5-character alphanumeric serial
            const serial = Math.random().toString(36).substring(2, 7).toUpperCase();
            infoHtml += 'Oliver Class jump stabilisation node. Serial: ' + serial;
            infoHtml += '<br><br><b>Destinations:</b><br>';
            for (const [target, label] of Object.entries(obj.destinations)) {
                if (typeof target === 'string' && typeof label === 'string') {
                    let file = label + '.html';
                    // Correctly escape single quotes for JS string
                    infoHtml += `<button onclick="window.open('${file}', '_blank')">${label}, ${target}</button>`;
                }
            }
            }
        else if (obj.type === 'sensor_relay') {
            // Generate a random 5-character alphanumeric serial
            const serial = Math.random().toString(36).substring(2, 7).toUpperCase();
            infoHtml += 'Standard sensor and info relay buoy, Serial: ' + serial;
        }
        else if (obj.type === 'jumpnode' || obj.type === 'jumppoint') {
            // Generate a random 5-character alphanumeric serial
            const serial = Math.random().toString(36).substring(2, 7).toUpperCase();
            infoHtml += 'Oliver Class jump stabilisation node. Serial: ' + serial;
        }
        else if (obj.type === 'planet') {
            if (obj['class']) {
                infoHtml += '<b>Class:</b> ' + obj['class'] + '<br>';
            }
        }
        else {
            infoHtml += '<b>Type:</b> ' + obj.type;
        }

            // ——— append a description paragraph if one exists ———
            if (obj.description) {
                infoHtml += '<p class="desc-text">'
                          + obj.description
                          + '</p>';
            }
            document.getElementById('info').innerHTML = getInfoHeader() + infoHtml;
            document.getElementById('galactic-map-btn').addEventListener('click', function() {
                window.location.href = 'index.html';
            });
                + infoHtml;
         
    }
         document.getElementById('galactic-map-btn').addEventListener('click', function() {
        window.location.href = 'index.html';
    });
    

    var fig = {"data": [{"type": "scatter", "x": [-135889.81881510533, -71936.62951469382, -75352.61834282834, -139305.80764323988, -135889.81881510533], "y": [164820.48475482958, 170302.09483713415, 210155.9656695396, 204674.35558723504, 164820.48475482958], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-150975.5209821756, -116735.55184637313, -138205.44498234245, -172445.4141181449, -150975.5209821756], "y": [149386.19120159073, 171167.95560488288, 204917.67691825164, 183135.9125149595, 149386.19120159073], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-170329.13385586135, -138178.92809454448, -168363.14898108467, -200513.35474240154, -170329.13385586135], "y": [123800.41480257771, 160773.1514280921, 187020.3000250836, 150047.5633995692, 123800.41480257771], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-173446.4578198531, -161792.00823137572, -200209.173782525, -211863.62337100238, -173446.4578198531], "y": [100408.92705088931, 140596.68425253543, 151737.66226236869, 111549.9050607226, 100408.92705088931], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-131504.51951703784, -82877.33330304605, -86138.86524152716, -134766.05145551893, -131504.51951703784], "y": [176693.36777082804, 184730.91921115722, 204463.1874389679, 196425.63599863873, 176693.36777082804], "fill": "toself", "fillcolor": "rgba(165,42,42,0.4)", "line": {"shape": "spline", "color": "rgba(165,42,42,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-153362.63696675413, -123623.696637536, -135413.07803872446, -165152.01836794257, -153362.63696675413], "y": [160397.10166540052, 182098.4905542894, 198254.30951147355, 176552.92062258467, 160397.10166540052], "fill": "toself", "fillcolor": "rgba(165,42,42,0.4)", "line": {"shape": "spline", "color": "rgba(165,42,42,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-170971.3642195217, -148466.22018659988, -163618.39399583347, -186123.53802875528, -170971.3642195217], "y": [138237.14413873616, 164359.18631980612, 177413.3668323766, 151291.32465130664, 138237.14413873616], "fill": "toself", "fillcolor": "rgba(165,42,42,0.4)", "line": {"shape": "spline", "color": "rgba(165,42,42,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-181356.99729988514, -167291.282279309, -185784.84424880333, -199850.55926937948, -181356.99729988514], "y": [108806.53058116158, 142966.12420256075, 150581.12030764663, 116421.52668624747, 108806.53058116158], "fill": "toself", "fillcolor": "rgba(165,42,42,0.4)", "line": {"shape": "spline", "color": "rgba(165,42,42,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [3768.5929646040886, -74512.50555505748, -80241.86171379556, -1960.7631941339923, 3768.5929646040886], "y": [206396.98651206633, 215426.46775349276, 165755.8076209122, 156726.32637948578, 206396.98651206633], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-164136.93899967326, -168676.29085152506, -218594.58308170844, -214055.23122985664, -164136.93899967326], "y": [34990.300980117536, 114295.08493073484, 111437.79586205188, 32133.011911434587, 34990.300980117536], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [209219.05927289595, 98385.7259395626, 56611.91864572241, 167445.25197905579, 209219.05927289595], "y": [58278.31478516456, 165778.31478516458, 122709.19563725182, 15209.195637251814, 58278.31478516456], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [97909.95889556553, 213743.29222889888, 197921.01902305285, 82087.68568971948, 97909.95889556553], "y": [-101361.01639772953, -69694.34973106286, -11818.139846520786, -43484.80651318746, -101361.01639772953], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-12397.906352352811, -86009.01746346394, -89937.16854109999, -16326.057429988874, -12397.906352352811], "y": [198858.0902285142, 208580.31245073644, 178838.5971486348, 169116.37492641257, 198858.0902285142], "fill": "toself", "fillcolor": "rgba(165,42,42,0.4)", "line": {"shape": "spline", "color": "rgba(165,42,42,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-176448.00342492512, -175115.071026488, -205109.69462564614, -206442.62702408325, -176448.00342492512], "y": [45508.81844061082, 115905.07311694422, 116473.01250176046, 46076.75782542706, 45508.81844061082], "fill": "toself", "fillcolor": "rgba(165,42,42,0.4)", "line": {"shape": "spline", "color": "rgba(165,42,42,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-91728.82233849305, -122978.82233849305, -148245.74038498246, -116995.74038498246, -91728.82233849305], "y": [-17795.001786672437, 7667.961176290533, -23341.438244401044, -48804.40120736402, -17795.001786672437], "fill": "toself", "fillcolor": "rgba(165,42,42,0.4)", "line": {"shape": "spline", "color": "rgba(165,42,42,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-73019.243772151], "y": [118398.23880485221], "mode": "markers+text", "marker": {"symbol": "circle-open", "size": 16, "color": "#50CC50", "line": {"color": "#50CC50", "width": 5}}, "hovertext": ["Cerberus Gate [R08]"], "hoverinfo": "text", "text": ["Cerberus Gate"], "textposition": "top center", "textfont": {"color": "#50CC50", "size": 20}, "meta": {"base_marker_size": 16, "base_text_size": 20}}, {"type": "scatter", "x": [77948.48346288674], "y": [-82691.4872208886], "mode": "markers+text", "marker": {"symbol": "circle-open", "size": 16, "color": "#50CC50", "line": {"color": "#50CC50", "width": 5}}, "hovertext": ["Waypoint 60 [H15]"], "hoverinfo": "text", "text": ["Waypoint 60"], "textposition": "top center", "textfont": {"color": "#50CC50", "size": 20}, "meta": {"base_marker_size": 16, "base_text_size": 20}}, {"type": "scatter", "x": [-49144.651727319266], "y": [43300.50081539946], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["Cerberus Command [O09]"], "hoverinfo": "text", "text": ["Cerberus Command"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [-48315.78831537092], "y": [38208.82338609161], "mode": "markers", "marker": {"symbol": "pentagon-open", "size": 3, "color": "orange"}, "hovertext": ["WP 18 [N09]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [-45303.39316733056], "y": [46403.38957226124], "mode": "markers", "marker": {"symbol": "pentagon-open", "size": 3, "color": "orange"}, "hovertext": ["WP 19 [O09]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [-53926.8062305188], "y": [44887.12564038976], "mode": "markers", "marker": {"symbol": "pentagon-open", "size": 3, "color": "orange"}, "hovertext": ["WP 13 [O09]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [-50669.10678250853], "y": [51111.22629619703], "mode": "markers", "marker": {"symbol": "pentagon-open", "size": 3, "color": "orange"}, "hovertext": ["QRF 32 [O09]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [-54846.80234601594], "y": [37861.86125194121], "mode": "markers", "marker": {"symbol": "pentagon-open", "size": 3, "color": "orange"}, "hovertext": ["QRF 78 [N09]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [-41565.55052568628], "y": [40656.74277992116], "mode": "markers", "marker": {"symbol": "pentagon-open", "size": 3, "color": "orange"}, "hovertext": ["QRF 58 [O09]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [139346.21620292627], "y": [-21937.6532199144], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["DS 12 [K18]"], "hoverinfo": "text", "text": ["DS 12"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [44437.74907803272], "y": [-75791.09211926544], "mode": "markers", "marker": {"symbol": "pentagon-open", "size": 3, "color": "orange"}, "hovertext": ["WP 3 [I14]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [44028.772490273244], "y": [-84680.11279534704], "mode": "markers", "marker": {"symbol": "pentagon-open", "size": 3, "color": "orange"}, "hovertext": ["WP 37 [H14]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [36483.36719182293], "y": [-80006.91884598808], "mode": "markers", "marker": {"symbol": "pentagon-open", "size": 3, "color": "orange"}, "hovertext": ["WP 26 [H13]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [50204.96525619086], "y": [-80388.16484899574], "mode": "markers", "marker": {"symbol": "pentagon-open", "size": 3, "color": "orange"}, "hovertext": ["QRF 65 [H14]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [37911.599012987004], "y": [-72738.90807297011], "mode": "markers", "marker": {"symbol": "pentagon-open", "size": 3, "color": "orange"}, "hovertext": ["QRF 55 [I13]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [36898.421787122265], "y": [-87496.70109966415], "mode": "markers", "marker": {"symbol": "pentagon-open", "size": 3, "color": "orange"}, "hovertext": ["QRF 62 [H13]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [-56718.57470166151], "y": [-52630.456932191526], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["I 54 [J09]"], "hoverinfo": "text", "text": ["I 54"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [123674.91990662999], "y": [-13326.542108803305], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["C 40 [L18]"], "hoverinfo": "text", "text": ["C 40"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [72159.72998070403], "y": [69590.98292823369], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["Stephenson Labs [P15]"], "hoverinfo": "text", "text": ["Stephenson Labs"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [59659.729980704025], "y": [44590.98292823368], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["Brunell [O14]"], "hoverinfo": "text", "text": ["Brunell"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [80801.70528934598], "y": [53348.698977616375], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["Juaqim Apartments [O16]"], "hoverinfo": "text", "text": ["Juaqim Apartments"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [57668.98923996327], "y": [138348.69897761644], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["DS 33 [S14]"], "hoverinfo": "text", "text": ["DS 33"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [-145433.04779707376], "y": [-44007.22694830945], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["DS 54 [J04]"], "hoverinfo": "text", "text": ["DS 54"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [-76779.72590778049], "y": [122178.17797700383], "mode": "markers", "marker": {"symbol": "pentagon-open", "size": 3, "color": "orange"}, "hovertext": ["WP 1 [S08]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [-68699.89616856282], "y": [121241.4558016265], "mode": "markers", "marker": {"symbol": "pentagon-open", "size": 3, "color": "orange"}, "hovertext": ["WP 96 [S08]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [-73546.62210774655], "y": [114352.0104393626], "mode": "markers", "marker": {"symbol": "pentagon-open", "size": 3, "color": "orange"}, "hovertext": ["WP 47 [R08]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [-73043.44135074966], "y": [117338.05974895762], "mode": "markers", "marker": {"symbol": "pentagon-open", "size": 3, "color": "orange"}, "hovertext": ["WP 69 [R08]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [41978.00894512175], "y": [-79968.20077433663], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["DS-12 [I14]"], "hoverinfo": "text", "text": ["DS-12"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [-185833.33333333334], "y": [125833.33333333334], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["I 18A [S02]"], "hoverinfo": "text", "text": ["I 18A"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [-167500.0], "y": [160833.33333333334], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["I 82S [U03]"], "hoverinfo": "text", "text": ["I 82S"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [-142500.0], "y": [178333.33333333334], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["I 902S [U04]"], "hoverinfo": "text", "text": ["I 902S"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [-114166.66666666667], "y": [185833.33333333334], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["I 32A [V06]"], "hoverinfo": "text", "text": ["I 32A"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [-135000.0], "y": [133333.33333333334], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["C 45B [S05]"], "hoverinfo": "text", "text": ["C 45B"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [65425.311499771386], "y": [150518.8343645214], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["I 23 [T15]"], "hoverinfo": "text", "text": ["I 23"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [-62552.54325988798], "y": [154276.29291457095], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["I 91 [T08]"], "hoverinfo": "text", "text": ["I 91"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [-52937.552392927915], "y": [147584.74804161588], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["I 002 [T09]"], "hoverinfo": "text", "text": ["I 002"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [17112.732314870456], "y": [-2383.9113716022816], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["S 11 [L12]"], "hoverinfo": "text", "text": ["S 11"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [11409.047663140542], "y": [-8225.94609858749], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["P 383 [L12]"], "hoverinfo": "text", "text": ["P 383"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [20842.305026728376], "y": [-12256.331615277024], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["S 73 [L13]"], "hoverinfo": "text", "text": ["S 73"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [-75368.21247600991], "y": [-41665.061984775], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["DS 601 [J08]"], "hoverinfo": "text", "text": ["DS 601"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [-78968.21247600991], "y": [-59665.061984775], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["C 43 [J08]"], "hoverinfo": "text", "text": ["C 43"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [163196.76701774108], "y": [139265.36564428307], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["R 56X [S20]"], "hoverinfo": "text", "text": ["R 56X"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [143696.76701774108], "y": [163932.03231094975], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["S 121 [U19]"], "hoverinfo": "text", "text": ["S 121"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [168173.61886959293], "y": [156686.66194057936], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["DS 96 [T20]"], "hoverinfo": "text", "text": ["DS 96"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [-42744.462406127255], "y": [153416.38587747925], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["C 44 Traders [T09]"], "hoverinfo": "text", "text": ["C 44 Traders"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [-154216.48401106554], "y": [46575.97778420085], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["P 282 [O04]"], "hoverinfo": "text", "text": ["P 282"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [-149206.19594522196], "y": [33701.10638502388], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["S 382 [N04]"], "hoverinfo": "text", "text": ["S 382"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}], "layout": {"title": "Krisenda", "paper_bgcolor": "black", "plot_bgcolor": "black", "font": {"color": "white"}, "margin": {"l": 0, "r": 0, "t": 40, "b": 0}, "autosize": true, "dragmode": "pan", "hovermode": "closest", "xaxis": {"color": "white", "showgrid": true, "gridcolor": "gray", "dtick": 20000, "title": "X Axis"}, "yaxis": {"color": "white", "showgrid": true, "gridcolor": "gray", "dtick": 20000, "scaleanchor": "x", "scaleratio": 1, "title": "Z Axis"}, "shapes": []}};
    fig.layout.showlegend = false;
    fig.layout.dragmode = 'pan';
    fig.layout.title = 'Krisenda';
    if (!isGM()) {
        fig.data = fig.data.filter(t => !t.gmOnly);
        }
    Plotly.newPlot('plot', fig.data, fig.layout, {responsive: true, scrollZoom: true});
        console.log("[DEBUG JS] Plotted traces count:", fig.data.length);
        console.log("[DEBUG JS] fig.data sample:", fig.data.slice(0,3));

    var plotDiv = document.getElementById('plot');
    // Use Plotly's built-in nearest-point selection for accurate clicks
    plotDiv.on('plotly_click', function(ev) {
        if (!ev || !ev.points || !ev.points.length) return;
        var p = ev.points[0];
        var picked = null;
        // Prefer original name from hovertext: "Name [Grid]"
        if (p.hovertext && typeof p.hovertext === 'string') {
            picked = p.hovertext.split(' [')[0];
        } else if (p.text && typeof p.text === 'string') {
            // Fallback to text label (strip any ** used for GM marking)
            picked = p.text.replace(/\*/g, '');
        }
        if (picked && objData[picked]) {
            highlight(picked);
        }
    });

    // ——— Auto-scale markers based on current zoom/span (optimized: planets & blackholes only) ———
    (function() {
        var refSpan = null;
        var planetIdx = [];
        var bhIdx = [];
        function rescaleMarkers() {
            try {
                var full = plotDiv._fullLayout || {};
                var xaxis = full.xaxis || (fig.layout && fig.layout.xaxis);
                if (!xaxis || !xaxis.range) return;
                var curr = Math.abs(xaxis.range[1] - xaxis.range[0]);
                if (!curr) return;
                if (!refSpan) refSpan = curr;
                var scale = refSpan / curr;
                var indices = [];
                var markerSizes = [];
                var textSizes = [];
                function pushForIndex(i) {
                    var t = fig.data[i];
                    if (!t || !t.meta || !t.meta.base_marker_size) return;
                    var base = t.meta.base_marker_size;
                    var baseText = t.meta.base_text_size || (t.textfont && t.textfont.size) || 12;
                    var newMarker = Math.max(2, Math.round(base * scale));
                    var newText = Math.max(8, Math.round(baseText * Math.sqrt(scale)));
                    indices.push(i);
                    markerSizes.push(newMarker);
                    textSizes.push(newText);
                }
                planetIdx.forEach(pushForIndex);
                bhIdx.forEach(pushForIndex);
                if (indices.length) {
                    Plotly.restyle(plotDiv, {'marker.size': [markerSizes], 'textfont.size': [textSizes]}, indices);
                }
            } catch (e) { console.error(e); }
        }
        // initial scale after plot settles
        setTimeout(rescaleMarkers, 250);
        plotDiv.on('plotly_relayout', rescaleMarkers);
    })();

  var ctrl = document.getElementById('object-buttons');

  // Helper: create and append a single button
function addButton(label, fn, header, color, isHidden) {
    if (isHidden && !isGM()) return;
    var btn = document.createElement('button');
    btn.textContent = label;
    if (header) {
      btn.className = 'header';     // section header style
      btn.onclick = null;           // no click action
    } else {
      btn.onclick = fn;             // bind the handler
      if (color) btn.style.backgroundColor = color;
    }
    ctrl.appendChild(btn);
  }
  
  function enterGMMode() {
    const pw = prompt("Enter ONI Auth Code: --We will store a cookie for the purpose of tracking if you have authenticated or not--");
    if (pw === "oni1") {
      document.cookie = "gmMode=1; path=/; max-age=31536000";
      location.reload();
    } else {
      alert("Incorrect password.");
    }
  }

  function isGM() {
    return document.cookie.split(';').some(c => c.trim() === 'gmMode=1');
  }

  function exitGMMode() {
    document.cookie = "gmMode=; path=/; expires=Thu, 01 Jan 1970 00:00:00 UTC;";
    location.reload();
  }

  function renderGMControls() {
    const div = document.getElementById('gm-controls');
    div.innerHTML = '';
    const btn = document.createElement('button');
    btn.style.width = '100%';
    if (isGM()) {
      btn.textContent = 'ONI Logout';
      btn.onclick = exitGMMode;
    } else {
      btn.textContent = 'ONI Login';
      btn.onclick = enterGMMode;
    }
    div.appendChild(btn);
  }

  renderGMControls();

  // ——— Populate the sidebar ———
  addButton('None', clearAnnotations, false, null);

  addButton('--- Gates ---', null, true, null);
  addButton('Cerberus Gate',function(){highlight('Cerberus Gate');},false,null,false)
    addButton('Waypoint 60',function(){highlight('Waypoint 60');},false,null,false)

  addButton('--- Nav Points/POI ---', null, true, null);
  

    addButton('--- Planets ---', null, true, null);
    

    addButton('--- Stations ---', null, true, null);
    addButton('Brunell',function(){highlight('Brunell');},false,'blue',false)
    addButton('C 40',function(){highlight('C 40');},false,'blue',false)
    addButton('C 43',function(){highlight('C 43');},false,'blue',false)
    addButton('C 44 Traders',function(){highlight('C 44 Traders');},false,'blue',false)
    addButton('C 45B',function(){highlight('C 45B');},false,'blue',false)
    addButton('Cerberus Command',function(){highlight('Cerberus Command');},false,'blue',false)
    addButton('DS 12',function(){highlight('DS 12');},false,'blue',false)
    addButton('DS 33',function(){highlight('DS 33');},false,'blue',false)
    addButton('DS 54',function(){highlight('DS 54');},false,'blue',false)
    addButton('DS 601',function(){highlight('DS 601');},false,'blue',false)
    addButton('DS 96',function(){highlight('DS 96');},false,'blue',false)
    addButton('DS-12',function(){highlight('DS-12');},false,'blue',false)
    addButton('I 002',function(){highlight('I 002');},false,'blue',false)
    addButton('I 18A',function(){highlight('I 18A');},false,'blue',false)
    addButton('I 23',function(){highlight('I 23');},false,'blue',false)
    addButton('I 32A',function(){highlight('I 32A');},false,'blue',false)
    addButton('I 54',function(){highlight('I 54');},false,'blue',false)
    addButton('I 82S',function(){highlight('I 82S');},false,'blue',false)
    addButton('I 902S',function(){highlight('I 902S');},false,'blue',false)
    addButton('I 91',function(){highlight('I 91');},false,'blue',false)
    addButton('Juaqim Apartments',function(){highlight('Juaqim Apartments');},false,'blue',false)
    addButton('P 282',function(){highlight('P 282');},false,'blue',false)
    addButton('P 383',function(){highlight('P 383');},false,'blue',false)
    addButton('R 56X',function(){highlight('R 56X');},false,'blue',false)
    addButton('S 11',function(){highlight('S 11');},false,'blue',false)
    addButton('S 121',function(){highlight('S 121');},false,'blue',false)
    addButton('S 382',function(){highlight('S 382');},false,'blue',false)
    addButton('S 73',function(){highlight('S 73');},false,'blue',false)
    addButton('Stephenson Labs',function(){highlight('Stephenson Labs');},false,'blue',false)
    
  // Search filter
  document.getElementById('search-box').addEventListener('input', function() {
    const query = this.value.toLowerCase();
    const buttons = document.querySelectorAll('#object-buttons button');
    buttons.forEach(btn => {
      const label = btn.textContent.toLowerCase();
      const isHeader = btn.classList.contains('header');
      if (isHeader) {
        btn.style.display = ''; // always show section headers
      } else {
        btn.style.display = label.includes(query) ? '' : 'none';
      }
    });
  });
</script>
</body>
</html>