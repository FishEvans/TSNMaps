
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Krellis.html</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        body { margin: 0; background: black; color: white; display: flex; height: 100vh; }
        /* === Description typography controls ===
           Tweak these two variables to change description sizes globally */
        :root {
            --desc-font-size: 130%;
            --hull-desc-font-size: 130%;
        }
        .desc-text { font-size: var(--desc-font-size); margin-top: 8px; }
        .hull-desc { font-size: var(--hull-desc-font-size); margin-top: 5px; color: #ccc; }
        #controls { flex: 1; min-width: 200px; max-width: 350px; overflow-y: auto; background: #333; padding: 10px; }
        #plot { flex: 3; min-width: 400px; }
        #info { flex: 1; min-width: 200px; background: #333; padding: 10px; overflow-y: auto; }
        h2.header { margin-top: 0; margin-bottom: 5px; text-align: center; }
        h3.subheader { margin-top: 0; margin-bottom: 15px; text-align: center; color: #ccc; }
        .alignment-image { display: block; max-width: 100%; height: auto; margin: 10px auto; }
        button { display: block; width: 100%; margin-bottom: 5px; background: #555; color: white; border: none; padding: 5px; text-align: left; cursor: pointer; font-size: 20px; }
        button.header { background: #444; cursor: default; font-size: 24px; }
    </style>
</head>
<body>
    <div id="controls">
        <div id="gm-controls" style="margin-bottom:10px;"></div>
        <h2 class="header">Krellis</h2>
        <h3 class="subheader">Alignment: Kraliens</h3>
        <img src="Images/Factions/Kraliens.png" alt="Alignment Logo" class="alignment-image" onerror="this.style.display='none';">

        <input type="text" id="search-box" placeholder="Search objects..." style="width: 95%; padding: 6px; margin-bottom: 10px; font-size: 16px;">
        <div id="object-buttons">
    </div>
    </div>
    <div id="plot"></div>
    <div id="info">
        <img src="Images/Compass.png" alt="Compass" style="display:block; max-width:100%; height:auto; margin-bottom:10px;">
        <button id="galactic-map-btn" title="Back to Galactic Map">Show Galactic Map</button>
        Select an object
    </div>
<script>
    var objData = {"Oofada": {"type": "blackhole", "x": -10.0, "y": -100.81633628252261, "grid": "L11"}, "Planet Yk'Anu": {"type": "planet", "x": 41491.407480777656, "y": 134276.17461544092, "grid": "S14", "hidden": false}, "Acantha Gate": {"type": "jumpnode", "x": -123757.32398215709, "y": 125663.02936425155, "grid": "S05", "hidden": false, "label": "Acantha Gate", "destinations": {"Krellis Gate": "Acantha"}}, "Erowis Gate": {"type": "jumpnode", "x": 49020.145153645375, "y": -139278.9459443904, "grid": "F14", "hidden": false, "label": "Erowis Gate", "destinations": {"Krellis Gate": "Erowis"}}, "Hagma Base": {"type": "station", "x": -75451.3888888889, "y": 142997.68518518523, "grid": "T08", "hidden": false, "label": "Hagma Base", "hull": "starbase_kralien", "facilities": [], "sides": ["Kraliens"], "hullName": "Kralien Base", "hullImage": "Images/Ships/kralien_station256.png", "hullDescription": ""}, "Eshi Directorate": {"type": "station", "x": -88954.475308642, "y": 94290.12345679016, "grid": "Q07", "hidden": false, "label": "Eshi Directorate", "hull": "starbase_kralien", "facilities": [], "sides": ["Kraliens"], "hullName": "Kralien Base", "hullImage": "Images/Ships/kralien_station256.png", "hullDescription": ""}, "Edi Edi Base": {"type": "station", "x": -155505.40123456792, "y": 96701.38888888892, "grid": "Q04", "hidden": false, "label": "Edi Edi Base", "hull": "starbase_kralien", "facilities": [], "sides": ["Kraliens"], "hullName": "Kralien Base", "hullImage": "Images/Ships/kralien_station256.png", "hullDescription": ""}, "WP 59": {"type": "platform", "x": -155390.9749026949, "y": 97408.53234152589, "grid": "Q04", "hidden": false, "label": "WP 59"}, "WP 38": {"type": "platform", "x": -88530.08916139779, "y": 93759.20326951596, "grid": "Q07", "hidden": false, "label": "WP 38"}, "WP 43": {"type": "platform", "x": -155597.74941840963, "y": 95949.18823732187, "grid": "Q04", "hidden": false, "label": "WP 43"}, "WP 15": {"type": "platform", "x": -89410.58403337061, "y": 94882.1267139514, "grid": "Q07", "hidden": false, "label": "WP 15"}, "WP 49": {"type": "platform", "x": -76029.0844480343, "y": 142639.34162762962, "grid": "T08", "hidden": false, "label": "WP 49"}, "WP 44": {"type": "platform", "x": -74859.22673327407, "y": 143381.50942516566, "grid": "T08", "hidden": false, "label": "WP 44"}, "N'Taira": {"type": "station", "x": -11226.498046027695, "y": 149216.31724958878, "grid": "T11", "hidden": false, "label": "N'Taira", "hull": "starbase_kralien", "facilities": [], "sides": ["Kraliens"], "hullName": "Kralien Base", "hullImage": "Images/Ships/kralien_station256.png", "hullDescription": ""}, "Onshi Mining": {"type": "station", "x": -6618.916995872268, "y": 137580.6630826793, "grid": "S11", "hidden": false, "label": "Onshi Mining", "hull": "starbase_kralien", "facilities": [], "sides": ["Kraliens"], "hullName": "Kralien Base", "hullImage": "Images/Ships/kralien_station256.png", "hullDescription": ""}, "WP 94": {"type": "platform", "x": -9790.131994038575, "y": 143259.16372622427, "grid": "T11", "hidden": true, "label": "**WP 94**"}, "Arshira": {"type": "station", "x": 63538.85761223628, "y": 122275.66378439382, "grid": "S15", "hidden": false, "label": "Arshira", "hull": "starbase_kralien", "facilities": [], "sides": ["Kraliens"], "hullName": "Kralien Base", "hullImage": "Images/Ships/kralien_station256.png", "hullDescription": ""}, "P'Gel Metals": {"type": "station", "x": 171264.3734444265, "y": 149625.66521329185, "grid": "T20", "hidden": false, "label": "P'Gel Metals", "hull": "starbase_kralien", "facilities": [], "sides": ["Kraliens"], "hullName": "Kralien Base", "hullImage": "Images/Ships/kralien_station256.png", "hullDescription": ""}, "Uxa": {"type": "station", "x": 197218.9666371563, "y": 149067.50191882456, "grid": "T21", "hidden": false, "label": "Uxa", "hull": "starbase_kralien", "facilities": [], "sides": ["Kraliens"], "hullName": "Kralien Base", "hullImage": "Images/Ships/kralien_station256.png", "hullDescription": ""}, "Koth Processor": {"type": "station", "x": 188009.27227844574, "y": 130927.19484863708, "grid": "S21", "hidden": false, "label": "Koth Processor", "hull": "starbase_kralien", "facilities": [], "sides": ["Kraliens"], "hullName": "Kralien Base", "hullImage": "Images/Ships/kralien_station256.png", "hullDescription": ""}, "Turkeshi Mines": {"type": "station", "x": -132964.83727992966, "y": 4993.96070464222, "grid": "M05", "hidden": false, "label": "Turkeshi Mines", "hull": "starbase_kralien", "facilities": [], "sides": ["Kraliens"], "hullName": "Kralien Base", "hullImage": "Images/Ships/kralien_station256.png", "hullDescription": ""}, "Ungswor Base": {"type": "station", "x": -68148.14951717113, "y": -97498.5137657129, "grid": "H08", "hidden": false, "label": "Ungswor Base", "hull": "starbase_kralien", "facilities": [], "sides": ["Kraliens"], "hullName": "Kralien Base", "hullImage": "Images/Ships/kralien_station256.png", "hullDescription": ""}, "Osca Base": {"type": "station", "x": -95126.04208309097, "y": -106103.53122208388, "grid": "G07", "hidden": false, "label": "Osca Base", "hull": "starbase_kralien", "facilities": [], "sides": ["Kraliens"], "hullName": "Kralien Base", "hullImage": "Images/Ships/kralien_station256.png", "hullDescription": ""}, "Zawpan Mining": {"type": "station", "x": -67683.01343844837, "y": -127964.9269220534, "grid": "F08", "hidden": false, "label": "Zawpan Mining", "hull": "starbase_kralien", "facilities": [], "sides": ["Kraliens"], "hullName": "Kralien Base", "hullImage": "Images/Ships/kralien_station256.png", "hullDescription": ""}, "Ootath Base": {"type": "station", "x": 85811.89254006106, "y": -103777.85082847011, "grid": "G16", "hidden": false, "label": "Ootath Base", "hull": "starbase_kralien", "facilities": [], "sides": ["Kraliens"], "hullName": "Kralien Base", "hullImage": "Images/Ships/kralien_station256.png", "hullDescription": ""}, "Re'iya Base": {"type": "station", "x": 113487.48922406502, "y": -76334.8221838275, "grid": "I17", "hidden": false, "label": "Re'iya Base", "hull": "starbase_kralien", "facilities": [], "sides": ["Kraliens"], "hullName": "Kralien Base", "hullImage": "Images/Ships/kralien_station256.png", "hullDescription": ""}, "Zol Quen Base": {"type": "station", "x": -44891.34558103334, "y": -150058.8906613843, "grid": "E09", "hidden": false, "label": "Zol Quen Base", "hull": "starbase_kralien", "facilities": [], "sides": ["Kraliens"], "hullName": "Kralien Base", "hullImage": "Images/Ships/kralien_station256.png", "hullDescription": ""}, "On Ansi Base": {"type": "station", "x": 31856.107408221378, "y": -115173.68475717762, "grid": "G13", "hidden": false, "label": "On Ansi Base", "hull": "starbase_kralien", "facilities": [], "sides": ["Kraliens"], "hullName": "Kralien Base", "hullImage": "Images/Ships/kralien_station256.png", "hullDescription": ""}, "Kral Ta Minerals": {"type": "station", "x": 144186.4704197669, "y": -52147.7460902442, "grid": "J19", "hidden": false, "label": "Kral Ta Minerals", "hull": "starbase_kralien", "facilities": [], "sides": ["Kraliens"], "hullName": "Kralien Base", "hullImage": "Images/Ships/kralien_station256.png", "hullDescription": ""}, "Yi Pular'Mi": {"type": "station", "x": 127209.00354638633, "y": -34937.71117750224, "grid": "K18", "hidden": false, "label": "Yi Pular'Mi", "hull": "starbase_kralien", "facilities": [], "sides": ["Kraliens"], "hullName": "Kralien Base", "hullImage": "Images/Ships/kralien_station256.png", "hullDescription": ""}};
        console.log("[DEBUG JS] objData keys:", Object.keys(objData));
        console.log("[DEBUG JS] objData sample:", objData[Object.keys(objData)[0]]);

    function clearAnnotations() {
        Plotly.relayout('plot', {annotations: []});
        document.getElementById('info').innerHTML = getInfoHeader() + 'Select an object';
        document.getElementById('galactic-map-btn').addEventListener('click', function() {
            window.location.href = 'index.html';
        });
        document.getElementById('galactic-map-btn').addEventListener('click', function() {
            window.location.href = 'index.html';
        });
    }
    
    function getInfoHeader() {
    return '<img src="Images/Compass.png" alt="Compass" '
         + 'style="display:block; max-width:100%; height:auto; margin-bottom:10px;">'
         + '<button id="galactic-map-btn" title="Back to Galactic Map">Galactic Map</button>';
        }
    
    function highlight(name) {
        var obj = objData[name];
        if (obj.hidden && !isGM()) {
            alert("This object is not visible on the public map.");
            return;
        }
        var annotation = {
            x: obj.x, y: obj.y, xref: 'x', yref: 'y', text: name,
            showarrow: true, arrowcolor: 'yellow', arrowwidth: 2,
            arrowhead: 3, font: {color: 'yellow', size: 28}
        };

        Plotly.relayout('plot', {annotations: [annotation]});

        var label = obj.label || name;
        var infoHtml = '<span style="font-size:20pt;">' + label + '</span><br>';
        infoHtml += '<b>Location:</b> ' + obj.grid + '<br>';

        if (obj.type === 'station') {
            // Station selected: display detailed station info
            if (obj.hullImage) {
                infoHtml += '<img src="' + obj.hullImage + '" alt="Hull Art" style="max-width:48%; height:auto;">';
            }
            if (obj.sides && obj.sides.length > 0) {
                infoHtml += '<img src="Images/Factions/' + obj.sides[0] + '.png" alt="Faction Logo" style="max-width:48%; height:auto;">';
            }
            infoHtml += '<b>Facilities:</b> ' + (obj.facilities.length ? obj.facilities.join(', ') : 'None') + '<br>';
            if (obj.hullName && obj.hullImage) {
                infoHtml += '<b>General Class:</b> ' + obj.hullName + '<br>';
            }
            if (obj.hullDescription) {
                infoHtml += '<p class="hull-desc">' + obj.hullDescription + '</p>';
            }
        } 
        else if ((obj.type === 'jump_point' || obj.type === 'jumppoint' || obj.type === 'jumpnode') && obj.destinations && typeof obj.destinations === 'object') {
        
            // Generate a random 5-character alphanumeric serial
            const serial = Math.random().toString(36).substring(2, 7).toUpperCase();
            infoHtml += 'Oliver Class jump stabilisation node. Serial: ' + serial;
            infoHtml += '<br><br><b>Destinations:</b><br>';
            for (const [target, label] of Object.entries(obj.destinations)) {
                if (typeof target === 'string' && typeof label === 'string') {
                    let file = label + '.html';
                    // Correctly escape single quotes for JS string
                    infoHtml += `<button onclick="window.open('${file}', '_blank')">${label}, ${target}</button>`;
                }
            }
            }
        else if (obj.type === 'sensor_relay') {
            // Generate a random 5-character alphanumeric serial
            const serial = Math.random().toString(36).substring(2, 7).toUpperCase();
            infoHtml += 'Standard sensor and info relay buoy, Serial: ' + serial;
        }
        else if (obj.type === 'jumpnode' || obj.type === 'jumppoint') {
            // Generate a random 5-character alphanumeric serial
            const serial = Math.random().toString(36).substring(2, 7).toUpperCase();
            infoHtml += 'Oliver Class jump stabilisation node. Serial: ' + serial;
        }
        else if (obj.type === 'planet') {
            if (obj['class']) {
                infoHtml += '<b>Class:</b> ' + obj['class'] + '<br>';
            }
        }
        else {
            infoHtml += '<b>Type:</b> ' + obj.type;
        }

            // ——— append a description paragraph if one exists ———
            if (obj.description) {
                infoHtml += '<p class="desc-text">'
                          + obj.description
                          + '</p>';
            }
            document.getElementById('info').innerHTML = getInfoHeader() + infoHtml;
            document.getElementById('galactic-map-btn').addEventListener('click', function() {
                window.location.href = 'index.html';
            });
                + infoHtml;
         
    }
         document.getElementById('galactic-map-btn').addEventListener('click', function() {
        window.location.href = 'index.html';
    });
    

    var fig = {"data": [{"type": "scatter", "x": [-5005.296352402592, -15961.617880619771, -19724.06979812149, -8767.74826990431, -5005.296352402592], "y": [-32890.24242765419, -2533.127054406508, -3891.0503101494983, -34248.16568339719, -32890.24242765419], "fill": "toself", "fillcolor": "rgba(128,0,128,0.48413947181862144)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.48413947181862144)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [16538.256837556393, -5767.808953672078, -10457.333444661643, 11848.73234656683, 16538.256837556393], "y": [-57404.5490248919, -29456.072508037243, -33198.84688654432, -61147.32340339898, -57404.5490248919], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [192304.08987713125, 98161.91540868135, 103560.9927197911, 197703.167188241, 192304.08987713125], "y": [-57947.25983001576, -84341.22570793043, -103598.69086273882, -77204.72498482416, -57947.25983001576], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [108107.96032899743, 52011.431384286225, 49574.746015257675, 105671.27495996887, 108107.96032899743], "y": [-86569.5771395361, -77334.26961686421, -92135.0319084613, -101370.33943113318, -86569.5771395361], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-15842.922149439379, -15749.458270452196, -19749.3016503147, -19842.765529301883, -15842.922149439379], "y": [-4818.673047094842, 5742.7452784564175, 5778.1421225259965, -4783.276203025263, -4818.673047094842], "fill": "toself", "fillcolor": "rgba(165,42,42,1)", "line": {"shape": "spline", "color": "rgba(165,42,42,1)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [5173.4997642538965, -5263.300055981124, -5263.300055981124, 5173.4997642538965, 5173.4997642538965], "y": [-15357.39082608272, -15357.39082608272, -19357.39082608272, -19357.39082608272, -15357.39082608272], "fill": "toself", "fillcolor": "rgba(165,42,42,1)", "line": {"shape": "spline", "color": "rgba(165,42,42,1)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [19869.00999334575, 19869.00999334575, 15869.00999334575, 15869.00999334575, 19869.00999334575], "y": [-4038.7880704096697, 6086.465486534753, 6086.465486534753, -4038.7880704096697, -4038.7880704096697], "fill": "toself", "fillcolor": "rgba(165,42,42,1)", "line": {"shape": "spline", "color": "rgba(165,42,42,1)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [5090.971294860846, -4472.119664516861, -4496.7491309924, 5066.341828385307, 5090.971294860846], "y": [19788.41443892433, 19847.29901223177, 15847.374839277849, 15788.490265970408, 19788.41443892433], "fill": "toself", "fillcolor": "rgba(165,42,42,1)", "line": {"shape": "spline", "color": "rgba(165,42,42,1)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-14873.678771657738, -19999.097587313874, -16434.301123324818, -11308.882307668682, -14873.678771657738], "y": [15896.256812245301, 5826.493426938928, 4012.0441522742617, 14081.807537580637, 15896.256812245301], "fill": "toself", "fillcolor": "rgba(165,42,42,1)", "line": {"shape": "spline", "color": "rgba(165,42,42,1)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-13463.148832938236, -2623.7748288626926, -4008.4969919670884, -14847.870996042633, -13463.148832938236], "y": [12204.97129369456, 16204.660797004044, 19957.332449441477, 15957.642946131991, 12204.97129369456], "fill": "toself", "fillcolor": "rgba(165,42,42,1)", "line": {"shape": "spline", "color": "rgba(165,42,42,1)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [14371.345841487704, 5102.844508592424, 3374.8774401717797, 12643.378773067061, 14371.345841487704], "y": [15523.104034891734, 19962.63828678275, 16355.12809130807, 11915.593839417055, 15523.104034891734], "fill": "toself", "fillcolor": "rgba(165,42,42,1)", "line": {"shape": "spline", "color": "rgba(165,42,42,1)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [10867.932935345325, 16553.652240398733, 19963.233404519262, 14277.514099465854, 10867.932935345325], "y": [13296.645560454921, 4028.144227559643, 6119.736034120976, 15388.237367016254, 13296.645560454921], "fill": "toself", "fillcolor": "rgba(165,42,42,1)", "line": {"shape": "spline", "color": "rgba(165,42,42,1)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [15476.958502247337, 20072.265885783654, 16444.61975913434, 11849.312375598023, 15476.958502247337], "y": [-13916.271916357906, -4024.67805688143, -2339.393635839622, -12230.987495316098, -13916.271916357906], "fill": "toself", "fillcolor": "rgba(165,42,42,1)", "line": {"shape": "spline", "color": "rgba(165,42,42,1)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [13520.575810876742, 3317.43568810967, 5160.286260654537, 15363.426383421609, 13520.575810876742], "y": [-10519.665334350379, -15815.951810290539, -19366.149236810797, -14069.862760870637, -10519.665334350379], "fill": "toself", "fillcolor": "rgba(165,42,42,1)", "line": {"shape": "spline", "color": "rgba(165,42,42,1)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-13191.178618088541, -5324.635470000953, -3332.6870622177134, -11199.230210305303, -13191.178618088541], "y": [-15119.544841421624, -19636.965659135294, -16168.22791454724, -11650.807096833572, -15119.544841421624], "fill": "toself", "fillcolor": "rgba(165,42,42,1)", "line": {"shape": "spline", "color": "rgba(165,42,42,1)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-19833.031895814034, -13757.87976164738, -10320.982803455869, -16396.13493762252, -19833.031895814034], "y": [-4906.213269829019, -15109.353392596091, -13062.956730466794, -2859.8166076997218, -4906.213269829019], "fill": "toself", "fillcolor": "rgba(165,42,42,1)", "line": {"shape": "spline", "color": "rgba(165,42,42,1)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [28928.287514515938, 14005.171655494194, 17241.4357338675, 32164.551592889246, 28928.287514515938], "y": [13319.072547230415, -7224.4375963579705, -9575.308672157447, 10968.201471430937, 13319.072547230415], "fill": "toself", "fillcolor": "rgba(128,0,128,0.615360104859742)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.615360104859742)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-34002.639753924006, -86.46734705638522, -63.61057736794606, -33979.782984235564, -34002.639753924006], "y": [16345.484044562334, 16151.677345094518, 20151.61204057136, 20345.418740039175, 16345.484044562334], "fill": "toself", "fillcolor": "rgba(128,0,128,0.46068715292420753)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.46068715292420753)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [38802.14936194529, 26589.626350957413, 32303.42919480827, 44515.95220579614, 38802.14936194529], "y": [49197.0245992772, 11086.139608086592, 9255.167991266197, 47366.0529824568, 49197.0245992772], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [24015.311061275977, 35781.695260867054, 45517.5865207513, 33751.20232116022, 24015.311061275977], "y": [92605.76307308323, 42429.422893678944, 44712.49568614738, 94888.83586555168, 92605.76307308323], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-19067.81386223313, 25813.278006384477, 37069.732242002035, -7811.359626615571, -19067.81386223313], "y": [133235.455338013, 82278.27226759697, 92192.51646680082, 143149.69953721686, 133235.455338013], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-87649.93295821908, -8946.229254515358, 1742.9816915925885, -76960.72201211113, -87649.93295821908], "y": [171986.01357152787, 122217.49505300935, 139121.36352592424, 188889.88204444278, 171986.01357152787], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [57164.1341015437, 15301.88701649567, 9536.837393793516, 51399.08447884155, 57164.1341015437], "y": [-83207.43095907733, -53671.289960182345, -61842.22643330351, -91378.3674321985, -83207.43095907733], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-69336.50268880406, -28712.13973917748, -30986.115350609383, -71610.47830023596, -69336.50268880406], "y": [-154.52599410711673, 16483.139996214508, 22035.530014811266, 5397.864024489641, -154.52599410711673], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-101909.2108381494, -64455.5785793474, -71840.04162246508, -109293.6738812671, -101909.2108381494], "y": [-40835.47744067994, 180.37975525056754, 6923.502590022985, -34092.354605907516, -40835.47744067994], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-123881.70602932753, -96393.2801034016, -109809.68796840034, -137298.11389432626, -123881.70602932753], "y": [-91035.43970974613, -36058.58785789428, -29350.38392539491, -84327.23577724677, -91035.43970974613], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-126717.93184237479, -117751.90672234731, -137642.11930555885, -146608.14442558633, -126717.93184237479], "y": [-166955.68172638313, -81737.96036149947, -79645.24839023982, -164862.96975512346, -166955.68172638313], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [83637.64751920747, -102195.6858141259, -87797.05712050191, 98036.27621283146, 83637.64751920747], "y": [-34416.58995382098, -136083.25662048766, -162402.0615276856, -60735.39486101894, -34416.58995382098], "fill": "toself", "fillcolor": "rgba(165,42,42,0.4)", "line": {"shape": "spline", "color": "rgba(165,42,42,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [245655.1133264405, 86488.44665977382, 83518.81040559843, 242685.47707226512, 245655.1133264405], "y": [-54316.329480731416, -38482.99614739807, -68335.65533410851, -84168.98866744185, -54316.329480731416], "fill": "toself", "fillcolor": "rgba(165,42,42,0.4)", "line": {"shape": "spline", "color": "rgba(165,42,42,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-31064.708473465136, -76396.49859692194, -112122.01992159663, -66790.22979813983, -31064.708473465136], "y": [-126452.28141936257, -80155.98512306628, -115137.22475347693, -161433.5210497732, -126452.28141936257], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [256947.96140310363, 179787.46757594313, 152527.3472388717, 229687.8410660322, 256947.96140310363], "y": [115677.97288791311, 187533.68276445632, 158261.07032196352, 86405.36044542032, 115677.97288791311], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [231074.98546850038, 169346.59040677195, 141749.08860557378, 203477.4836673022, 231074.98546850038], "y": [107320.74219160207, 166155.61873481196, 137200.86274666962, 78365.98620345973, 107320.74219160207], "fill": "toself", "fillcolor": "rgba(165,42,42,0.4)", "line": {"shape": "spline", "color": "rgba(165,42,42,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [16141.296083863845, -12392.011529304884, -24154.721639394385, 4378.585973774343, 16141.296083863845], "y": [127732.38299421192, 158676.9560394794, 147830.82074316312, 116886.24769789563, 127732.38299421192], "fill": "toself", "fillcolor": "rgba(165,42,42,0.4)", "line": {"shape": "spline", "color": "rgba(165,42,42,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [41491.407480777656], "y": [134276.17461544092], "mode": "markers+text", "marker": {"symbol": "circle", "size": 50, "color": "#98FB98"}, "text": ["Planet Yk'Anu"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "hovertext": ["Planet Yk'Anu [S14]"], "hoverinfo": "text", "meta": {"base_marker_size": 50, "base_text_size": 14}}, {"type": "scatter", "x": [-134375.64394382256, -101814.87062817582, -126779.01309219, -159339.78640783674, -134375.64394382256], "y": [-11713.133714111811, 14295.072923595868, 45548.73816523439, 19540.531527526713, -11713.133714111811], "fill": "toself", "fillcolor": "rgba(165,42,42,0.4)", "line": {"shape": "spline", "color": "rgba(165,42,42,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-10.0], "y": [-100.81633628252261], "mode": "markers+text", "marker": {"symbol": "star", "size": 40, "color": "yellow"}, "text": ["Oofada"], "textposition": "top center", "hovertext": ["Oofada [L11]"], "hoverinfo": "text", "meta": {"base_marker_size": 140, "base_text_size": 14}}, {"type": "scatter", "x": [-123757.32398215709], "y": [125663.02936425155], "mode": "markers+text", "marker": {"symbol": "circle-open", "size": 16, "color": "#50CC50", "line": {"color": "#50CC50", "width": 5}}, "hovertext": ["Acantha Gate [S05]"], "hoverinfo": "text", "text": ["Acantha Gate"], "textposition": "top center", "textfont": {"color": "#50CC50", "size": 20}, "meta": {"base_marker_size": 16, "base_text_size": 20}}, {"type": "scatter", "x": [49020.145153645375], "y": [-139278.9459443904], "mode": "markers+text", "marker": {"symbol": "circle-open", "size": 16, "color": "#50CC50", "line": {"color": "#50CC50", "width": 5}}, "hovertext": ["Erowis Gate [F14]"], "hoverinfo": "text", "text": ["Erowis Gate"], "textposition": "top center", "textfont": {"color": "#50CC50", "size": 20}, "meta": {"base_marker_size": 16, "base_text_size": 20}}, {"type": "scatter", "x": [-75451.3888888889], "y": [142997.68518518523], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "red"}, "hovertext": ["Hagma Base [T08]"], "hoverinfo": "text", "text": ["Hagma Base"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [-88954.475308642], "y": [94290.12345679016], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "red"}, "hovertext": ["Eshi Directorate [Q07]"], "hoverinfo": "text", "text": ["Eshi Directorate"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [-155505.40123456792], "y": [96701.38888888892], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "red"}, "hovertext": ["Edi Edi Base [Q04]"], "hoverinfo": "text", "text": ["Edi Edi Base"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [-155390.9749026949], "y": [97408.53234152589], "mode": "markers", "marker": {"symbol": "pentagon-open", "size": 3, "color": "orange"}, "hovertext": ["WP 59 [Q04]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [-88530.08916139779], "y": [93759.20326951596], "mode": "markers", "marker": {"symbol": "pentagon-open", "size": 3, "color": "orange"}, "hovertext": ["WP 38 [Q07]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [-155597.74941840963], "y": [95949.18823732187], "mode": "markers", "marker": {"symbol": "pentagon-open", "size": 3, "color": "orange"}, "hovertext": ["WP 43 [Q04]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [-89410.58403337061], "y": [94882.1267139514], "mode": "markers", "marker": {"symbol": "pentagon-open", "size": 3, "color": "orange"}, "hovertext": ["WP 15 [Q07]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [-76029.0844480343], "y": [142639.34162762962], "mode": "markers", "marker": {"symbol": "pentagon-open", "size": 3, "color": "orange"}, "hovertext": ["WP 49 [T08]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [-74859.22673327407], "y": [143381.50942516566], "mode": "markers", "marker": {"symbol": "pentagon-open", "size": 3, "color": "orange"}, "hovertext": ["WP 44 [T08]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [-11226.498046027695], "y": [149216.31724958878], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "red"}, "hovertext": ["N'Taira [T11]"], "hoverinfo": "text", "text": ["N'Taira"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [-6618.916995872268], "y": [137580.6630826793], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "red"}, "hovertext": ["Onshi Mining [S11]"], "hoverinfo": "text", "text": ["Onshi Mining"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [-9790.131994038575], "y": [143259.16372622427], "mode": "markers", "marker": {"symbol": "pentagon-open", "size": 3, "color": "orange"}, "hovertext": ["WP 94 [T11]"], "hoverinfo": "text", "gmOnly": true, "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [63538.85761223628], "y": [122275.66378439382], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "red"}, "hovertext": ["Arshira [S15]"], "hoverinfo": "text", "text": ["Arshira"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [171264.3734444265], "y": [149625.66521329185], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "red"}, "hovertext": ["P'Gel Metals [T20]"], "hoverinfo": "text", "text": ["P'Gel Metals"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [197218.9666371563], "y": [149067.50191882456], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "red"}, "hovertext": ["Uxa [T21]"], "hoverinfo": "text", "text": ["Uxa"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [188009.27227844574], "y": [130927.19484863708], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "red"}, "hovertext": ["Koth Processor [S21]"], "hoverinfo": "text", "text": ["Koth Processor"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [-132964.83727992966], "y": [4993.96070464222], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "red"}, "hovertext": ["Turkeshi Mines [M05]"], "hoverinfo": "text", "text": ["Turkeshi Mines"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [-68148.14951717113], "y": [-97498.5137657129], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "red"}, "hovertext": ["Ungswor Base [H08]"], "hoverinfo": "text", "text": ["Ungswor Base"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [-95126.04208309097], "y": [-106103.53122208388], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "red"}, "hovertext": ["Osca Base [G07]"], "hoverinfo": "text", "text": ["Osca Base"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [-67683.01343844837], "y": [-127964.9269220534], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "red"}, "hovertext": ["Zawpan Mining [F08]"], "hoverinfo": "text", "text": ["Zawpan Mining"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [85811.89254006106], "y": [-103777.85082847011], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "red"}, "hovertext": ["Ootath Base [G16]"], "hoverinfo": "text", "text": ["Ootath Base"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [113487.48922406502], "y": [-76334.8221838275], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "red"}, "hovertext": ["Re'iya Base [I17]"], "hoverinfo": "text", "text": ["Re'iya Base"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [-44891.34558103334], "y": [-150058.8906613843], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "red"}, "hovertext": ["Zol Quen Base [E09]"], "hoverinfo": "text", "text": ["Zol Quen Base"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [31856.107408221378], "y": [-115173.68475717762], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "red"}, "hovertext": ["On Ansi Base [G13]"], "hoverinfo": "text", "text": ["On Ansi Base"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [144186.4704197669], "y": [-52147.7460902442], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "red"}, "hovertext": ["Kral Ta Minerals [J19]"], "hoverinfo": "text", "text": ["Kral Ta Minerals"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [127209.00354638633], "y": [-34937.71117750224], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "red"}, "hovertext": ["Yi Pular'Mi [K18]"], "hoverinfo": "text", "text": ["Yi Pular'Mi"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}], "layout": {"title": "Krellis", "paper_bgcolor": "black", "plot_bgcolor": "black", "font": {"color": "white"}, "margin": {"l": 0, "r": 0, "t": 40, "b": 0}, "autosize": true, "dragmode": "pan", "hovermode": "closest", "xaxis": {"color": "white", "showgrid": true, "gridcolor": "gray", "dtick": 20000, "title": "X Axis"}, "yaxis": {"color": "white", "showgrid": true, "gridcolor": "gray", "dtick": 20000, "scaleanchor": "x", "scaleratio": 1, "title": "Z Axis"}, "shapes": []}};
    fig.layout.showlegend = false;
    fig.layout.dragmode = 'pan';
    fig.layout.title = 'Krellis';
    if (!isGM()) {
        fig.data = fig.data.filter(t => !t.gmOnly);
        }
    Plotly.newPlot('plot', fig.data, fig.layout, {responsive: true, scrollZoom: true});
        console.log("[DEBUG JS] Plotted traces count:", fig.data.length);
        console.log("[DEBUG JS] fig.data sample:", fig.data.slice(0,3));

    var plotDiv = document.getElementById('plot');
    // Use Plotly's built-in nearest-point selection for accurate clicks
    plotDiv.on('plotly_click', function(ev) {
        if (!ev || !ev.points || !ev.points.length) return;
        var p = ev.points[0];
        var picked = null;
        // Prefer original name from hovertext: "Name [Grid]"
        if (p.hovertext && typeof p.hovertext === 'string') {
            picked = p.hovertext.split(' [')[0];
        } else if (p.text && typeof p.text === 'string') {
            // Fallback to text label (strip any ** used for GM marking)
            picked = p.text.replace(/\*/g, '');
        }
        if (picked && objData[picked]) {
            highlight(picked);
        }
    });

    // ——— Auto-scale markers based on current zoom/span (optimized: planets & blackholes only) ———
    (function() {
        var refSpan = null;
        var planetIdx = [33];
        var bhIdx = [35];
        function rescaleMarkers() {
            try {
                var full = plotDiv._fullLayout || {};
                var xaxis = full.xaxis || (fig.layout && fig.layout.xaxis);
                if (!xaxis || !xaxis.range) return;
                var curr = Math.abs(xaxis.range[1] - xaxis.range[0]);
                if (!curr) return;
                if (!refSpan) refSpan = curr;
                var scale = refSpan / curr;
                var indices = [];
                var markerSizes = [];
                var textSizes = [];
                function pushForIndex(i) {
                    var t = fig.data[i];
                    if (!t || !t.meta || !t.meta.base_marker_size) return;
                    var base = t.meta.base_marker_size;
                    var baseText = t.meta.base_text_size || (t.textfont && t.textfont.size) || 12;
                    var newMarker = Math.max(2, Math.round(base * scale));
                    var newText = Math.max(8, Math.round(baseText * Math.sqrt(scale)));
                    indices.push(i);
                    markerSizes.push(newMarker);
                    textSizes.push(newText);
                }
                planetIdx.forEach(pushForIndex);
                bhIdx.forEach(pushForIndex);
                if (indices.length) {
                    Plotly.restyle(plotDiv, {'marker.size': [markerSizes], 'textfont.size': [textSizes]}, indices);
                }
            } catch (e) { console.error(e); }
        }
        // initial scale after plot settles
        setTimeout(rescaleMarkers, 250);
        plotDiv.on('plotly_relayout', rescaleMarkers);
    })();

  var ctrl = document.getElementById('object-buttons');

  // Helper: create and append a single button
function addButton(label, fn, header, color, isHidden) {
    if (isHidden && !isGM()) return;
    var btn = document.createElement('button');
    btn.textContent = label;
    if (header) {
      btn.className = 'header';     // section header style
      btn.onclick = null;           // no click action
    } else {
      btn.onclick = fn;             // bind the handler
      if (color) btn.style.backgroundColor = color;
    }
    ctrl.appendChild(btn);
  }
  
  function enterGMMode() {
    const pw = prompt("Enter ONI Auth Code: --We will store a cookie for the purpose of tracking if you have authenticated or not--");
    if (pw === "oni1") {
      document.cookie = "gmMode=1; path=/; max-age=31536000";
      location.reload();
    } else {
      alert("Incorrect password.");
    }
  }

  function isGM() {
    return document.cookie.split(';').some(c => c.trim() === 'gmMode=1');
  }

  function exitGMMode() {
    document.cookie = "gmMode=; path=/; expires=Thu, 01 Jan 1970 00:00:00 UTC;";
    location.reload();
  }

  function renderGMControls() {
    const div = document.getElementById('gm-controls');
    div.innerHTML = '';
    const btn = document.createElement('button');
    btn.style.width = '100%';
    if (isGM()) {
      btn.textContent = 'ONI Logout';
      btn.onclick = exitGMMode;
    } else {
      btn.textContent = 'ONI Login';
      btn.onclick = enterGMMode;
    }
    div.appendChild(btn);
  }

  renderGMControls();

  // ——— Populate the sidebar ———
  addButton('None', clearAnnotations, false, null);

  addButton('--- Gates ---', null, true, null);
  addButton('Acantha Gate',function(){highlight('Acantha Gate');},false,null,false)
    addButton('Erowis Gate',function(){highlight('Erowis Gate');},false,null,false)

  addButton('--- Nav Points/POI ---', null, true, null);
  

    addButton('--- Planets ---', null, true, null);
    addButton('Planet Yk'Anu',function(){highlight('Planet Yk'Anu');},false,null,false)

    addButton('--- Stations ---', null, true, null);
    addButton('Arshira',function(){highlight('Arshira');},false,'red',false)
    addButton('Edi Edi Base',function(){highlight('Edi Edi Base');},false,'red',false)
    addButton('Eshi Directorate',function(){highlight('Eshi Directorate');},false,'red',false)
    addButton('Hagma Base',function(){highlight('Hagma Base');},false,'red',false)
    addButton('Koth Processor',function(){highlight('Koth Processor');},false,'red',false)
    addButton('Kral Ta Minerals',function(){highlight('Kral Ta Minerals');},false,'red',false)
    addButton('N'Taira',function(){highlight('N'Taira');},false,'red',false)
    addButton('On Ansi Base',function(){highlight('On Ansi Base');},false,'red',false)
    addButton('Onshi Mining',function(){highlight('Onshi Mining');},false,'red',false)
    addButton('Ootath Base',function(){highlight('Ootath Base');},false,'red',false)
    addButton('Osca Base',function(){highlight('Osca Base');},false,'red',false)
    addButton('P'Gel Metals',function(){highlight('P'Gel Metals');},false,'red',false)
    addButton('Re'iya Base',function(){highlight('Re'iya Base');},false,'red',false)
    addButton('Turkeshi Mines',function(){highlight('Turkeshi Mines');},false,'red',false)
    addButton('Ungswor Base',function(){highlight('Ungswor Base');},false,'red',false)
    addButton('Uxa',function(){highlight('Uxa');},false,'red',false)
    addButton('Yi Pular'Mi',function(){highlight('Yi Pular'Mi');},false,'red',false)
    addButton('Zawpan Mining',function(){highlight('Zawpan Mining');},false,'red',false)
    addButton('Zol Quen Base',function(){highlight('Zol Quen Base');},false,'red',false)
    
  // Search filter
  document.getElementById('search-box').addEventListener('input', function() {
    const query = this.value.toLowerCase();
    const buttons = document.querySelectorAll('#object-buttons button');
    buttons.forEach(btn => {
      const label = btn.textContent.toLowerCase();
      const isHeader = btn.classList.contains('header');
      if (isHeader) {
        btn.style.display = ''; // always show section headers
      } else {
        btn.style.display = label.includes(query) ? '' : 'none';
      }
    });
  });
</script>
</body>
</html>