
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Loria.html</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        body { margin: 0; background: black; color: white; display: flex; height: 100vh; }
        /* === Description typography controls ===
           Tweak these two variables to change description sizes globally */
        :root {
            --desc-font-size: 130%;
            --hull-desc-font-size: 130%;
        }
        .desc-text { font-size: var(--desc-font-size); margin-top: 8px; }
        .hull-desc { font-size: var(--hull-desc-font-size); margin-top: 5px; color: #ccc; }
        #controls { flex: 1; min-width: 200px; max-width: 350px; overflow-y: auto; background: #333; padding: 10px; }
        #plot { flex: 3; min-width: 400px; }
        #info { flex: 1; min-width: 200px; background: #333; padding: 10px; overflow-y: auto; }
        h2.header { margin-top: 0; margin-bottom: 5px; text-align: center; }
        h3.subheader { margin-top: 0; margin-bottom: 15px; text-align: center; color: #ccc; }
        .alignment-image { display: block; max-width: 100%; height: auto; margin: 10px auto; }
        button { display: block; width: 100%; margin-bottom: 5px; background: #555; color: white; border: none; padding: 5px; text-align: left; cursor: pointer; font-size: 20px; }
        button.header { background: #444; cursor: default; font-size: 24px; }
    </style>
</head>
<body>
    <div id="controls">
        <div id="gm-controls" style="margin-bottom:10px;"></div>
        <h2 class="header">Loria</h2>
        <h3 class="subheader">Alignment: USFP</h3>
        <img src="Images/Factions/USFP.png" alt="Alignment Logo" class="alignment-image" onerror="this.style.display='none';">

        <input type="text" id="search-box" placeholder="Search objects..." style="width: 95%; padding: 6px; margin-bottom: 10px; font-size: 16px;">
        <div id="object-buttons">
    </div>
    </div>
    <div id="plot"></div>
    <div id="info">
        <img src="Images/Compass.png" alt="Compass" style="display:block; max-width:100%; height:auto; margin-bottom:10px;">
        <button id="galactic-map-btn" title="Back to Galactic Map">Show Galactic Map</button>
        Select an object
    </div>
<script>
    var objData = {"Planet Loria": {"type": "planet", "x": -8357.956994174048, "y": 58837.865884693405, "grid": "O11", "hidden": false}, "Mria Gate": {"type": "jumpnode", "x": -170890.98579675355, "y": 169894.89740512118, "grid": "U03", "hidden": false, "label": "Mria Gate", "destinations": {"Loria Gate": "Mria"}}, "Enyalius Gate": {"type": "jumpnode", "x": 171333.33333333337, "y": 51166.6666666667, "grid": "O20", "hidden": false, "label": "Enyalius Gate", "destinations": {"Loria Gate": "Enyalius"}}, "Vanir Gate": {"type": "jumpnode", "x": -114194.44444444442, "y": -135143.51851851854, "grid": "F06", "hidden": false, "label": "Vanir Gate", "destinations": {"Loria Gate": "Vanir"}}, "Vilnara Gate": {"type": "jumpnode", "x": 89333.33333333333, "y": -148500.0, "grid": "E16", "hidden": false, "label": "Vilnara Gate", "destinations": {"Emerald Jump Point": "Vilnara"}}, "WP 67": {"type": "platform", "x": -163612.95908595613, "y": 168230.29007526828, "grid": "U03", "hidden": false, "label": "WP 67"}, "WP 49": {"type": "platform", "x": -174374.04018377708, "y": 163193.68463765408, "grid": "U03", "hidden": false, "label": "WP 49"}, "WP 52": {"type": "platform", "x": -174822.66680291554, "y": 176652.4832118079, "grid": "U03", "hidden": false, "label": "WP 52"}, "WP 17": {"type": "platform", "x": -163831.31463402326, "y": 155679.18876708488, "grid": "T03", "hidden": false, "label": "WP 17"}, "WP 47": {"type": "platform", "x": -169887.77399239247, "y": 168465.04741253098, "grid": "U03", "hidden": false, "label": "WP 47"}, "Loria Command": {"type": "station", "x": 3721.0770223545746, "y": -8454.502137322947, "grid": "L12", "hidden": false, "label": "Loria Command", "hull": "starbase_command", "facilities": [], "sides": ["USFP"], "hullName": "Command Starbase", "hullImage": "Images/Ships/tsn-big-base256.png", "hullDescription": ""}, "WP 86": {"type": "platform", "x": 5142.408902181059, "y": -862.1492170170044, "grid": "L12", "hidden": false, "label": "WP 86"}, "WP 78": {"type": "platform", "x": -3740.3981567604596, "y": -11494.600090598518, "grid": "L11", "hidden": false, "label": "WP 78"}, "WP 41": {"type": "platform", "x": 9180.048474427203, "y": -13648.00786246313, "grid": "L12", "hidden": false, "label": "WP 41"}, "WP 25": {"type": "platform", "x": -7508.861757523528, "y": 1156.670569106068, "grid": "M11", "hidden": false, "label": "WP 25"}, "Ries": {"type": "station", "x": 13621.452003897963, "y": -17281.88347748466, "grid": "L12", "hidden": false, "label": "Ries", "hull": "starbase_command", "facilities": ["Refuel", "Docking", "Repair"], "sides": ["USFP"], "hullName": "Command Starbase", "hullImage": "Images/Ships/tsn-big-base256.png", "hullDescription": ""}, "Diana": {"type": "station", "x": -9931.445500871216, "y": -14051.771819687743, "grid": "L11", "hidden": false, "label": "Diana", "hull": "starbase_command", "facilities": ["Repair", "Refuel", "Docking"], "sides": ["USFP"], "hullName": "Command Starbase", "hullImage": "Images/Ships/tsn-big-base256.png", "hullDescription": ""}, "Ayana": {"type": "station", "x": 7026.640702562593, "y": 5059.722155610674, "grid": "M12", "hidden": false, "label": "Ayana", "hull": "starbase_command", "facilities": ["Repair", "Refuel", "Docking"], "sides": ["USFP"], "hullName": "Command Starbase", "hullImage": "Images/Ships/tsn-big-base256.png", "hullDescription": ""}, "SY 818": {"type": "station", "x": -3067.458228052769, "y": -2880.969003140077, "grid": "L11", "hidden": false, "label": "SY 818", "hull": "usfp_shipyard", "facilities": ["Repair"], "sides": ["USFP"], "hullName": "Ship Yard", "hullImage": "Images/Ships/TSN Mod/USFP/ShipYard256.png", "hullDescription": ""}, "Customs House": {"type": "station", "x": -140229.34373329795, "y": 140570.2443338944, "grid": "T04", "hidden": false, "label": "Customs House", "hull": "starbase_civil", "facilities": ["Refuel", "Docking"], "sides": ["USFP"], "hullName": "Civilian Starbase", "hullImage": "Images/Ships/civil_station256.png", "hullDescription": ""}, "WP 58": {"type": "platform", "x": -144203.3830051709, "y": 145548.97753580846, "grid": "T04", "hidden": false, "label": "WP 58"}, "Deserati": {"type": "station", "x": -252026.75346193791, "y": 93696.9267557498, "grid": "Q99", "hidden": false, "label": "Deserati", "hull": "usfp_industrial_storage", "facilities": [], "sides": ["USFP"], "hullName": "Storage Module", "hullImage": "Images/Ships/TSN Mod/USFP/IndustrialStorage256.png", "hullDescription": ""}, "Conduti": {"type": "station", "x": -266092.468482514, "y": 71593.66029484443, "grid": "P98", "hidden": false, "label": "Conduti", "hull": "usfp_industrial_assembly", "facilities": [], "sides": ["USFP"], "hullName": "Assembly Yard", "hullImage": "Images/Ships/TSN Mod/USFP/IndustrialAssembler256.png", "hullDescription": ""}, "Boruti": {"type": "station", "x": -289803.2452314852, "y": 55920.43498620246, "grid": "O97", "hidden": false, "label": "Boruti", "hull": "usfp_industrial_unit", "facilities": [], "sides": ["USFP"], "hullName": "Industrial Unit", "hullImage": "Images/Ships/TSN Mod/USFP/IndustrialUnit256.png", "hullDescription": ""}, "Santiago": {"type": "station", "x": -6200.009463309716, "y": 130506.78563777989, "grid": "S11", "hidden": false, "label": "Santiago", "hull": "starbase_industry", "facilities": [], "sides": ["USFP"], "hullName": "Industrial Starbase", "hullImage": "Images/Ships/industry_station256.png", "hullDescription": ""}, "Melnibo": {"type": "station", "x": -10218.785183474325, "y": 108738.41715355491, "grid": "R11", "hidden": false, "label": "Melnibo", "hull": "usfp_industrial_storage", "facilities": [], "sides": ["USFP"], "hullName": "Storage Module", "hullImage": "Images/Ships/TSN Mod/USFP/IndustrialStorage256.png", "hullDescription": ""}, "Orto": {"type": "station", "x": -15912.050787040856, "y": 147251.6844717991, "grid": "T11", "hidden": false, "label": "Orto", "hull": "starbase_industry", "facilities": ["Repair", "Refuel", "Docking"], "sides": ["USFP"], "hullName": "Industrial Starbase", "hullImage": "Images/Ships/industry_station256.png", "hullDescription": ""}, "Okogonik": {"type": "station", "x": 107995.74670952975, "y": 43508.97699580453, "grid": "O17", "hidden": false, "label": "Okogonik", "hull": "starbase_civil", "facilities": ["Docking", "Refuel", "Repair"], "sides": ["USFP"], "hullName": "Civilian Starbase", "hullImage": "Images/Ships/civil_station256.png", "hullDescription": ""}, "Immigration": {"type": "station", "x": 5357.012141628462, "y": 33131.23008222431, "grid": "N12", "hidden": false, "label": "Immigration", "hull": "starbase_civil", "facilities": [], "sides": ["USFP"], "hullName": "Civilian Starbase", "hullImage": "Images/Ships/civil_station256.png", "hullDescription": ""}, "Phineas Market": {"type": "station", "x": 4529.080042862972, "y": -78017.68967086212, "grid": "I12", "hidden": false, "label": "Phineas Market", "hull": "starbase_civil", "facilities": ["Refuel", "Docking"], "sides": ["USFP"], "hullName": "Civilian Starbase", "hullImage": "Images/Ships/civil_station256.png", "hullDescription": ""}, "Staunton Ops": {"type": "station", "x": -21415.36440158147, "y": -108212.13411530657, "grid": "G10", "hidden": false, "label": "Staunton Ops", "hull": "starbase_industry", "facilities": [], "sides": ["USFP"], "hullName": "Industrial Starbase", "hullImage": "Images/Ships/industry_station256.png", "hullDescription": ""}, "Oralon Ores": {"type": "station", "x": 14695.746709529643, "y": -113767.68967086214, "grid": "G12", "hidden": false, "label": "Oralon Ores", "hull": "usfp_industrial_refinary", "facilities": [], "sides": ["USFP"], "hullName": "Refinary Unit", "hullImage": "Images/Ships/TSN Mod/USFP/IndustrialRefinary256.png", "hullDescription": ""}, "Penton Processor": {"type": "station", "x": -8220.919957137025, "y": -131823.2452264177, "grid": "F11", "hidden": false, "label": "Penton Processor", "hull": "usfp_industrial_processor", "facilities": [], "sides": ["USFP"], "hullName": "Processor Unit", "hullImage": "Images/Ships/TSN Mod/USFP/IndustrialProcessor256.png", "hullDescription": ""}, "Anton Depot": {"type": "station", "x": -24193.14217935925, "y": -150573.2452264177, "grid": "E10", "hidden": false, "label": "Anton Depot", "hull": "usfp_industrial_storage", "facilities": [], "sides": ["USFP"], "hullName": "Storage Module", "hullImage": "Images/Ships/TSN Mod/USFP/IndustrialStorage256.png", "hullDescription": ""}, "Magellan Sciences": {"type": "station", "x": -122804.25329047037, "y": -25573.245226417683, "grid": "K05", "hidden": false, "label": "Magellan Sciences", "hull": "starbase_science", "facilities": [], "sides": ["USFP"], "hullName": "Science Starbase", "hullImage": "Images/Ships/science_station256.png", "hullDescription": ""}, "Puerto Piedra": {"type": "station", "x": -145720.91995713703, "y": -36684.35633752879, "grid": "K04", "hidden": false, "label": "Puerto Piedra", "hull": "starbase_civil", "facilities": [], "sides": ["USFP"], "hullName": "Civilian Starbase", "hullImage": "Images/Ships/civil_station256.png", "hullDescription": ""}, "Singh Research": {"type": "station", "x": 77195.74670952965, "y": 55676.754773582325, "grid": "O15", "hidden": false, "label": "Singh Research", "hull": "starbase_science", "facilities": [], "sides": ["USFP"], "hullName": "Science Starbase", "hullImage": "Images/Ships/science_station256.png", "hullDescription": ""}, "Rio Cantina": {"type": "station", "x": 83445.74670952965, "y": 30676.754773582325, "grid": "N16", "hidden": false, "label": "Rio Cantina", "hull": "starbase_civil", "facilities": [], "sides": ["USFP"], "hullName": "Civilian Starbase", "hullImage": "Images/Ships/civil_station256.png", "hullDescription": ""}, "Umber": {"type": "station", "x": -104290.36440158145, "y": -108989.91189308438, "grid": "G06", "hidden": false, "label": "Umber", "hull": "starbase_industry", "facilities": ["Refuel", "Repair"], "sides": ["USFP"], "hullName": "Industrial Starbase", "hullImage": "Images/Ships/industry_station256.png", "hullDescription": ""}, "Lorian Council": {"type": "station", "x": -30251.166870717276, "y": 41512.402921730456, "grid": "O10", "hidden": false, "label": "Lorian Council", "hull": "starbase_command", "facilities": [], "sides": ["USFP"], "hullName": "Command Starbase", "hullImage": "Images/Ships/tsn-big-base256.png", "hullDescription": ""}, "Arlin Labs": {"type": "station", "x": 151992.19732681353, "y": -69446.39337456586, "grid": "I19", "hidden": false, "label": "Arlin Labs", "hull": "starbase_science", "facilities": [], "sides": ["USFP"], "hullName": "Science Starbase", "hullImage": "Images/Ships/science_station256.png", "hullDescription": ""}, "Diatha Compound": {"type": "station", "x": 147192.19732681353, "y": -92246.39337456584, "grid": "H19", "hidden": false, "label": "Diatha Compound", "hull": "starbase_civil", "facilities": [], "sides": ["USFP"], "hullName": "Civilian Starbase", "hullImage": "Images/Ships/civil_station256.png", "hullDescription": ""}, "Sanda Trades": {"type": "station", "x": -88516.29032750745, "y": -84189.140288146, "grid": "H07", "hidden": false, "label": "Sanda Trades", "hull": "starbase_civil", "facilities": ["Refuel", "Docking", "Repair"], "sides": ["USFP"], "hullName": "Civilian Starbase", "hullImage": "Images/Ships/civil_station256.png", "hullDescription": ""}, "Chel Don": {"type": "station", "x": -224297.2009928021, "y": -36511.40657758356, "grid": "K00", "hidden": false, "label": "Chel Don", "hull": "starbase_industry", "facilities": ["Refuel", "Docking", "Repair"], "sides": ["USFP"], "hullName": "Industrial Starbase", "hullImage": "Images/Ships/industry_station256.png", "hullDescription": ""}, "Chel rea Processing": {"type": "station", "x": -223091.56827675272, "y": 3274.4730520460735, "grid": "M00", "hidden": false, "label": "Chel rea Processing", "hull": "usfp_industrial_processor", "facilities": [], "sides": ["USFP"], "hullName": "Processor Unit", "hullImage": "Images/Ships/TSN Mod/USFP/IndustrialProcessor256.png", "hullDescription": ""}, "Chel na Ores": {"type": "station", "x": -256447.40675411897, "y": -22847.56912902389, "grid": "K99", "hidden": false, "label": "Chel na Ores", "hull": "usfp_industrial_refinary", "facilities": [], "sides": ["USFP"], "hullName": "Refinary Unit", "hullImage": "Images/Ships/TSN Mod/USFP/IndustrialRefinary256.png", "hullDescription": ""}, "SR 56": {"type": "sensor_relay", "x": -115407.44644248861, "y": 105753.20558217958, "grid": "R06", "hidden": false, "label": "SR 56"}, "SR 55": {"type": "sensor_relay", "x": -90199.11310915528, "y": 73149.03891551291, "grid": "P07", "hidden": false, "label": "SR 55"}, "SR 15": {"type": "sensor_relay", "x": -64990.77977582195, "y": 40544.87224884625, "grid": "O08", "hidden": false, "label": "SR 15"}, "SR 50": {"type": "sensor_relay", "x": -39782.44644248861, "y": 7940.70558217958, "grid": "M10", "hidden": false, "label": "SR 50"}, "SR 94": {"type": "sensor_relay", "x": -14574.113109155267, "y": -24663.46108448709, "grid": "K11", "hidden": false, "label": "SR 94"}, "SR 74": {"type": "sensor_relay", "x": 35842.55355751139, "y": -89871.79441782043, "grid": "H13", "hidden": false, "label": "SR 74"}, "SR 41": {"type": "sensor_relay", "x": 61050.88689084473, "y": -122475.96108448709, "grid": "F15", "hidden": false, "label": "SR 41"}, "SR 88": {"type": "sensor_relay", "x": 139890.80458631797, "y": 21987.953524566517, "grid": "N18", "hidden": false, "label": "SR 88"}, "SR 65": {"type": "sensor_relay", "x": 103085.24903076241, "y": -928.7131421001468, "grid": "L17", "hidden": false, "label": "SR 65"}, "SR 63": {"type": "sensor_relay", "x": 66279.69347520685, "y": -23845.37980876681, "grid": "K15", "hidden": false, "label": "SR 63"}, "SR 79": {"type": "sensor_relay", "x": 29474.137919651286, "y": -46762.04647543348, "grid": "J13", "hidden": false, "label": "SR 79"}, "SR 12": {"type": "sensor_relay", "x": -7331.417635904276, "y": -69678.71314210014, "grid": "I11", "hidden": false, "label": "SR 12"}, "SR 48": {"type": "sensor_relay", "x": -44136.97319145984, "y": -92595.37980876683, "grid": "H09", "hidden": false, "label": "SR 48"}, "SR 58": {"type": "sensor_relay", "x": -80942.5287470154, "y": -115512.04647543348, "grid": "G07", "hidden": false, "label": "SR 58"}, "SR 86": {"type": "sensor_relay", "x": -160942.5287470154, "y": 120321.28685789986, "grid": "S03", "hidden": false, "label": "SR 86"}, "SR 69": {"type": "sensor_relay", "x": -153275.86208034874, "y": 76821.28685789986, "grid": "P04", "hidden": false, "label": "SR 69"}, "SR 35": {"type": "sensor_relay", "x": -145609.19541368206, "y": 33321.28685789986, "grid": "N04", "hidden": false, "label": "SR 35"}, "SR 75": {"type": "sensor_relay", "x": -137942.5287470154, "y": -10178.71314210014, "grid": "L05", "hidden": false, "label": "SR 75"}, "SR 76": {"type": "sensor_relay", "x": -130275.86208034874, "y": -53678.71314210014, "grid": "J05", "hidden": false, "label": "SR 76"}, "SR 97": {"type": "sensor_relay", "x": -122609.19541368207, "y": -97178.71314210014, "grid": "H05", "hidden": false, "label": "SR 97"}, "SR 14": {"type": "sensor_relay", "x": -100109.19541368206, "y": 141987.95352456652, "grid": "T06", "hidden": false, "label": "SR 14"}, "SR 32": {"type": "sensor_relay", "x": -62886.97319145984, "y": 130460.17574678874, "grid": "S08", "hidden": false, "label": "SR 32"}, "SR 22": {"type": "sensor_relay", "x": -25664.75096923762, "y": 118932.39796901097, "grid": "R10", "hidden": false, "label": "SR 22"}, "SR 98": {"type": "sensor_relay", "x": 11557.471252984615, "y": 107404.62019123319, "grid": "R12", "hidden": false, "label": "SR 98"}, "SR 19": {"type": "sensor_relay", "x": 48779.69347520682, "y": 95876.84241345542, "grid": "Q14", "hidden": false, "label": "SR 19"}, "SR 80": {"type": "sensor_relay", "x": 86001.91569742907, "y": 84349.06463567764, "grid": "Q16", "hidden": false, "label": "SR 80"}, "SR 37": {"type": "sensor_relay", "x": 123224.13791965129, "y": 72821.28685789986, "grid": "P18", "hidden": false, "label": "SR 37"}};
        console.log("[DEBUG JS] objData keys:", Object.keys(objData));
        console.log("[DEBUG JS] objData sample:", objData[Object.keys(objData)[0]]);

    function clearAnnotations() {
        Plotly.relayout('plot', {annotations: []});
        document.getElementById('info').innerHTML = getInfoHeader() + 'Select an object';
        document.getElementById('galactic-map-btn').addEventListener('click', function() {
            window.location.href = 'index.html';
        });
        document.getElementById('galactic-map-btn').addEventListener('click', function() {
            window.location.href = 'index.html';
        });
    }
    
    function getInfoHeader() {
    return '<img src="Images/Compass.png" alt="Compass" '
         + 'style="display:block; max-width:100%; height:auto; margin-bottom:10px;">'
         + '<button id="galactic-map-btn" title="Back to Galactic Map">Galactic Map</button>';
        }
    
    function highlight(name) {
        var obj = objData[name];
        if (obj.hidden && !isGM()) {
            alert("This object is not visible on the public map.");
            return;
        }
        var annotation = {
            x: obj.x, y: obj.y, xref: 'x', yref: 'y', text: name,
            showarrow: true, arrowcolor: 'yellow', arrowwidth: 2,
            arrowhead: 3, font: {color: 'yellow', size: 28}
        };

        Plotly.relayout('plot', {annotations: [annotation]});

        var label = obj.label || name;
        var infoHtml = '<span style="font-size:20pt;">' + label + '</span><br>';
        infoHtml += '<b>Location:</b> ' + obj.grid + '<br>';

        if (obj.type === 'station') {
            // Station selected: display detailed station info
            if (obj.hullImage) {
                infoHtml += '<img src="' + obj.hullImage + '" alt="Hull Art" style="max-width:48%; height:auto;">';
            }
            if (obj.sides && obj.sides.length > 0) {
                infoHtml += '<img src="Images/Factions/' + obj.sides[0] + '.png" alt="Faction Logo" style="max-width:48%; height:auto;">';
            }
            infoHtml += '<b>Facilities:</b> ' + (obj.facilities.length ? obj.facilities.join(', ') : 'None') + '<br>';
            if (obj.hullName && obj.hullImage) {
                infoHtml += '<b>General Class:</b> ' + obj.hullName + '<br>';
            }
            if (obj.hullDescription) {
                infoHtml += '<p class="hull-desc">' + obj.hullDescription + '</p>';
            }
        } 
        else if ((obj.type === 'jump_point' || obj.type === 'jumppoint' || obj.type === 'jumpnode') && obj.destinations && typeof obj.destinations === 'object') {
        
            // Generate a random 5-character alphanumeric serial
            const serial = Math.random().toString(36).substring(2, 7).toUpperCase();
            infoHtml += 'Oliver Class jump stabilisation node. Serial: ' + serial;
            infoHtml += '<br><br><b>Destinations:</b><br>';
            for (const [target, label] of Object.entries(obj.destinations)) {
                if (typeof target === 'string' && typeof label === 'string') {
                    let file = label + '.html';
                    // Correctly escape single quotes for JS string
                    infoHtml += `<button onclick="window.open('${file}', '_blank')">${label}, ${target}</button>`;
                }
            }
            }
        else if (obj.type === 'sensor_relay') {
            // Generate a random 5-character alphanumeric serial
            const serial = Math.random().toString(36).substring(2, 7).toUpperCase();
            infoHtml += 'Standard sensor and info relay buoy, Serial: ' + serial;
        }
        else if (obj.type === 'jumpnode' || obj.type === 'jumppoint') {
            // Generate a random 5-character alphanumeric serial
            const serial = Math.random().toString(36).substring(2, 7).toUpperCase();
            infoHtml += 'Oliver Class jump stabilisation node. Serial: ' + serial;
        }
        else if (obj.type === 'planet') {
            if (obj['class']) {
                infoHtml += '<b>Class:</b> ' + obj['class'] + '<br>';
            }
        }
        else {
            infoHtml += '<b>Type:</b> ' + obj.type;
        }

            // ——— append a description paragraph if one exists ———
            if (obj.description) {
                infoHtml += '<p class="desc-text">'
                          + obj.description
                          + '</p>';
            }
            document.getElementById('info').innerHTML = getInfoHeader() + infoHtml;
            document.getElementById('galactic-map-btn').addEventListener('click', function() {
                window.location.href = 'index.html';
            });
                + infoHtml;
         
    }
         document.getElementById('galactic-map-btn').addEventListener('click', function() {
        window.location.href = 'index.html';
    });
    

    var fig = {"data": [{"type": "scatter", "x": [-194484.93314684066, -258622.53314684064, -315771.76019678824, -251634.16019678826, -194484.93314684066], "y": [-62682.6823077216, 137890.11769227838, 119615.38520193713, -80957.41479806286, -62682.6823077216], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-293459.54667181446, -221459.54667181446, -253459.54667181446, -325459.54667181446, -293459.54667181446], "y": [9779.95144710778, 105779.95144710777, 129779.95144710777, 33779.95144710778, 9779.95144710778], "fill": "toself", "fillcolor": "rgba(165,42,42,0.4)", "line": {"shape": "spline", "color": "rgba(165,42,42,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-258622.01865885203, -187822.01865885203, -215097.0746847769, -285897.0746847769, -258622.01865885203], "y": [-57649.396784979166, 8350.603215020838, 37609.29967919474, -28390.700320805267, -57649.396784979166], "fill": "toself", "fillcolor": "rgba(165,42,42,0.4)", "line": {"shape": "spline", "color": "rgba(165,42,42,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-45809.48792182912, 52801.62318928201, 19682.40280865274, -78928.70830245838, -45809.48792182912], "y": [78860.65301759215, 144138.4307953699, 194169.59349802264, 128891.8157202449, 78860.65301759215], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-24285.959544648038, -12480.403989092485, 7186.652209249451, -4618.903346306104, -24285.959544648038], "y": [156920.2805051828, 93031.39161629393, 96665.52156598755, 160554.41045487643, 156920.2805051828], "fill": "toself", "fillcolor": "rgba(165,42,42,0.4)", "line": {"shape": "spline", "color": "rgba(165,42,42,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [25186.304596044298, 29352.971262710966, -30517.033399207237, -34683.700065873905, 25186.304596044298], "y": [-164352.53719939914, -101158.09275495466, -97210.61992010292, -160405.06436454738, -164352.53719939914], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-25387.586623803698, 51695.746709529645, 27695.746709529645, -49387.5866238037, -25387.586623803698], "y": [-178323.2452264177, -75545.46744863989, -57545.46744863989, -160323.2452264177, -178323.2452264177], "fill": "toself", "fillcolor": "rgba(165,42,42,0.4)", "line": {"shape": "spline", "color": "rgba(165,42,42,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-146968.62593809058, -97663.07038253504, -110445.4361984057, -159750.99175396128, -146968.62593809058], "y": [-54097.66307607999, -13125.440853857759, 2256.7281788001746, -38715.49404342205, -54097.66307607999], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-8357.956994174048], "y": [58837.865884693405], "mode": "markers+text", "marker": {"symbol": "circle", "size": 50, "color": "#98FB98"}, "text": ["Planet Loria"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "hovertext": ["Planet Loria [O11]"], "hoverinfo": "text", "meta": {"base_marker_size": 50, "base_text_size": 14}}, {"type": "scatter", "x": [130687.94763124811, 171487.9476312481, 137296.44702237897, 96496.44702237895, 130687.94763124811], "y": [-96625.95605940113, -29425.956059401142, -8666.830689730576, -75866.83068973056, -96625.95605940113], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-170890.98579675355], "y": [169894.89740512118], "mode": "markers+text", "marker": {"symbol": "circle-open", "size": 16, "color": "#50CC50", "line": {"color": "#50CC50", "width": 5}}, "hovertext": ["Mria Gate [U03]"], "hoverinfo": "text", "text": ["Mria Gate"], "textposition": "top center", "textfont": {"color": "#50CC50", "size": 20}, "meta": {"base_marker_size": 16, "base_text_size": 20}}, {"type": "scatter", "x": [171333.33333333337], "y": [51166.6666666667], "mode": "markers+text", "marker": {"symbol": "circle-open", "size": 16, "color": "#50CC50", "line": {"color": "#50CC50", "width": 5}}, "hovertext": ["Enyalius Gate [O20]"], "hoverinfo": "text", "text": ["Enyalius Gate"], "textposition": "top center", "textfont": {"color": "#50CC50", "size": 20}, "meta": {"base_marker_size": 16, "base_text_size": 20}}, {"type": "scatter", "x": [-114194.44444444442], "y": [-135143.51851851854], "mode": "markers+text", "marker": {"symbol": "circle-open", "size": 16, "color": "#50CC50", "line": {"color": "#50CC50", "width": 5}}, "hovertext": ["Vanir Gate [F06]"], "hoverinfo": "text", "text": ["Vanir Gate"], "textposition": "top center", "textfont": {"color": "#50CC50", "size": 20}, "meta": {"base_marker_size": 16, "base_text_size": 20}}, {"type": "scatter", "x": [89333.33333333333], "y": [-148500.0], "mode": "markers+text", "marker": {"symbol": "circle-open", "size": 16, "color": "#50CC50", "line": {"color": "#50CC50", "width": 5}}, "hovertext": ["Vilnara Gate [E16]"], "hoverinfo": "text", "text": ["Vilnara Gate"], "textposition": "top center", "textfont": {"color": "#50CC50", "size": 20}, "meta": {"base_marker_size": 16, "base_text_size": 20}}, {"type": "scatter", "x": [-163612.95908595613], "y": [168230.29007526828], "mode": "markers", "marker": {"symbol": "pentagon-open", "size": 3, "color": "orange"}, "hovertext": ["WP 67 [U03]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [-174374.04018377708], "y": [163193.68463765408], "mode": "markers", "marker": {"symbol": "pentagon-open", "size": 3, "color": "orange"}, "hovertext": ["WP 49 [U03]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [-174822.66680291554], "y": [176652.4832118079], "mode": "markers", "marker": {"symbol": "pentagon-open", "size": 3, "color": "orange"}, "hovertext": ["WP 52 [U03]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [-163831.31463402326], "y": [155679.18876708488], "mode": "markers", "marker": {"symbol": "pentagon-open", "size": 3, "color": "orange"}, "hovertext": ["WP 17 [T03]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [-169887.77399239247], "y": [168465.04741253098], "mode": "markers", "marker": {"symbol": "pentagon-open", "size": 3, "color": "orange"}, "hovertext": ["WP 47 [U03]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [3721.0770223545746], "y": [-8454.502137322947], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["Loria Command [L12]"], "hoverinfo": "text", "text": ["Loria Command"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [5142.408902181059], "y": [-862.1492170170044], "mode": "markers", "marker": {"symbol": "pentagon-open", "size": 3, "color": "orange"}, "hovertext": ["WP 86 [L12]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [-3740.3981567604596], "y": [-11494.600090598518], "mode": "markers", "marker": {"symbol": "pentagon-open", "size": 3, "color": "orange"}, "hovertext": ["WP 78 [L11]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [9180.048474427203], "y": [-13648.00786246313], "mode": "markers", "marker": {"symbol": "pentagon-open", "size": 3, "color": "orange"}, "hovertext": ["WP 41 [L12]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [-7508.861757523528], "y": [1156.670569106068], "mode": "markers", "marker": {"symbol": "pentagon-open", "size": 3, "color": "orange"}, "hovertext": ["WP 25 [M11]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [13621.452003897963], "y": [-17281.88347748466], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["Ries [L12]"], "hoverinfo": "text", "text": ["Ries"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [-9931.445500871216], "y": [-14051.771819687743], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["Diana [L11]"], "hoverinfo": "text", "text": ["Diana"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [7026.640702562593], "y": [5059.722155610674], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["Ayana [M12]"], "hoverinfo": "text", "text": ["Ayana"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [-3067.458228052769], "y": [-2880.969003140077], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["SY 818 [L11]"], "hoverinfo": "text", "text": ["SY 818"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [-140229.34373329795], "y": [140570.2443338944], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["Customs House [T04]"], "hoverinfo": "text", "text": ["Customs House"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [-144203.3830051709], "y": [145548.97753580846], "mode": "markers", "marker": {"symbol": "pentagon-open", "size": 3, "color": "orange"}, "hovertext": ["WP 58 [T04]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [-252026.75346193791], "y": [93696.9267557498], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["Deserati [Q99]"], "hoverinfo": "text", "text": ["Deserati"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [-266092.468482514], "y": [71593.66029484443], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["Conduti [P98]"], "hoverinfo": "text", "text": ["Conduti"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [-289803.2452314852], "y": [55920.43498620246], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["Boruti [O97]"], "hoverinfo": "text", "text": ["Boruti"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [-6200.009463309716], "y": [130506.78563777989], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["Santiago [S11]"], "hoverinfo": "text", "text": ["Santiago"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [-10218.785183474325], "y": [108738.41715355491], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["Melnibo [R11]"], "hoverinfo": "text", "text": ["Melnibo"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [-15912.050787040856], "y": [147251.6844717991], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["Orto [T11]"], "hoverinfo": "text", "text": ["Orto"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [107995.74670952975], "y": [43508.97699580453], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["Okogonik [O17]"], "hoverinfo": "text", "text": ["Okogonik"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [5357.012141628462], "y": [33131.23008222431], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["Immigration [N12]"], "hoverinfo": "text", "text": ["Immigration"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [4529.080042862972], "y": [-78017.68967086212], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["Phineas Market [I12]"], "hoverinfo": "text", "text": ["Phineas Market"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [-21415.36440158147], "y": [-108212.13411530657], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["Staunton Ops [G10]"], "hoverinfo": "text", "text": ["Staunton Ops"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [14695.746709529643], "y": [-113767.68967086214], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["Oralon Ores [G12]"], "hoverinfo": "text", "text": ["Oralon Ores"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [-8220.919957137025], "y": [-131823.2452264177], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["Penton Processor [F11]"], "hoverinfo": "text", "text": ["Penton Processor"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [-24193.14217935925], "y": [-150573.2452264177], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["Anton Depot [E10]"], "hoverinfo": "text", "text": ["Anton Depot"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [-122804.25329047037], "y": [-25573.245226417683], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["Magellan Sciences [K05]"], "hoverinfo": "text", "text": ["Magellan Sciences"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [-145720.91995713703], "y": [-36684.35633752879], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["Puerto Piedra [K04]"], "hoverinfo": "text", "text": ["Puerto Piedra"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [77195.74670952965], "y": [55676.754773582325], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["Singh Research [O15]"], "hoverinfo": "text", "text": ["Singh Research"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [83445.74670952965], "y": [30676.754773582325], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["Rio Cantina [N16]"], "hoverinfo": "text", "text": ["Rio Cantina"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [-104290.36440158145], "y": [-108989.91189308438], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["Umber [G06]"], "hoverinfo": "text", "text": ["Umber"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [-30251.166870717276], "y": [41512.402921730456], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["Lorian Council [O10]"], "hoverinfo": "text", "text": ["Lorian Council"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [151992.19732681353], "y": [-69446.39337456586], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["Arlin Labs [I19]"], "hoverinfo": "text", "text": ["Arlin Labs"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [147192.19732681353], "y": [-92246.39337456584], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["Diatha Compound [H19]"], "hoverinfo": "text", "text": ["Diatha Compound"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [-88516.29032750745], "y": [-84189.140288146], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["Sanda Trades [H07]"], "hoverinfo": "text", "text": ["Sanda Trades"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [-224297.2009928021], "y": [-36511.40657758356], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["Chel Don [K00]"], "hoverinfo": "text", "text": ["Chel Don"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [-223091.56827675272], "y": [3274.4730520460735], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["Chel rea Processing [M00]"], "hoverinfo": "text", "text": ["Chel rea Processing"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [-256447.40675411897], "y": [-22847.56912902389], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["Chel na Ores [K99]"], "hoverinfo": "text", "text": ["Chel na Ores"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [-115407.44644248861], "y": [105753.20558217958], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 56 [R06]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [-90199.11310915528], "y": [73149.03891551291], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 55 [P07]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [-64990.77977582195], "y": [40544.87224884625], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 15 [O08]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [-39782.44644248861], "y": [7940.70558217958], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 50 [M10]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [-14574.113109155267], "y": [-24663.46108448709], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 94 [K11]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [35842.55355751139], "y": [-89871.79441782043], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 74 [H13]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [61050.88689084473], "y": [-122475.96108448709], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 41 [F15]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [139890.80458631797], "y": [21987.953524566517], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 88 [N18]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [103085.24903076241], "y": [-928.7131421001468], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 65 [L17]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [66279.69347520685], "y": [-23845.37980876681], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 63 [K15]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [29474.137919651286], "y": [-46762.04647543348], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 79 [J13]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [-7331.417635904276], "y": [-69678.71314210014], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 12 [I11]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [-44136.97319145984], "y": [-92595.37980876683], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 48 [H09]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [-80942.5287470154], "y": [-115512.04647543348], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 58 [G07]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [-160942.5287470154], "y": [120321.28685789986], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 86 [S03]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [-153275.86208034874], "y": [76821.28685789986], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 69 [P04]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [-145609.19541368206], "y": [33321.28685789986], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 35 [N04]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [-137942.5287470154], "y": [-10178.71314210014], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 75 [L05]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [-130275.86208034874], "y": [-53678.71314210014], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 76 [J05]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [-122609.19541368207], "y": [-97178.71314210014], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 97 [H05]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [-100109.19541368206], "y": [141987.95352456652], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 14 [T06]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [-62886.97319145984], "y": [130460.17574678874], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 32 [S08]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [-25664.75096923762], "y": [118932.39796901097], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 22 [R10]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [11557.471252984615], "y": [107404.62019123319], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 98 [R12]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [48779.69347520682], "y": [95876.84241345542], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 19 [Q14]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [86001.91569742907], "y": [84349.06463567764], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 80 [Q16]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [123224.13791965129], "y": [72821.28685789986], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 37 [P18]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}], "layout": {"title": "Loria", "paper_bgcolor": "black", "plot_bgcolor": "black", "font": {"color": "white"}, "margin": {"l": 0, "r": 0, "t": 40, "b": 0}, "autosize": true, "dragmode": "pan", "hovermode": "closest", "xaxis": {"color": "white", "showgrid": true, "gridcolor": "gray", "dtick": 20000, "title": "X Axis"}, "yaxis": {"color": "white", "showgrid": true, "gridcolor": "gray", "dtick": 20000, "scaleanchor": "x", "scaleratio": 1, "title": "Z Axis"}, "shapes": []}};
    fig.layout.showlegend = false;
    fig.layout.dragmode = 'pan';
    fig.layout.title = 'Loria';
    if (!isGM()) {
        fig.data = fig.data.filter(t => !t.gmOnly);
        }
    Plotly.newPlot('plot', fig.data, fig.layout, {responsive: true, scrollZoom: true});
        console.log("[DEBUG JS] Plotted traces count:", fig.data.length);
        console.log("[DEBUG JS] fig.data sample:", fig.data.slice(0,3));

    var plotDiv = document.getElementById('plot');
    // Use Plotly's built-in nearest-point selection for accurate clicks
    plotDiv.on('plotly_click', function(ev) {
        if (!ev || !ev.points || !ev.points.length) return;
        var p = ev.points[0];
        var picked = null;
        // Prefer original name from hovertext: "Name [Grid]"
        if (p.hovertext && typeof p.hovertext === 'string') {
            picked = p.hovertext.split(' [')[0];
        } else if (p.text && typeof p.text === 'string') {
            // Fallback to text label (strip any ** used for GM marking)
            picked = p.text.replace(/\*/g, '');
        }
        if (picked && objData[picked]) {
            highlight(picked);
        }
    });

    // ——— Auto-scale markers based on current zoom/span (optimized: planets & blackholes only) ———
    (function() {
        var refSpan = null;
        var planetIdx = [8];
        var bhIdx = [];
        function rescaleMarkers() {
            try {
                var full = plotDiv._fullLayout || {};
                var xaxis = full.xaxis || (fig.layout && fig.layout.xaxis);
                if (!xaxis || !xaxis.range) return;
                var curr = Math.abs(xaxis.range[1] - xaxis.range[0]);
                if (!curr) return;
                if (!refSpan) refSpan = curr;
                var scale = refSpan / curr;
                var indices = [];
                var markerSizes = [];
                var textSizes = [];
                function pushForIndex(i) {
                    var t = fig.data[i];
                    if (!t || !t.meta || !t.meta.base_marker_size) return;
                    var base = t.meta.base_marker_size;
                    var baseText = t.meta.base_text_size || (t.textfont && t.textfont.size) || 12;
                    var newMarker = Math.max(2, Math.round(base * scale));
                    var newText = Math.max(8, Math.round(baseText * Math.sqrt(scale)));
                    indices.push(i);
                    markerSizes.push(newMarker);
                    textSizes.push(newText);
                }
                planetIdx.forEach(pushForIndex);
                bhIdx.forEach(pushForIndex);
                if (indices.length) {
                    Plotly.restyle(plotDiv, {'marker.size': [markerSizes], 'textfont.size': [textSizes]}, indices);
                }
            } catch (e) { console.error(e); }
        }
        // initial scale after plot settles
        setTimeout(rescaleMarkers, 250);
        plotDiv.on('plotly_relayout', rescaleMarkers);
    })();

  var ctrl = document.getElementById('object-buttons');

  // Helper: create and append a single button
function addButton(label, fn, header, color, isHidden) {
    if (isHidden && !isGM()) return;
    var btn = document.createElement('button');
    btn.textContent = label;
    if (header) {
      btn.className = 'header';     // section header style
      btn.onclick = null;           // no click action
    } else {
      btn.onclick = fn;             // bind the handler
      if (color) btn.style.backgroundColor = color;
    }
    ctrl.appendChild(btn);
  }
  
  function enterGMMode() {
    const pw = prompt("Enter ONI Auth Code: --We will store a cookie for the purpose of tracking if you have authenticated or not--");
    if (pw === "oni1") {
      document.cookie = "gmMode=1; path=/; max-age=31536000";
      location.reload();
    } else {
      alert("Incorrect password.");
    }
  }

  function isGM() {
    return document.cookie.split(';').some(c => c.trim() === 'gmMode=1');
  }

  function exitGMMode() {
    document.cookie = "gmMode=; path=/; expires=Thu, 01 Jan 1970 00:00:00 UTC;";
    location.reload();
  }

  function renderGMControls() {
    const div = document.getElementById('gm-controls');
    div.innerHTML = '';
    const btn = document.createElement('button');
    btn.style.width = '100%';
    if (isGM()) {
      btn.textContent = 'ONI Logout';
      btn.onclick = exitGMMode;
    } else {
      btn.textContent = 'ONI Login';
      btn.onclick = enterGMMode;
    }
    div.appendChild(btn);
  }

  renderGMControls();

  // ——— Populate the sidebar ———
  addButton('None', clearAnnotations, false, null);

  addButton('--- Gates ---', null, true, null);
  addButton('Enyalius Gate',function(){highlight('Enyalius Gate');},false,null,false)
    addButton('Mria Gate',function(){highlight('Mria Gate');},false,null,false)
    addButton('Vanir Gate',function(){highlight('Vanir Gate');},false,null,false)
    addButton('Vilnara Gate',function(){highlight('Vilnara Gate');},false,null,false)

  addButton('--- Nav Points/POI ---', null, true, null);
  

    addButton('--- Planets ---', null, true, null);
    addButton('Planet Loria',function(){highlight('Planet Loria');},false,null,false)

    addButton('--- Stations ---', null, true, null);
    addButton('Anton Depot',function(){highlight('Anton Depot');},false,'blue',false)
    addButton('Arlin Labs',function(){highlight('Arlin Labs');},false,'blue',false)
    addButton('Ayana',function(){highlight('Ayana');},false,'blue',false)
    addButton('Boruti',function(){highlight('Boruti');},false,'blue',false)
    addButton('Chel Don',function(){highlight('Chel Don');},false,'blue',false)
    addButton('Chel na Ores',function(){highlight('Chel na Ores');},false,'blue',false)
    addButton('Chel rea Processing',function(){highlight('Chel rea Processing');},false,'blue',false)
    addButton('Conduti',function(){highlight('Conduti');},false,'blue',false)
    addButton('Customs House',function(){highlight('Customs House');},false,'blue',false)
    addButton('Deserati',function(){highlight('Deserati');},false,'blue',false)
    addButton('Diana',function(){highlight('Diana');},false,'blue',false)
    addButton('Diatha Compound',function(){highlight('Diatha Compound');},false,'blue',false)
    addButton('Immigration',function(){highlight('Immigration');},false,'blue',false)
    addButton('Loria Command',function(){highlight('Loria Command');},false,'blue',false)
    addButton('Lorian Council',function(){highlight('Lorian Council');},false,'blue',false)
    addButton('Magellan Sciences',function(){highlight('Magellan Sciences');},false,'blue',false)
    addButton('Melnibo',function(){highlight('Melnibo');},false,'blue',false)
    addButton('Okogonik',function(){highlight('Okogonik');},false,'blue',false)
    addButton('Oralon Ores',function(){highlight('Oralon Ores');},false,'blue',false)
    addButton('Orto',function(){highlight('Orto');},false,'blue',false)
    addButton('Penton Processor',function(){highlight('Penton Processor');},false,'blue',false)
    addButton('Phineas Market',function(){highlight('Phineas Market');},false,'blue',false)
    addButton('Puerto Piedra',function(){highlight('Puerto Piedra');},false,'blue',false)
    addButton('Ries',function(){highlight('Ries');},false,'blue',false)
    addButton('Rio Cantina',function(){highlight('Rio Cantina');},false,'blue',false)
    addButton('SY 818',function(){highlight('SY 818');},false,'blue',false)
    addButton('Sanda Trades',function(){highlight('Sanda Trades');},false,'blue',false)
    addButton('Santiago',function(){highlight('Santiago');},false,'blue',false)
    addButton('Singh Research',function(){highlight('Singh Research');},false,'blue',false)
    addButton('Staunton Ops',function(){highlight('Staunton Ops');},false,'blue',false)
    addButton('Umber',function(){highlight('Umber');},false,'blue',false)
    
  // Search filter
  document.getElementById('search-box').addEventListener('input', function() {
    const query = this.value.toLowerCase();
    const buttons = document.querySelectorAll('#object-buttons button');
    buttons.forEach(btn => {
      const label = btn.textContent.toLowerCase();
      const isHeader = btn.classList.contains('header');
      if (isHeader) {
        btn.style.display = ''; // always show section headers
      } else {
        btn.style.display = label.includes(query) ? '' : 'none';
      }
    });
  });
</script>
</body>
</html>