
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Danae.html</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        body { margin: 0; background: black; color: white; display: flex; height: 100vh; }
        #controls { flex: 1; min-width: 200px; max-width: 350px; overflow-y: auto; background: #333; padding: 10px; }
        #plot { flex: 3; min-width: 400px; }
        #info { flex: 1; min-width: 200px; background: #333; padding: 10px; overflow-y: auto; }
        h2.header { margin-top: 0; margin-bottom: 5px; text-align: center; }
        h3.subheader { margin-top: 0; margin-bottom: 15px; text-align: center; color: #ccc; }
        .alignment-image { display: block; max-width: 100%; height: auto; margin: 10px auto; }
        button { display: block; width: 100%; margin-bottom: 5px; background: #555; color: white; border: none; padding: 5px; text-align: left; cursor: pointer; font-size: 20px; }
        button.header { background: #444; cursor: default; font-size: 24px; }
    </style>
</head>
<body>
    <div id="controls">
        <h2 class="header">Danae</h2>
        <h3 class="subheader">Alignment: USFP</h3>
        <img src="Images/Factions/USFP.png" alt="Alignment Logo" class="alignment-image" onerror="this.style.display='none';">
    </div>
    <div id="plot"></div>
    <div id="info">
        <img src="Images/Compass.png" alt="Compass" style="display:block; max-width:100%; height:auto; margin-bottom:10px;">
        <button id="galactic-map-btn" title="Back to Galactic Map">Show Galactic Map</button>
        Select an object
    </div>
<script>
    var objData = {"1750621784903": {"type": "blackhole", "x": -281443.23852662864, "y": -108522.65419835765, "grid": "G97"}, "Long Bar Gate": {"type": "jumpnode", "x": -154811.4839587275, "y": 15618.027530037678, "grid": "M04", "destinations": {"Gate X323": "Euphinie"}}, "Egan Gate": {"type": "jumpnode", "x": 227688.51604127252, "y": 8951.360863371012, "grid": "M23", "destinations": {"Rose Gate": "Waypoint 60"}}, "JPL RS32": {"type": "station", "x": -127311.4839587275, "y": -5215.305803295657, "grid": "L05", "description": "Jump Physics Lab, Reaserch post 32.\nJPL are a key organisation in reasearching Jump Gates, Slingshots and other theoretical and pratical forms of travel. This outpost is studying the Long Bar Jump Point", "hull": "starbase_science", "facilities": [], "sides": ["USFP"], "hullName": "Science Starbase", "hullImage": "Images/Ships/science_station256.png", "hullDescription": ""}, "Danae Command": {"type": "station", "x": -14138.181489591647, "y": 102210.31148065487, "grid": "R11", "description": "Dannae Command Base for TSN and local Security Operations", "hull": "starbase_command", "facilities": ["Docking", "Refuel", "Repair"], "sides": ["TSN"], "hullName": "Command Starbase", "hullImage": "Images/Ships/tsn-big-base256.png", "hullDescription": ""}, "M 119": {"type": "station", "x": 7898.948140038152, "y": -219251.01567983907, "grid": "B12", "hull": "starbase_industry", "facilities": ["Docking", "Refuel"], "sides": ["USFP"], "hullName": "Industrial Starbase", "hullImage": "Images/Ships/industry_station256.png", "hullDescription": ""}, "M 141": {"type": "station", "x": -43941.05185996185, "y": -184691.01567983907, "grid": "C09", "hull": "starbase_industry", "facilities": ["Docking", "Refuel"], "sides": ["USFP"], "hullName": "Industrial Starbase", "hullImage": "Images/Ships/industry_station256.png", "hullDescription": ""}, "M 351": {"type": "station", "x": -212158.82963773963, "y": 218862.31765349425, "grid": "W01", "hull": "starbase_industry", "facilities": ["Docking", "Refuel"], "sides": ["USFP"], "hullName": "Industrial Starbase", "hullImage": "Images/Ships/industry_station256.png", "hullDescription": ""}, "M 762": {"type": "station", "x": -257992.162971073, "y": 186917.87320904975, "grid": "V99", "hull": "starbase_industry", "facilities": ["Docking", "Refuel"], "sides": ["USFP"], "hullName": "Industrial Starbase", "hullImage": "Images/Ships/industry_station256.png", "hullDescription": ""}, "M 521": {"type": "station", "x": 278618.9481400382, "y": -230771.01567983907, "grid": "A25", "hull": "starbase_industry", "facilities": ["Docking", "Refuel"], "sides": ["USFP"], "hullName": "Industrial Starbase", "hullImage": "Images/Ships/industry_station256.png", "hullDescription": ""}, "JP 59": {"type": "jumpnode", "x": 66822.60485262159, "y": 314968.07687277545, "grid": "B15"}, "WP 84": {"type": "platform", "x": -13055.5153543353, "y": 101160.80782049778, "grid": "R11"}, "WP 34": {"type": "platform", "x": -12824.785684835231, "y": 103403.1301987727, "grid": "R11"}, "WP 6": {"type": "platform", "x": -15687.879885208647, "y": 100977.98099321054, "grid": "R11"}, "WP 46": {"type": "platform", "x": -25164.078726964326, "y": 98706.28949004994, "grid": "Q10"}, "WP 56": {"type": "platform", "x": 4609.047621910482, "y": 116930.93587226534, "grid": "R12"}, "WP 44": {"type": "platform", "x": -15394.659542909045, "y": 103576.04939013207, "grid": "R11"}, "WP 31": {"type": "platform", "x": -13854.849849128143, "y": 101515.24251935835, "grid": "R11"}, "WP 11": {"type": "platform", "x": -144322.81897111176, "y": 16944.605265264396, "grid": "M04"}, "WP 35": {"type": "platform", "x": -145528.50301004635, "y": 21480.718858775497, "grid": "N04"}, "WP 18": {"type": "platform", "x": -144911.64140873097, "y": 19393.35889472849, "grid": "M04"}, "SM Baker": {"type": "station", "x": -44777.63319244611, "y": -187901.2058914671, "grid": "C09", "hull": "usfp_industrial_storage", "facilities": [], "sides": ["USFP"], "hullName": "Storage Module", "hullImage": "Images/Ships/TSN Mod/USFP/IndustrialStorage256.png", "hullDescription": ""}, "SM Hoopla": {"type": "station", "x": 8115.445203978383, "y": -222221.14225555933, "grid": "A12", "hull": "usfp_industrial_storage", "facilities": ["Docking"], "sides": ["USFP"], "hullName": "Storage Module", "hullImage": "Images/Ships/TSN Mod/USFP/IndustrialStorage256.png", "hullDescription": ""}, "DS 29": {"type": "station", "x": 122844.52613676304, "y": -64058.94799012408, "grid": "I18", "hull": "starbase_civil", "facilities": ["Docking"], "sides": ["USFP"], "hullName": "Civilian Starbase", "hullImage": "Images/Ships/civil_station256.png", "hullDescription": ""}, "DS 80": {"type": "station", "x": 108778.81111618692, "y": -52337.51880631063, "grid": "J17", "hull": "starbase_civil", "facilities": ["Docking", "Refuel"], "sides": ["USFP"], "hullName": "Civilian Starbase", "hullImage": "Images/Ships/civil_station256.png", "hullDescription": ""}, "DS 68": {"type": "station", "x": -241342.2879921808, "y": 234573.59659149463, "grid": "X99", "hull": "starbase_civil", "facilities": [], "sides": ["USFP"], "hullName": "Civilian Starbase", "hullImage": "Images/Ships/civil_station256.png", "hullDescription": ""}, "USFP Inspections 23": {"type": "station", "x": -136087.46560255002, "y": 24472.45302138825, "grid": "N05", "hull": "starbase_command", "facilities": ["Docking", "Refuel", "Repair"], "sides": ["USFP"], "hullName": "Command Starbase", "hullImage": "Images/Ships/tsn-big-base256.png", "hullDescription": ""}, "SR 28": {"type": "sensor_relay", "x": 239356.76147337133, "y": 4277.345801642345, "grid": "M23"}, "SR 81": {"type": "sensor_relay", "x": 199856.76147337133, "y": 22477.34580164234, "grid": "N21"}, "SR 92": {"type": "sensor_relay", "x": 160356.76147337133, "y": 40677.34580164234, "grid": "O20"}, "SR 95": {"type": "sensor_relay", "x": 120856.76147337133, "y": 58877.34580164234, "grid": "O18"}, "SR 22": {"type": "sensor_relay", "x": 81356.76147337133, "y": 77077.34580164232, "grid": "P16"}, "SR 96": {"type": "sensor_relay", "x": 41856.76147337133, "y": 95277.34580164232, "grid": "Q14"}, "SR 23": {"type": "sensor_relay", "x": 2356.761473371327, "y": 113477.34580164232, "grid": "R12"}, "SR 88": {"type": "sensor_relay", "x": -37143.23852662867, "y": 131677.34580164234, "grid": "S10"}, "SR 30": {"type": "sensor_relay", "x": -76643.23852662867, "y": 149877.34580164234, "grid": "T08"}, "SR 51": {"type": "sensor_relay", "x": -116143.23852662867, "y": 168077.34580164234, "grid": "U06"}, "SR 99": {"type": "sensor_relay", "x": -155643.23852662867, "y": 186277.34580164234, "grid": "V04"}, "SR 40": {"type": "sensor_relay", "x": -195143.23852662867, "y": 204477.34580164234, "grid": "W02"}, "SR 69": {"type": "sensor_relay", "x": -234643.2385266287, "y": 222677.34580164234, "grid": "X00"}, "SR 75": {"type": "sensor_relay", "x": 235756.76147337133, "y": 25877.345801642343, "grid": "N23"}, "SR 37": {"type": "sensor_relay", "x": 203090.09480670467, "y": 2544.0124683090107, "grid": "M22"}, "SR 61": {"type": "sensor_relay", "x": 170423.42814003798, "y": -20789.32086502432, "grid": "K20"}, "SR 20": {"type": "sensor_relay", "x": 137756.76147337133, "y": -44122.65419835766, "grid": "J18"}, "SR 39": {"type": "sensor_relay", "x": 105090.09480670467, "y": -67455.98753169099, "grid": "I17"}, "SR 87": {"type": "sensor_relay", "x": 72423.42814003798, "y": -90789.32086502433, "grid": "H15"}, "SR 73": {"type": "sensor_relay", "x": 39756.76147337133, "y": -114122.65419835766, "grid": "G13"}, "SR 32": {"type": "sensor_relay", "x": 7090.09480670467, "y": -137455.98753169097, "grid": "F12"}, "SR 57": {"type": "sensor_relay", "x": -25576.571859961987, "y": -160789.3208650243, "grid": "D10"}, "SR 50": {"type": "sensor_relay", "x": -58243.23852662867, "y": -184122.65419835766, "grid": "C09"}, "SR 78": {"type": "sensor_relay", "x": 289756.7614733713, "y": -230922.65419835766, "grid": "A26"}, "SR 19": {"type": "sensor_relay", "x": 278556.7614733713, "y": -188122.65419835766, "grid": "C25"}, "SR 34": {"type": "sensor_relay", "x": 267356.7614733713, "y": -145322.65419835766, "grid": "E25"}, "SR 10": {"type": "sensor_relay", "x": 256156.7614733713, "y": -102522.65419835765, "grid": "G24"}, "SR 98": {"type": "sensor_relay", "x": 244956.76147337133, "y": -59722.654198357646, "grid": "J24"}, "SR 55": {"type": "sensor_relay", "x": 233756.76147337133, "y": -16922.654198357646, "grid": "L23"}, "SR 97": {"type": "sensor_relay", "x": 222556.76147337133, "y": 25877.345801642354, "grid": "N23"}, "SR 13": {"type": "sensor_relay", "x": -93643.23852662867, "y": 5477.345801642345, "grid": "M07"}, "SR 17": {"type": "sensor_relay", "x": -110586.19744298566, "y": 40659.76251270369, "grid": "O06"}, "SR 91": {"type": "sensor_relay", "x": -148656.68055466283, "y": 49349.10184982441, "grid": "O04"}, "SR 56": {"type": "sensor_relay", "x": -179186.83758223752, "y": 25002.114061932465, "grid": "N03"}, "SR 68": {"type": "sensor_relay", "x": -179186.83758223752, "y": -14047.422458647767, "grid": "L03"}, "SR 72": {"type": "sensor_relay", "x": -148656.68055466283, "y": -38394.410246539715, "grid": "K04"}, "SR 89": {"type": "sensor_relay", "x": -110586.19744298566, "y": -29705.070909419002, "grid": "K06"}, "SR 24": {"type": "sensor_relay", "x": -23426.57185996201, "y": 99369.01246830903, "grid": "Q10"}, "SR 65": {"type": "sensor_relay", "x": -54676.571859962016, "y": 77494.01246830903, "grid": "P09"}, "SR 49": {"type": "sensor_relay", "x": -85926.57185996202, "y": 55619.012468309025, "grid": "O07"}, "LB Border Region": {"type": "sensor_relay", "x": -138643.23852662867, "y": 5477.345801642345, "grid": "M05"}};
        console.log("[DEBUG JS] objData keys:", Object.keys(objData));
        console.log("[DEBUG JS] objData sample:", objData[Object.keys(objData)[0]]);

    function clearAnnotations() {
        Plotly.relayout('plot', {annotations: []});
        document.getElementById('info').innerHTML = getInfoHeader() + 'Select an object';
        document.getElementById('galactic-map-btn').addEventListener('click', function() {
            window.location.href = 'index.html';
        });
        document.getElementById('galactic-map-btn').addEventListener('click', function() {
            window.location.href = 'index.html';
        });
    }
    
    function getInfoHeader() {
    return '<img src="Images/Compass.png" alt="Compass" '
         + 'style="display:block; max-width:100%; height:auto; margin-bottom:10px;">'
         + '<button id="galactic-map-btn" title="Back to Galactic Map">Galactic Map</button>';
        }
    
    function highlight(name) {
        var obj = objData[name];
        var annotation = {
            x: obj.x, y: obj.y, xref: 'x', yref: 'y', text: name,
            showarrow: true, arrowcolor: 'yellow', arrowwidth: 2,
            arrowhead: 3, font: {color: 'yellow', size: 28}
        };

        Plotly.relayout('plot', {annotations: [annotation]});

        var infoHtml = '<span style="font-size:20pt;">' + name + '</span><br>';
        infoHtml += '<b>Location:</b> ' + obj.grid + '<br>';

        if (obj.type === 'station') {
            // Station selected: display detailed station info
            if (obj.hullImage) {
                infoHtml += '<img src="' + obj.hullImage + '" alt="Hull Art" style="max-width:48%; height:auto;">';
            }
            if (obj.sides && obj.sides.length > 0) {
                infoHtml += '<img src="Images/Factions/' + obj.sides[0] + '.png" alt="Faction Logo" style="max-width:48%; height:auto;">';
            }
            infoHtml += '<b>Facilities:</b> ' + (obj.facilities.length ? obj.facilities.join(', ') : 'None') + '<br>';
            if (obj.hullName && obj.hullImage) {
                infoHtml += '<b>General Class:</b> ' + obj.hullName + '<br>';
            }
            if (obj.hullDescription) {
                infoHtml += '<p style="margin-top:5px; font-size:90%; color:#ccc;">' + obj.hullDescription + '</p>';
            }
        } else if ((obj.type === 'jump_point' || obj.type === 'jumppoint' || obj.type === 'jumpnode') && obj.destinations && typeof obj.destinations === 'object') {
            infoHtml += '<b>Type:</b> ' + obj.type + '<br>';
            infoHtml += '<b>Destinations:</b><br>';
            for (const [target, label] of Object.entries(obj.destinations)) {
                if (typeof target === 'string' && typeof label === 'string') {
                    let file = label + '.html';
                    // Correctly escape single quotes for JS string
                    infoHtml += `<button onclick="window.open('${file}', '_blank')">${label}, ${target}</button>`;
                }
            }
            }
        else {
            infoHtml += '<b>Type:</b> ' + obj.type;
        }

            // ——— append a description paragraph if one exists ———
            if (obj.description) {
                infoHtml += '<p style="font-size:90%; margin-top:8px;">'
                          + obj.description
                          + '</p>';
            }
            document.getElementById('info').innerHTML = getInfoHeader() + infoHtml;
            document.getElementById('galactic-map-btn').addEventListener('click', function() {
                window.location.href = 'index.html';
            });
                + infoHtml;
         
    }
         document.getElementById('galactic-map-btn').addEventListener('click', function() {
        window.location.href = 'index.html';
    });
    

    var fig = {"data": [{"type": "scatter", "x": [382097.30689129827, -257262.6931087018, -259739.41061122192, 379620.5893887781, 382097.30689129827], "y": [-386706.3533562505, -370866.3533562505, -470835.67800342775, -486675.67800342775, -386706.3533562505], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-172755.0575471476, -237555.0575471476, -230487.04617277606, -165687.04617277606, -172755.0575471476], "y": [-412936.2947431709, -437416.2947431709, -456125.73661650735, -431645.73661650735, -412936.2947431709], "fill": "toself", "fillcolor": "rgba(165,42,42,0.4)", "line": {"shape": "spline", "color": "rgba(165,42,42,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [44115.00890171671, 34035.00890171671, 53762.887378359585, 63842.887378359585, 44115.00890171671], "y": [-394727.02580678556, -455207.02580678556, -458495.0055528927, -398015.0055528927, -394727.02580678556], "fill": "toself", "fillcolor": "rgba(165,42,42,0.4)", "line": {"shape": "spline", "color": "rgba(165,42,42,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [250064.41625414745, 260144.41625414745, 279813.48002592893, 269733.48002592893, 250064.41625414745], "y": [-408262.6399746085, -462982.6399746085, -459359.39138506976, -404639.39138506976, -408262.6399746085], "fill": "toself", "fillcolor": "rgba(165,42,42,0.4)", "line": {"shape": "spline", "color": "rgba(165,42,42,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [170.82121407341765, -61502.51211925997, -43659.591600663734, 18013.741732669652, 170.82121407341765], "y": [-167323.62162481272, -212952.5105137016, -237069.52084597654, -191440.63195708767, -167323.62162481272], "fill": "toself", "fillcolor": "rgba(165,42,42,0.4)", "line": {"shape": "spline", "color": "rgba(165,42,42,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-42960.68172841024, -8932.90395063246, 7673.022452931093, -26354.755324846687, -42960.68172841024], "y": [-139122.01533278546, -189816.4597772299, -178670.01602689273, -127975.57158244829, -139122.01533278546], "fill": "toself", "fillcolor": "rgba(165,42,42,0.4)", "line": {"shape": "spline", "color": "rgba(165,42,42,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-46670.33408610616, 24162.99924722718, 28743.78592173813, -42089.54741159521, -46670.33408610616], "y": [-232866.29847428596, -249532.96514095264, -230064.6217742811, -213397.95510761443, -232866.29847428596], "fill": "toself", "fillcolor": "rgba(165,42,42,0.4)", "line": {"shape": "spline", "color": "rgba(165,42,42,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-46083.08360103876, 10166.916398961246, 13573.202103337386, -42676.79789666261, -46083.08360103876], "y": [-157986.02472146685, -167708.2469436891, -148000.45108265578, -138278.22886043353, -157986.02472146685], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [272101.7504917691, 247796.19493621355, 246371.25393645535, 270676.8094920109, 272101.7504917691], "y": [-233385.90423708732, -231649.7931259762, -251598.9671225909, -253335.07823370202, -233385.90423708732], "fill": "toself", "fillcolor": "rgba(165,42,42,0.4)", "line": {"shape": "spline", "color": "rgba(165,42,42,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [290973.08467975835, 266667.52912420285, 263379.5493780957, 287685.1049336512, 290973.08467975835], "y": [-235811.366811888, -231760.4408859621, -251488.319362605, -255539.2452885309, -235811.366811888], "fill": "toself", "fillcolor": "rgba(165,42,42,0.4)", "line": {"shape": "spline", "color": "rgba(165,42,42,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [309019.5998835604, 289343.67395763454, 274268.21935947886, 293944.1452854047, 309019.5998835604], "y": [-261673.39849032968, -239103.95404588518, -252246.6580545337, -274816.1024989782, -261673.39849032968], "fill": "toself", "fillcolor": "rgba(165,42,42,0.4)", "line": {"shape": "spline", "color": "rgba(165,42,42,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [305694.8355474456, 305694.8355474456, 285694.8355474456, 285694.8355474456, 305694.8355474456], "y": [-298337.3430872465, -265929.9356798391, -265929.9356798391, -298337.3430872465, -298337.3430872465], "fill": "toself", "fillcolor": "rgba(165,42,42,0.4)", "line": {"shape": "spline", "color": "rgba(165,42,42,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [278659.41151738813, 268821.4485544252, 254281.18550342883, 264119.1484663918, 278659.41151738813], "y": [-269480.36701686867, -259063.70035020195, -272796.1710094763, -283212.83767614304, -269480.36701686867], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [300135.58784633933, 161204.3878463393, 145568.86843373705, 284500.06843373703, 300135.58784633933], "y": [15079.873186430134, 189262.27318643013, 176791.08508352117, 2608.6850835211844, 15079.873186430134], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [279224.7645294581, 192133.5645294581, 189289.29175061823, 276380.49175061815, 279224.7645294581], "y": [96352.71122388492, 104647.11122388492, 74782.24704606636, 66487.84704606637, 96352.71122388492], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-204270.4108113744, -166270.4108113744, -182524.33290854926, -220524.33290854926, -204270.4108113744], "y": [159078.2014020262, 212078.2014020262, 223731.95686792515, 170731.95686792515, 159078.2014020262], "fill": "toself", "fillcolor": "rgba(165,42,42,0.4)", "line": {"shape": "spline", "color": "rgba(165,42,42,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-297821.81002496555, -230821.81002496553, -241972.93369495813, -308972.9336949581, -297821.81002496555], "y": [219603.68706953674, 264603.68706953665, 281206.4712004146, 236206.4712004146, 219603.68706953674], "fill": "toself", "fillcolor": "rgba(165,42,42,0.4)", "line": {"shape": "spline", "color": "rgba(165,42,42,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-139468.15625250107, -216468.15625250107, -230326.5874674226, -153326.5874674226, -139468.15625250107], "y": [203115.20888868484, 277115.2088886848, 262694.94938126643, 188694.94938126652, 203115.20888868484], "fill": "toself", "fillcolor": "rgba(165,42,42,0.4)", "line": {"shape": "spline", "color": "rgba(165,42,42,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-392589.34695748566, -449589.34695748566, -291205.396762438, -234205.396762438, -392589.34695748566], "y": [441246.64340773656, 43246.64340773663, 20563.514862214724, 418563.5148622147, 441246.64340773656], "fill": "toself", "fillcolor": "rgba(165,42,42,0.4)", "line": {"shape": "spline", "color": "rgba(165,42,42,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [70134.4484087453, -314865.5515912547, -327929.19212866895, 57070.80787133104, 70134.4484087453], "y": [219863.41884491418, 345863.41884491406, 305946.7394250372, 179946.73942503723, 219863.41884491418], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [187642.93112527012, 50976.26445860343, 44003.92515480591, 180670.5918214726, 187642.93112527012], "y": [167649.9986362554, 218483.33196958876, 199738.02630036266, 148904.6929670293, 167649.9986362554], "fill": "toself", "fillcolor": "rgba(165,42,42,0.4)", "line": {"shape": "spline", "color": "rgba(165,42,42,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-281443.23852662864], "y": [-108522.65419835765], "mode": "markers+text", "marker": {"symbol": "star", "size": 14, "color": "yellow"}, "text": ["1750621784903"], "textposition": "top center", "hovertext": ["1750621784903 [G97]"], "hoverinfo": "text"}, {"type": "scatter", "x": [-154811.4839587275], "y": [15618.027530037678], "mode": "markers+text", "marker": {"symbol": "circle-open", "size": 16, "color": "lightblue"}, "hovertext": ["Long Bar Gate [M04]"], "hoverinfo": "text", "text": ["Long Bar Gate"], "textposition": "top center", "textfont": {"color": "white", "size": 20}}, {"type": "scatter", "x": [227688.51604127252], "y": [8951.360863371012], "mode": "markers+text", "marker": {"symbol": "circle-open", "size": 16, "color": "lightblue"}, "hovertext": ["Egan Gate [M23]"], "hoverinfo": "text", "text": ["Egan Gate"], "textposition": "top center", "textfont": {"color": "white", "size": 20}}, {"type": "scatter", "x": [-127311.4839587275], "y": [-5215.305803295657], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["JPL RS32 [L05]"], "hoverinfo": "text", "text": ["JPL RS32"], "textposition": "top center", "textfont": {"color": "white", "size": 14}}, {"type": "scatter", "x": [-14138.181489591647], "y": [102210.31148065487], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "green"}, "hovertext": ["Danae Command [R11]"], "hoverinfo": "text", "text": ["Danae Command"], "textposition": "top center", "textfont": {"color": "white", "size": 14}}, {"type": "scatter", "x": [7898.948140038152], "y": [-219251.01567983907], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["M 119 [B12]"], "hoverinfo": "text", "text": ["M 119"], "textposition": "top center", "textfont": {"color": "white", "size": 14}}, {"type": "scatter", "x": [-43941.05185996185], "y": [-184691.01567983907], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["M 141 [C09]"], "hoverinfo": "text", "text": ["M 141"], "textposition": "top center", "textfont": {"color": "white", "size": 14}}, {"type": "scatter", "x": [-212158.82963773963], "y": [218862.31765349425], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["M 351 [W01]"], "hoverinfo": "text", "text": ["M 351"], "textposition": "top center", "textfont": {"color": "white", "size": 14}}, {"type": "scatter", "x": [-257992.162971073], "y": [186917.87320904975], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["M 762 [V99]"], "hoverinfo": "text", "text": ["M 762"], "textposition": "top center", "textfont": {"color": "white", "size": 14}}, {"type": "scatter", "x": [278618.9481400382], "y": [-230771.01567983907], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["M 521 [A25]"], "hoverinfo": "text", "text": ["M 521"], "textposition": "top center", "textfont": {"color": "white", "size": 14}}, {"type": "scatter", "x": [66822.60485262159], "y": [314968.07687277545], "mode": "markers+text", "marker": {"symbol": "circle-open", "size": 16, "color": "lightblue"}, "hovertext": ["JP 59 [B15]"], "hoverinfo": "text", "text": ["JP 59"], "textposition": "top center", "textfont": {"color": "white", "size": 20}}, {"type": "scatter", "x": [-13055.5153543353], "y": [101160.80782049778], "mode": "markers", "marker": {"symbol": "pentagon-open", "size": 3, "color": "orange"}, "hovertext": ["WP 84 [R11]"], "hoverinfo": "text"}, {"type": "scatter", "x": [-12824.785684835231], "y": [103403.1301987727], "mode": "markers", "marker": {"symbol": "pentagon-open", "size": 3, "color": "orange"}, "hovertext": ["WP 34 [R11]"], "hoverinfo": "text"}, {"type": "scatter", "x": [-15687.879885208647], "y": [100977.98099321054], "mode": "markers", "marker": {"symbol": "pentagon-open", "size": 3, "color": "orange"}, "hovertext": ["WP 6 [R11]"], "hoverinfo": "text"}, {"type": "scatter", "x": [-25164.078726964326], "y": [98706.28949004994], "mode": "markers", "marker": {"symbol": "pentagon-open", "size": 3, "color": "orange"}, "hovertext": ["WP 46 [Q10]"], "hoverinfo": "text"}, {"type": "scatter", "x": [4609.047621910482], "y": [116930.93587226534], "mode": "markers", "marker": {"symbol": "pentagon-open", "size": 3, "color": "orange"}, "hovertext": ["WP 56 [R12]"], "hoverinfo": "text"}, {"type": "scatter", "x": [-15394.659542909045], "y": [103576.04939013207], "mode": "markers", "marker": {"symbol": "pentagon-open", "size": 3, "color": "orange"}, "hovertext": ["WP 44 [R11]"], "hoverinfo": "text"}, {"type": "scatter", "x": [-13854.849849128143], "y": [101515.24251935835], "mode": "markers", "marker": {"symbol": "pentagon-open", "size": 3, "color": "orange"}, "hovertext": ["WP 31 [R11]"], "hoverinfo": "text"}, {"type": "scatter", "x": [-144322.81897111176], "y": [16944.605265264396], "mode": "markers", "marker": {"symbol": "pentagon-open", "size": 3, "color": "orange"}, "hovertext": ["WP 11 [M04]"], "hoverinfo": "text"}, {"type": "scatter", "x": [-145528.50301004635], "y": [21480.718858775497], "mode": "markers", "marker": {"symbol": "pentagon-open", "size": 3, "color": "orange"}, "hovertext": ["WP 35 [N04]"], "hoverinfo": "text"}, {"type": "scatter", "x": [-144911.64140873097], "y": [19393.35889472849], "mode": "markers", "marker": {"symbol": "pentagon-open", "size": 3, "color": "orange"}, "hovertext": ["WP 18 [M04]"], "hoverinfo": "text"}, {"type": "scatter", "x": [-44777.63319244611], "y": [-187901.2058914671], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["SM Baker [C09]"], "hoverinfo": "text", "text": ["SM Baker"], "textposition": "top center", "textfont": {"color": "white", "size": 14}}, {"type": "scatter", "x": [8115.445203978383], "y": [-222221.14225555933], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["SM Hoopla [A12]"], "hoverinfo": "text", "text": ["SM Hoopla"], "textposition": "top center", "textfont": {"color": "white", "size": 14}}, {"type": "scatter", "x": [122844.52613676304], "y": [-64058.94799012408], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["DS 29 [I18]"], "hoverinfo": "text", "text": ["DS 29"], "textposition": "top center", "textfont": {"color": "white", "size": 14}}, {"type": "scatter", "x": [108778.81111618692], "y": [-52337.51880631063], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["DS 80 [J17]"], "hoverinfo": "text", "text": ["DS 80"], "textposition": "top center", "textfont": {"color": "white", "size": 14}}, {"type": "scatter", "x": [-241342.2879921808], "y": [234573.59659149463], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["DS 68 [X99]"], "hoverinfo": "text", "text": ["DS 68"], "textposition": "top center", "textfont": {"color": "white", "size": 14}}, {"type": "scatter", "x": [-136087.46560255002], "y": [24472.45302138825], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["USFP Inspections 23 [N05]"], "hoverinfo": "text", "text": ["USFP Inspections 23"], "textposition": "top center", "textfont": {"color": "white", "size": 14}}, {"type": "scatter", "x": [239356.76147337133], "y": [4277.345801642345], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 28 [M23]"], "hoverinfo": "text"}, {"type": "scatter", "x": [199856.76147337133], "y": [22477.34580164234], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 81 [N21]"], "hoverinfo": "text"}, {"type": "scatter", "x": [160356.76147337133], "y": [40677.34580164234], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 92 [O20]"], "hoverinfo": "text"}, {"type": "scatter", "x": [120856.76147337133], "y": [58877.34580164234], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 95 [O18]"], "hoverinfo": "text"}, {"type": "scatter", "x": [81356.76147337133], "y": [77077.34580164232], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 22 [P16]"], "hoverinfo": "text"}, {"type": "scatter", "x": [41856.76147337133], "y": [95277.34580164232], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 96 [Q14]"], "hoverinfo": "text"}, {"type": "scatter", "x": [2356.761473371327], "y": [113477.34580164232], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 23 [R12]"], "hoverinfo": "text"}, {"type": "scatter", "x": [-37143.23852662867], "y": [131677.34580164234], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 88 [S10]"], "hoverinfo": "text"}, {"type": "scatter", "x": [-76643.23852662867], "y": [149877.34580164234], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 30 [T08]"], "hoverinfo": "text"}, {"type": "scatter", "x": [-116143.23852662867], "y": [168077.34580164234], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 51 [U06]"], "hoverinfo": "text"}, {"type": "scatter", "x": [-155643.23852662867], "y": [186277.34580164234], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 99 [V04]"], "hoverinfo": "text"}, {"type": "scatter", "x": [-195143.23852662867], "y": [204477.34580164234], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 40 [W02]"], "hoverinfo": "text"}, {"type": "scatter", "x": [-234643.2385266287], "y": [222677.34580164234], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 69 [X00]"], "hoverinfo": "text"}, {"type": "scatter", "x": [235756.76147337133], "y": [25877.345801642343], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 75 [N23]"], "hoverinfo": "text"}, {"type": "scatter", "x": [203090.09480670467], "y": [2544.0124683090107], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 37 [M22]"], "hoverinfo": "text"}, {"type": "scatter", "x": [170423.42814003798], "y": [-20789.32086502432], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 61 [K20]"], "hoverinfo": "text"}, {"type": "scatter", "x": [137756.76147337133], "y": [-44122.65419835766], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 20 [J18]"], "hoverinfo": "text"}, {"type": "scatter", "x": [105090.09480670467], "y": [-67455.98753169099], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 39 [I17]"], "hoverinfo": "text"}, {"type": "scatter", "x": [72423.42814003798], "y": [-90789.32086502433], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 87 [H15]"], "hoverinfo": "text"}, {"type": "scatter", "x": [39756.76147337133], "y": [-114122.65419835766], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 73 [G13]"], "hoverinfo": "text"}, {"type": "scatter", "x": [7090.09480670467], "y": [-137455.98753169097], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 32 [F12]"], "hoverinfo": "text"}, {"type": "scatter", "x": [-25576.571859961987], "y": [-160789.3208650243], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 57 [D10]"], "hoverinfo": "text"}, {"type": "scatter", "x": [-58243.23852662867], "y": [-184122.65419835766], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 50 [C09]"], "hoverinfo": "text"}, {"type": "scatter", "x": [289756.7614733713], "y": [-230922.65419835766], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 78 [A26]"], "hoverinfo": "text"}, {"type": "scatter", "x": [278556.7614733713], "y": [-188122.65419835766], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 19 [C25]"], "hoverinfo": "text"}, {"type": "scatter", "x": [267356.7614733713], "y": [-145322.65419835766], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 34 [E25]"], "hoverinfo": "text"}, {"type": "scatter", "x": [256156.7614733713], "y": [-102522.65419835765], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 10 [G24]"], "hoverinfo": "text"}, {"type": "scatter", "x": [244956.76147337133], "y": [-59722.654198357646], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 98 [J24]"], "hoverinfo": "text"}, {"type": "scatter", "x": [233756.76147337133], "y": [-16922.654198357646], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 55 [L23]"], "hoverinfo": "text"}, {"type": "scatter", "x": [222556.76147337133], "y": [25877.345801642354], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 97 [N23]"], "hoverinfo": "text"}, {"type": "scatter", "x": [-93643.23852662867], "y": [5477.345801642345], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 13 [M07]"], "hoverinfo": "text"}, {"type": "scatter", "x": [-110586.19744298566], "y": [40659.76251270369], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 17 [O06]"], "hoverinfo": "text"}, {"type": "scatter", "x": [-148656.68055466283], "y": [49349.10184982441], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 91 [O04]"], "hoverinfo": "text"}, {"type": "scatter", "x": [-179186.83758223752], "y": [25002.114061932465], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 56 [N03]"], "hoverinfo": "text"}, {"type": "scatter", "x": [-179186.83758223752], "y": [-14047.422458647767], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 68 [L03]"], "hoverinfo": "text"}, {"type": "scatter", "x": [-148656.68055466283], "y": [-38394.410246539715], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 72 [K04]"], "hoverinfo": "text"}, {"type": "scatter", "x": [-110586.19744298566], "y": [-29705.070909419002], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 89 [K06]"], "hoverinfo": "text"}, {"type": "scatter", "x": [-23426.57185996201], "y": [99369.01246830903], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 24 [Q10]"], "hoverinfo": "text"}, {"type": "scatter", "x": [-54676.571859962016], "y": [77494.01246830903], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 65 [P09]"], "hoverinfo": "text"}, {"type": "scatter", "x": [-85926.57185996202], "y": [55619.012468309025], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 49 [O07]"], "hoverinfo": "text"}, {"type": "scatter", "x": [-138643.23852662867], "y": [5477.345801642345], "mode": "markers+text", "marker": {"symbol": "circle", "size": 6, "color": "#FF13F0"}, "hovertext": ["LB Border Region [M05]"], "hoverinfo": "text", "text": ["LB Border Region"], "textposition": "top center", "textfont": {"color": "white", "size": 14}}], "layout": {"title": "Danae", "paper_bgcolor": "black", "plot_bgcolor": "black", "font": {"color": "white"}, "margin": {"l": 0, "r": 0, "t": 40, "b": 0}, "autosize": true, "dragmode": "pan", "hovermode": "closest", "xaxis": {"color": "white", "showgrid": true, "gridcolor": "gray", "dtick": 20000, "title": "X Axis"}, "yaxis": {"color": "white", "showgrid": true, "gridcolor": "gray", "dtick": 20000, "scaleanchor": "x", "scaleratio": 1, "title": "Z Axis"}, "shapes": []}};
    fig.layout.showlegend = false;
    fig.layout.dragmode = 'pan';
    fig.layout.title = 'Danae';
    Plotly.newPlot('plot', fig.data, fig.layout, {responsive: true, scrollZoom: true});
        console.log("[DEBUG JS] Plotted traces count:", fig.data.length);
        console.log("[DEBUG JS] fig.data sample:", fig.data.slice(0,3));

    var plotDiv = document.getElementById('plot');
    // Custom click: select nearest object within 10px of cursor
    plotDiv.addEventListener('click', function(evt) {
        var rect = plotDiv.getBoundingClientRect();
        var px = evt.clientX - rect.left;
        var py = evt.clientY - rect.top;
        var xaxis = plotDiv._fullLayout.xaxis;
        var yaxis = plotDiv._fullLayout.yaxis;
        var l2px = xaxis.l2p.bind(xaxis);
        var l2py = yaxis.l2p.bind(yaxis);
        var minDist = Infinity, closest = null;
        for (var name in objData) {
            var pt = objData[name];
            var xPx = l2px(pt.x);
            var yPx = l2py(pt.y);
            var dx = xPx - px, dy = yPx - py;
            var d = Math.sqrt(dx*dx + dy*dy);
            console.log(`${name}: data=(${pt.x}, ${pt.y}) -> screen=(${xPx.toFixed(1)}, ${yPx.toFixed(1)}), cursor=(${px.toFixed(1)}, ${py.toFixed(1)}), dx=${dx.toFixed(1)}, dy=${dy.toFixed(1)}, d=${d.toFixed(1)}`);
            if (d < minDist) {
                minDist = d;
                closest = name;
            }
        }
        if (minDist <= 35 && closest) {
            highlight(closest);
        }
    });

  var ctrl = document.getElementById('controls');

  // Helper: create and append a single button
  function addButton(label, fn, header, color) {
    var btn = document.createElement('button');
    btn.textContent = label;
    if (header) {
      btn.className = 'header';     // section header style
      btn.onclick = null;           // no click action
    } else {
      btn.onclick = fn;             // bind the handler
      if (color) btn.style.backgroundColor = color;
    }
    ctrl.appendChild(btn);
  }

  // ——— Populate the sidebar ———
  addButton('None', clearAnnotations, false, null);

  addButton('--- Gates ---', null, true, null);
  addButton('Egan Gate',function(){highlight('Egan Gate');},false,null);
    addButton('JP 59',function(){highlight('JP 59');},false,null);
    addButton('Long Bar Gate',function(){highlight('Long Bar Gate');},false,null);

  addButton('--- Nav Points/POI ---', null, true, null);
  addButton('LB Border Region',function(){highlight('LB Border Region');},false,null);

  addButton('--- Stations ---', null, true, null);
  addButton('DS 29',function(){highlight('DS 29');},false,'blue');
    addButton('DS 68',function(){highlight('DS 68');},false,'blue');
    addButton('DS 80',function(){highlight('DS 80');},false,'blue');
    addButton('Danae Command',function(){highlight('Danae Command');},false,'green');
    addButton('JPL RS32',function(){highlight('JPL RS32');},false,'blue');
    addButton('M 119',function(){highlight('M 119');},false,'blue');
    addButton('M 141',function(){highlight('M 141');},false,'blue');
    addButton('M 351',function(){highlight('M 351');},false,'blue');
    addButton('M 521',function(){highlight('M 521');},false,'blue');
    addButton('M 762',function(){highlight('M 762');},false,'blue');
    addButton('SM Baker',function(){highlight('SM Baker');},false,'blue');
    addButton('SM Hoopla',function(){highlight('SM Hoopla');},false,'blue');
    addButton('USFP Inspections 23',function(){highlight('USFP Inspections 23');},false,'blue');
    
</script>
</body>
</html>