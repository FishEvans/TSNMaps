
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arietis.html</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        body { margin: 0; background: black; color: white; display: flex; height: 100vh; }
        /* === Description typography controls ===
           Tweak these two variables to change description sizes globally */
        :root {
            --desc-font-size: 130%;
            --hull-desc-font-size: 130%;
        }
        .desc-text { font-size: var(--desc-font-size); margin-top: 8px; }
        .hull-desc { font-size: var(--hull-desc-font-size); margin-top: 5px; color: #ccc; }
        #controls { flex: 1; min-width: 200px; max-width: 350px; overflow-y: auto; background: #333; padding: 10px; }
        #plot { flex: 3; min-width: 400px; }
        #info { flex: 1; min-width: 200px; background: #333; padding: 10px; overflow-y: auto; }
        h2.header { margin-top: 0; margin-bottom: 5px; text-align: center; }
        h3.subheader { margin-top: 0; margin-bottom: 15px; text-align: center; color: #ccc; }
        .alignment-image { display: block; max-width: 100%; height: auto; margin: 10px auto; }
        button { display: block; width: 100%; margin-bottom: 5px; background: #555; color: white; border: none; padding: 5px; text-align: left; cursor: pointer; font-size: 20px; }
        button.header { background: #444; cursor: default; font-size: 24px; }
    </style>
</head>
<body>
    <div id="controls">
        <div id="gm-controls" style="margin-bottom:10px;"></div>
        <h2 class="header">Arietis</h2>
        <h3 class="subheader">Alignment: USFP</h3>
        <img src="Images/Factions/USFP.png" alt="Alignment Logo" class="alignment-image" onerror="this.style.display='none';">

        <input type="text" id="search-box" placeholder="Search objects..." style="width: 95%; padding: 6px; margin-bottom: 10px; font-size: 16px;">
        <div id="object-buttons">
    </div>
    </div>
    <div id="plot"></div>
    <div id="info">
        <img src="Images/Compass.png" alt="Compass" style="display:block; max-width:100%; height:auto; margin-bottom:10px;">
        <button id="galactic-map-btn" title="Back to Galactic Map">Show Galactic Map</button>
        Select an object
    </div>
<script>
    var objData = {"Poseidon Gate": {"type": "jumpnode", "x": 180415.88301477756, "y": 109843.74575648156, "grid": "R21", "hidden": false, "label": "Poseidon Gate", "destinations": {"Rift Access Point": "Poseidon"}}, "Atlantis Gate": {"type": "jumpnode", "x": -99213.74661485212, "y": -124785.88387314806, "grid": "F07", "hidden": false, "label": "Atlantis Gate", "destinations": {"Arietis Gate": "Atlantis"}}, "Waypoint 89 Gate": {"type": "jumpnode", "x": 200971.15636297144, "y": -74810.78956587781, "grid": "I22", "hidden": false, "label": "Waypoint 89 Gate", "destinations": {"Areski Transit": "Waypoint 89"}}, "Mira Hotels": {"type": "station", "x": 184664.93428363913, "y": 15908.500043175676, "grid": "M21", "hidden": false, "label": "Mira Hotels", "hull": "starbase_civil", "facilities": ["Docking"], "sides": ["USFP"], "hullName": "Civilian Starbase", "hullImage": "Images/Ships/civil_station256.png", "hullDescription": ""}, "Kala Distributors": {"type": "station", "x": 192501.54693796014, "y": 2981.43814331284, "grid": "M21", "hidden": false, "label": "Kala Distributors", "hull": "starbase_industry", "facilities": ["Docking", "Refuel"], "sides": ["USFP"], "hullName": "Industrial Starbase", "hullImage": "Images/Ships/industry_station256.png", "hullDescription": ""}, "Medusa Mining": {"type": "station", "x": 162909.96171848144, "y": -121046.01813240732, "grid": "F20", "hidden": false, "label": "Medusa Mining", "hull": "starbase_industry", "facilities": ["Docking", "Refuel"], "sides": ["USFP"], "hullName": "Industrial Starbase", "hullImage": "Images/Ships/industry_station256.png", "hullDescription": ""}, "Ares Weaponry": {"type": "station", "x": 179692.36912588883, "y": -137249.721836111, "grid": "F20", "hidden": false, "label": "Ares Weaponry", "hull": "starbase_industry", "facilities": ["Docking", "Refuel"], "sides": ["USFP"], "hullName": "Industrial Starbase", "hullImage": "Images/Ships/industry_station256.png", "hullDescription": ""}, "Ashima Foundries": {"type": "station", "x": 156544.22097774065, "y": -149402.4996138888, "grid": "E19", "hidden": false, "label": "Ashima Foundries", "hull": "starbase_industry", "facilities": ["Docking"], "sides": ["USFP"], "hullName": "Industrial Starbase", "hullImage": "Images/Ships/industry_station256.png", "hullDescription": ""}, "Draeka Processors": {"type": "station", "x": 179692.36912588883, "y": -159819.16628055545, "grid": "E20", "hidden": false, "label": "Draeka Processors", "hull": "starbase_industry", "facilities": ["Docking"], "sides": ["USFP"], "hullName": "Industrial Starbase", "hullImage": "Images/Ships/industry_station256.png", "hullDescription": ""}, "Aram": {"type": "station", "x": 15930.082711414743, "y": 14511.650643162908, "grid": "M12", "hidden": false, "label": "Aram", "hull": "starbase_civil", "facilities": ["Docking", "Refuel"], "sides": ["USFP"], "hullName": "Civilian Starbase", "hullImage": "Images/Ships/civil_station256.png", "hullDescription": ""}, "Arietis Command": {"type": "station", "x": 28111.50778615404, "y": 91175.52536324885, "grid": "Q13", "hidden": false, "label": "Arietis Command", "hull": "starbase_command", "facilities": ["Docking", "Refuel", "Repair"], "sides": ["USFP"], "hullName": "Command Starbase", "hullImage": "Images/Ships/tsn-big-base256.png", "hullDescription": ""}, "Fortir": {"type": "station", "x": -102948.44406792054, "y": 145198.23281035668, "grid": "T06", "hidden": false, "label": "Fortir", "hull": "starbase_civil", "facilities": [], "sides": ["USFP"], "hullName": "Civilian Starbase", "hullImage": "Images/Ships/civil_station256.png", "hullDescription": ""}, "Callee": {"type": "station", "x": -106420.66629014276, "y": 129573.2328103567, "grid": "S06", "hidden": false, "label": "Callee", "hull": "starbase_civil", "facilities": [], "sides": ["USFP"], "hullName": "Civilian Starbase", "hullImage": "Images/Ships/civil_station256.png", "hullDescription": ""}, "Aliar": {"type": "station", "x": -89638.25888273533, "y": 134781.56614369003, "grid": "S07", "hidden": false, "label": "Aliar", "hull": "starbase_civil", "facilities": [], "sides": ["USFP"], "hullName": "Civilian Starbase", "hullImage": "Images/Ships/civil_station256.png", "hullDescription": ""}, "Tallith Markets": {"type": "station", "x": -57946.19355351723, "y": 3882.0033864883508, "grid": "M09", "hidden": false, "label": "Tallith Markets", "hull": "starbase_civil", "facilities": ["Docking", "Refuel"], "sides": ["USFP"], "hullName": "Civilian Starbase", "hullImage": "Images/Ships/civil_station256.png", "hullDescription": ""}, "Rannar Lodging": {"type": "station", "x": -62934.83381414822, "y": -8487.788280178313, "grid": "L08", "hidden": false, "label": "Rannar Lodging", "hull": "starbase_civil", "facilities": ["Docking"], "sides": ["USFP"], "hullName": "Civilian Starbase", "hullImage": "Images/Ships/civil_station256.png", "hullDescription": ""}, "WP 77": {"type": "platform", "x": 17563.399536578025, "y": 68298.76551204875, "grid": "P12", "hidden": false, "label": "WP 77"}, "WP 35": {"type": "platform", "x": 5127.469654059904, "y": 79604.15631433795, "grid": "P12", "hidden": false, "label": "WP 35"}, "WP 9": {"type": "platform", "x": 766.818916034064, "y": 96885.25368355145, "grid": "Q12", "hidden": false, "label": "WP 9"}, "WP 86": {"type": "platform", "x": 6258.0087342888055, "y": 112066.77847519696, "grid": "R12", "hidden": false, "label": "WP 86"}, "WP 30": {"type": "platform", "x": 16917.377205018656, "y": 124502.70835771509, "grid": "S12", "hidden": false, "label": "WP 30"}, "WP 31": {"type": "platform", "x": 35006.002488681355, "y": 124825.71952349477, "grid": "S13", "hidden": false, "label": "WP 31"}, "WP 64": {"type": "platform", "x": 48410.96586853857, "y": 118850.01295657048, "grid": "R14", "hidden": false, "label": "WP 64"}, "WP 6": {"type": "platform", "x": 57293.77292748009, "y": 104314.51049648436, "grid": "R14", "hidden": false, "label": "WP 6"}, "WP 5": {"type": "platform", "x": 58747.323173488694, "y": 87356.42429305054, "grid": "Q14", "hidden": false, "label": "WP 5"}, "WP 66": {"type": "platform", "x": 47409.63125462154, "y": 74629.7843613307, "grid": "P14", "hidden": false, "label": "WP 66"}, "WP 1": {"type": "platform", "x": 34359.98015712199, "y": 67006.72084892998, "grid": "P13", "hidden": false, "label": "WP 1"}, "Daggerhold": {"type": "station", "x": -221533.4910886868, "y": 137414.98225444695, "grid": "S00", "hidden": true, "label": "**Daggerhold**", "hull": "pirate_military_base", "facilities": [], "sides": ["Pirate"], "hullName": "Pirate Base", "hullImage": "Images/Ships/TSN Mod/Pirate/PirateBaseAst256.png", "hullDescription": ""}, "Skorn's Peak": {"type": "station", "x": -221533.4910886868, "y": 118248.31558778026, "grid": "R00", "hidden": true, "label": "**Skorn's Peak**", "hull": "starbase_kralien", "facilities": [], "sides": ["Kralien"], "hullName": "Kralien Base", "hullImage": "Images/Ships/kralien_station256.png", "hullDescription": ""}, "RS 48X": {"type": "station", "x": 143137.58517527155, "y": 145447.03742314826, "grid": "T19", "hidden": false, "label": "RS 48X", "hull": "starbase_science", "facilities": ["Docking"], "sides": ["USFP"], "hullName": "Science Starbase", "hullImage": "Images/Ships/science_station256.png", "hullDescription": ""}, "RS 82X": {"type": "station", "x": 149567.62632753496, "y": 130175.68968652276, "grid": "S19", "hidden": false, "label": "RS 82X", "hull": "starbase_science", "facilities": ["Refuel", "Docking"], "sides": ["USFP"], "hullName": "Science Starbase", "hullImage": "Images/Ships/science_station256.png", "hullDescription": ""}, "Pr 811L": {"type": "station", "x": 131081.25801477773, "y": 137007.60841080258, "grid": "S18", "hidden": false, "label": "Pr 811L", "hull": "starbase_science", "facilities": [], "sides": ["USFP"], "hullName": "Science Starbase", "hullImage": "Images/Ships/science_station256.png", "hullDescription": ""}, "M 142": {"type": "station", "x": 58888.57825902229, "y": -123247.76254275578, "grid": "F14", "hidden": false, "label": "M 142", "hull": "usfp_industrial_assembly", "facilities": [], "sides": ["USFP"], "hullName": "Assembly Yard", "hullImage": "Images/Ships/TSN Mod/USFP/IndustrialAssembler256.png", "hullDescription": ""}, "M 080": {"type": "station", "x": 61444.84111948738, "y": -115538.08060382931, "grid": "G15", "hidden": false, "label": "M 080", "hull": "usfp_industrial_storage", "facilities": [], "sides": ["USFP"], "hullName": "Storage Module", "hullImage": "Images/Ships/TSN Mod/USFP/IndustrialStorage256.png", "hullDescription": ""}, "DS 16": {"type": "station", "x": 13950.991126516223, "y": 102025.31598397721, "grid": "R12", "hidden": false, "label": "DS 16", "hull": "starbase_command", "facilities": ["Docking", "Refuel"], "sides": ["USFP"], "hullName": "Command Starbase", "hullImage": "Images/Ships/tsn-big-base256.png", "hullDescription": ""}, "DS 31": {"type": "station", "x": 39748.617268146845, "y": 108342.02605803091, "grid": "R13", "hidden": false, "label": "DS 31", "hull": "starbase_command", "facilities": ["Docking", "Refuel"], "sides": ["USFP"], "hullName": "Command Starbase", "hullImage": "Images/Ships/tsn-big-base256.png", "hullDescription": ""}, "DS 52": {"type": "station", "x": 22761.177002859178, "y": 79306.88283513345, "grid": "P13", "hidden": false, "label": "DS 52", "hull": "starbase_command", "facilities": ["Docking", "Refuel"], "sides": ["USFP"], "hullName": "Command Starbase", "hullImage": "Images/Ships/tsn-big-base256.png", "hullDescription": ""}, "DS 22": {"type": "station", "x": 40688.93376625595, "y": 83687.40458037237, "grid": "Q14", "hidden": false, "label": "DS 22", "hull": "starbase_command", "facilities": ["Docking", "Refuel"], "sides": ["USFP"], "hullName": "Command Starbase", "hullImage": "Images/Ships/tsn-big-base256.png", "hullDescription": ""}, "DS 37": {"type": "station", "x": -35182.19382763927, "y": -90896.02756910647, "grid": "H10", "hidden": false, "label": "DS 37", "hull": "starbase_industry", "facilities": ["Refuel", "Docking"], "sides": ["USFP"], "hullName": "Industrial Starbase", "hullImage": "Images/Ships/industry_station256.png", "hullDescription": ""}, "M 552": {"type": "station", "x": -43291.39615029169, "y": -103992.59257862702, "grid": "G09", "hidden": false, "label": "M 552", "hull": "usfp_industrial_unit", "facilities": [], "sides": ["USFP"], "hullName": "Industrial Unit", "hullImage": "Images/Ships/TSN Mod/USFP/IndustrialUnit256.png", "hullDescription": ""}, "DW Econ": {"type": "station", "x": 59607.199710777844, "y": -118701.32867112731, "grid": "G14", "hidden": false, "label": "DW Econ", "description": "Direct Wearhouseing Econ Station, Storage and Logistincs at comptetitive rates!", "hull": "starbase_industry", "facilities": ["Docking", "Refuel"], "sides": ["USFP"], "hullName": "Industrial Starbase", "hullImage": "Images/Ships/industry_station256.png", "hullDescription": ""}, "SR 85": {"type": "sensor_relay", "x": 186365.99794238695, "y": 112960.90534979424, "grid": "R21", "hidden": false, "label": "SR 85"}, "SR 34": {"type": "sensor_relay", "x": 148428.75514403303, "y": 91339.89197530864, "grid": "Q19", "hidden": false, "label": "SR 34"}, "SR 75": {"type": "sensor_relay", "x": 110491.51234567912, "y": 69718.87860082302, "grid": "P17", "hidden": false, "label": "SR 75"}, "SR 56": {"type": "sensor_relay", "x": 72554.26954732522, "y": 48097.86522633743, "grid": "O15", "hidden": false, "label": "SR 56"}, "SR 91": {"type": "sensor_relay", "x": 34617.026748971286, "y": 26476.851851851825, "grid": "N13", "hidden": false, "label": "SR 91"}, "SR 32": {"type": "sensor_relay", "x": -4123.971193415539, "y": 8472.736625514377, "grid": "M11", "hidden": false, "label": "SR 32"}, "SR 95": {"type": "sensor_relay", "x": -26227.237654320896, "y": -25284.979423868346, "grid": "K10", "hidden": false, "label": "SR 95"}, "SR 27": {"type": "sensor_relay", "x": -51947.402263374395, "y": -59846.45061728399, "grid": "J09", "hidden": false, "label": "SR 27"}, "SR 42": {"type": "sensor_relay", "x": -77667.5668724279, "y": -94407.92181069964, "grid": "H08", "hidden": false, "label": "SR 42"}, "SR 73": {"type": "sensor_relay", "x": -91499.1260743122, "y": -140185.05848257677, "grid": "E07", "hidden": false, "label": "SR 73"}, "SR 99": {"type": "sensor_relay", "x": 140150.07716049394, "y": 138681.06995884774, "grid": "S19", "hidden": false, "label": "SR 99"}, "SR 96": {"type": "sensor_relay", "x": 150933.7920096023, "y": 102043.23131001371, "grid": "R19", "hidden": false, "label": "SR 96"}, "SR 92": {"type": "sensor_relay", "x": 161717.50685871067, "y": 65405.39266117969, "grid": "P20", "hidden": false, "label": "SR 92"}, "SR 41": {"type": "sensor_relay", "x": 172501.22170781903, "y": 28767.55401234566, "grid": "N20", "hidden": false, "label": "SR 41"}, "SR 98": {"type": "sensor_relay", "x": 183284.9365569274, "y": -7870.284636488359, "grid": "L21", "hidden": false, "label": "SR 98"}, "SR 45": {"type": "sensor_relay", "x": 194068.6514060358, "y": -44508.12328532239, "grid": "J21", "hidden": false, "label": "SR 45"}, "SR 62": {"type": "sensor_relay", "x": 204852.36625514415, "y": -81145.96193415642, "grid": "H22", "hidden": false, "label": "SR 62"}, "SR 90": {"type": "sensor_relay", "x": 175515.3034979425, "y": -147053.88374485602, "grid": "E20", "hidden": false, "label": "SR 90"}, "SR 77": {"type": "sensor_relay", "x": 181543.46707818942, "y": -110081.14711934162, "grid": "G21", "hidden": false, "label": "SR 77"}, "SR 80": {"type": "sensor_relay", "x": 187571.63065843633, "y": -73108.4104938272, "grid": "I21", "hidden": false, "label": "SR 80"}, "SR 19": {"type": "sensor_relay", "x": 27624.35699588488, "y": 97689.55761316871, "grid": "Q13", "hidden": false, "label": "SR 19"}, "SR 68": {"type": "sensor_relay", "x": 72624.35699588488, "y": 97689.55761316871, "grid": "Q15", "hidden": false, "label": "SR 68"}, "SR 43": {"type": "sensor_relay", "x": 55681.39807952789, "y": 132871.97432423005, "grid": "S14", "hidden": false, "label": "SR 43"}, "SR 67": {"type": "sensor_relay", "x": 17610.91496785073, "y": 141561.31366135078, "grid": "T12", "hidden": false, "label": "SR 67"}, "SR 10": {"type": "sensor_relay", "x": -12919.24205972398, "y": 117214.32587345883, "grid": "R11", "hidden": false, "label": "SR 10"}, "SR 26": {"type": "sensor_relay", "x": -12919.24205972398, "y": 78164.78935287861, "grid": "P11", "hidden": false, "label": "SR 26"}, "SR 15": {"type": "sensor_relay", "x": 17610.914967850724, "y": 53817.80156498665, "grid": "O12", "hidden": false, "label": "SR 15"}, "SR 35": {"type": "sensor_relay", "x": 55681.39807952788, "y": 62507.14090210736, "grid": "P14", "hidden": false, "label": "SR 35"}, "Tri State Point": {"type": "sensor_relay", "x": -111425.28292181062, "y": 139886.70267489713, "grid": "S06", "hidden": false, "label": "Tri State Point"}, "SR 58": {"type": "sensor_relay", "x": -85048.65626031971, "y": 150017.05637875956, "grid": "T07", "hidden": false, "label": "SR 58"}, "SR 84": {"type": "sensor_relay", "x": -99390.35202093802, "y": 117651.33756763447, "grid": "R07", "hidden": false, "label": "SR 84"}, "SR 16": {"type": "sensor_relay", "x": -116314.0178431129, "y": -111307.31915842257, "grid": "G06", "hidden": false, "label": "SR 16"}, "SR 94": {"type": "sensor_relay", "x": -69127.54182238871, "y": -115964.04193100208, "grid": "G08", "hidden": false, "label": "SR 94"}, "SR 71": {"type": "sensor_relay", "x": -29567.71832701833, "y": -109517.2558799047, "grid": "G10", "hidden": false, "label": "SR 71"}, "SR 36": {"type": "sensor_relay", "x": 9992.105168352049, "y": -103070.4698288073, "grid": "G12", "hidden": false, "label": "SR 36"}, "SR 97": {"type": "sensor_relay", "x": 49551.92866372243, "y": -96623.6837777099, "grid": "H14", "hidden": false, "label": "SR 97"}, "SR 79": {"type": "sensor_relay", "x": 89111.75215909282, "y": -90176.8977266125, "grid": "H16", "hidden": false, "label": "SR 79"}, "SR 14": {"type": "sensor_relay", "x": 128671.57565446319, "y": -83730.1116755151, "grid": "H18", "hidden": false, "label": "SR 14"}, "SR 39": {"type": "sensor_relay", "x": 168231.39914983354, "y": -77283.32562441772, "grid": "I20", "hidden": false, "label": "SR 39"}, "SR 23": {"type": "sensor_relay", "x": 207791.22264520393, "y": -70836.53957332032, "grid": "I22", "hidden": false, "label": "SR 23"}, "SR 65": {"type": "sensor_relay", "x": -117457.72860087971, "y": -133720.43946362156, "grid": "F06", "hidden": false, "label": "SR 65"}, "SR 54": {"type": "sensor_relay", "x": -34486.46606246662, "y": -83276.3406715508, "grid": "H10", "hidden": false, "label": "SR 54"}};
        console.log("[DEBUG JS] objData keys:", Object.keys(objData));
        console.log("[DEBUG JS] objData sample:", objData[Object.keys(objData)[0]]);

    function clearAnnotations() {
        Plotly.relayout('plot', {annotations: []});
        document.getElementById('info').innerHTML = getInfoHeader() + 'Select an object';
        document.getElementById('galactic-map-btn').addEventListener('click', function() {
            window.location.href = 'index.html';
        });
        document.getElementById('galactic-map-btn').addEventListener('click', function() {
            window.location.href = 'index.html';
        });
    }
    
    function getInfoHeader() {
    return '<img src="Images/Compass.png" alt="Compass" '
         + 'style="display:block; max-width:100%; height:auto; margin-bottom:10px;">'
         + '<button id="galactic-map-btn" title="Back to Galactic Map">Galactic Map</button>';
        }
    
    function highlight(name) {
        var obj = objData[name];
        if (obj.hidden && !isGM()) {
            alert("This object is not visible on the public map.");
            return;
        }
        var annotation = {
            x: obj.x, y: obj.y, xref: 'x', yref: 'y', text: name,
            showarrow: true, arrowcolor: 'yellow', arrowwidth: 2,
            arrowhead: 3, font: {color: 'yellow', size: 28}
        };

        Plotly.relayout('plot', {annotations: [annotation]});

        var label = obj.label || name;
        var infoHtml = '<span style="font-size:20pt;">' + label + '</span><br>';
        infoHtml += '<b>Location:</b> ' + obj.grid + '<br>';

        if (obj.type === 'station') {
            // Station selected: display detailed station info
            if (obj.hullImage) {
                infoHtml += '<img src="' + obj.hullImage + '" alt="Hull Art" style="max-width:48%; height:auto;">';
            }
            if (obj.sides && obj.sides.length > 0) {
                infoHtml += '<img src="Images/Factions/' + obj.sides[0] + '.png" alt="Faction Logo" style="max-width:48%; height:auto;">';
            }
            infoHtml += '<b>Facilities:</b> ' + (obj.facilities.length ? obj.facilities.join(', ') : 'None') + '<br>';
            if (obj.hullName && obj.hullImage) {
                infoHtml += '<b>General Class:</b> ' + obj.hullName + '<br>';
            }
            if (obj.hullDescription) {
                infoHtml += '<p class="hull-desc">' + obj.hullDescription + '</p>';
            }
        } 
        else if ((obj.type === 'jump_point' || obj.type === 'jumppoint' || obj.type === 'jumpnode') && obj.destinations && typeof obj.destinations === 'object') {
        
            // Generate a random 5-character alphanumeric serial
            const serial = Math.random().toString(36).substring(2, 7).toUpperCase();
            infoHtml += 'Oliver Class jump stabilisation node. Serial: ' + serial;
            infoHtml += '<br><br><b>Destinations:</b><br>';
            for (const [target, label] of Object.entries(obj.destinations)) {
                if (typeof target === 'string' && typeof label === 'string') {
                    let file = label + '.html';
                    // Correctly escape single quotes for JS string
                    infoHtml += `<button onclick="window.open('${file}', '_blank')">${label}, ${target}</button>`;
                }
            }
            }
        else if (obj.type === 'sensor_relay') {
            // Generate a random 5-character alphanumeric serial
            const serial = Math.random().toString(36).substring(2, 7).toUpperCase();
            infoHtml += 'Standard sensor and info relay buoy, Serial: ' + serial;
        }
        else if (obj.type === 'jumpnode' || obj.type === 'jumppoint') {
            // Generate a random 5-character alphanumeric serial
            const serial = Math.random().toString(36).substring(2, 7).toUpperCase();
            infoHtml += 'Oliver Class jump stabilisation node. Serial: ' + serial;
        }
        else if (obj.type === 'planet') {
            if (obj['class']) {
                infoHtml += '<b>Class:</b> ' + obj['class'] + '<br>';
            }
        }
        else {
            infoHtml += '<b>Type:</b> ' + obj.type;
        }

            // ——— append a description paragraph if one exists ———
            if (obj.description) {
                infoHtml += '<p class="desc-text">'
                          + obj.description
                          + '</p>';
            }
            document.getElementById('info').innerHTML = getInfoHeader() + infoHtml;
            document.getElementById('galactic-map-btn').addEventListener('click', function() {
                window.location.href = 'index.html';
            });
                + infoHtml;
         
    }
         document.getElementById('galactic-map-btn').addEventListener('click', function() {
        window.location.href = 'index.html';
    });
    

    var fig = {"data": [{"type": "scatter", "x": [-39909.34651928165, -127872.30948224463, -108117.17124618907, -20154.208283226108, -39909.34651928165], "y": [165746.14249021912, 88778.54989762651, 66201.24905642017, 143168.8416490128, 165746.14249021912], "fill": "toself", "fillcolor": "rgba(165,42,42,0.4)", "line": {"shape": "spline", "color": "rgba(165,42,42,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-96704.66213242062, -16264.84731760578, -48428.337114531554, -128868.1519293464, -96704.66213242062], "y": [48238.56208460191, 157034.8583808982, 180815.31094351888, 72019.01464722256, 48238.56208460191], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-72123.50520361683, -59062.484113081846, -53821.509856438504, -66882.53094697348, -72123.50520361683], "y": [-619.4115331617677, -8656.962973490987, -140.37980644554864, 7897.171633883671, -619.4115331617677], "fill": "toself", "fillcolor": "rgba(165,42,42,0.4075381581965864)", "line": {"shape": "spline", "color": "rgba(165,42,42,0.4075381581965864)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-57145.56368844456, 1796.4802073030537, -5503.733779018143, -64445.777674765755, -57145.56368844456], "y": [-26904.977501155838, 36055.84211475639, 42890.084995567726, -20070.734620344505, -26904.977501155838], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-13384.838719665866, -84271.57711701386, -79384.94179157529, -8498.203394227276, -13384.838719665866], "y": [-89736.83752711161, -107598.06295006539, -126991.89689789983, -109130.67147494605, -89736.83752711161], "fill": "toself", "fillcolor": "rgba(165,42,42,0.4)", "line": {"shape": "spline", "color": "rgba(165,42,42,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-58707.58918064365, -59823.915769578285, -69784.64217650515, -68668.31558757051, -58707.58918064365], "y": [-90618.60613260022, -78059.93200708582, -78945.32990992378, -91504.00403543818, -90618.60613260022], "fill": "toself", "fillcolor": "rgba(128,0,128,0.49570949465768455)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.49570949465768455)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [-19459.452931979267, 75149.22548022929, 79905.4967520139, -14703.181660194645, -19459.452931979267], "y": [-108867.78105340351, -132031.55777379675, -112605.34137458005, -89441.5646541868, -108867.78105340351], "fill": "toself", "fillcolor": "rgba(165,42,42,0.4)", "line": {"shape": "spline", "color": "rgba(165,42,42,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [218632.58561649363, 187375.4411263245, 193177.25207071085, 224434.39656087998, 218632.58561649363], "y": [-145809.56988925533, -160042.7338981717, -172783.96577603964, -158550.80176712328, -145809.56988925533], "fill": "toself", "fillcolor": "rgba(165,42,42,0.5459279826983957)", "line": {"shape": "spline", "color": "rgba(165,42,42,0.5459279826983957)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [209212.00660934616, 187722.71977235485, 177759.5644740632, 199248.85131105452, 209212.00660934616], "y": [-107074.71735751463, -85306.34887328968, -95141.77141134685, -116910.1398955718, -107074.71735751463], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [197593.61677094572, 222431.88337474084, 215611.62915242708, 190773.36254863197, 197593.61677094572], "y": [-172581.7269862201, -149417.9502658269, -142104.6656178037, -165268.4423381969, -172581.7269862201], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [194773.8310441375, 159609.5434926971, 164233.75898645967, 199398.04653790008, 194773.8310441375], "y": [19574.546417821206, -22957.496620587583, -26780.666910706255, 15751.376127702533, 19574.546417821206], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [194840.46564334133, 166709.03560218905, 169860.38999082238, 197991.82003197467, 194840.46564334133], "y": [160991.9976685543, 148935.6705080605, 141582.51026791602, 153638.83742840984, 160991.9976685543], "fill": "toself", "fillcolor": "rgba(165,42,42,1)", "line": {"shape": "spline", "color": "rgba(165,42,42,1)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [56478.01370194966, 19267.127404129205, 14199.118652607294, 51410.004950427756, 56478.01370194966], "y": [91600.92172868014, 122067.33488502062, 115877.40053201676, 85410.98737567628, 91600.92172868014], "fill": "toself", "fillcolor": "rgba(128,0,128,0.4)", "line": {"shape": "spline", "color": "rgba(128,0,128,0.4)", "width": 0}, "hoverinfo": "none"}, {"type": "scatter", "x": [180415.88301477756], "y": [109843.74575648156], "mode": "markers+text", "marker": {"symbol": "circle-open", "size": 16, "color": "#50CC50", "line": {"color": "#50CC50", "width": 5}}, "hovertext": ["Poseidon Gate [R21]"], "hoverinfo": "text", "text": ["Poseidon Gate"], "textposition": "top center", "textfont": {"color": "#50CC50", "size": 20}, "meta": {"base_marker_size": 16, "base_text_size": 20}}, {"type": "scatter", "x": [-99213.74661485212], "y": [-124785.88387314806], "mode": "markers+text", "marker": {"symbol": "circle-open", "size": 16, "color": "#50CC50", "line": {"color": "#50CC50", "width": 5}}, "hovertext": ["Atlantis Gate [F07]"], "hoverinfo": "text", "text": ["Atlantis Gate"], "textposition": "top center", "textfont": {"color": "#50CC50", "size": 20}, "meta": {"base_marker_size": 16, "base_text_size": 20}}, {"type": "scatter", "x": [200971.15636297144], "y": [-74810.78956587781], "mode": "markers+text", "marker": {"symbol": "circle-open", "size": 16, "color": "#50CC50", "line": {"color": "#50CC50", "width": 5}}, "hovertext": ["Waypoint 89 Gate [I22]"], "hoverinfo": "text", "text": ["Waypoint 89 Gate"], "textposition": "top center", "textfont": {"color": "#50CC50", "size": 20}, "meta": {"base_marker_size": 16, "base_text_size": 20}}, {"type": "scatter", "x": [184664.93428363913], "y": [15908.500043175676], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["Mira Hotels [M21]"], "hoverinfo": "text", "text": ["Mira Hotels"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [192501.54693796014], "y": [2981.43814331284], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["Kala Distributors [M21]"], "hoverinfo": "text", "text": ["Kala Distributors"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [162909.96171848144], "y": [-121046.01813240732], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["Medusa Mining [F20]"], "hoverinfo": "text", "text": ["Medusa Mining"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [179692.36912588883], "y": [-137249.721836111], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["Ares Weaponry [F20]"], "hoverinfo": "text", "text": ["Ares Weaponry"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [156544.22097774065], "y": [-149402.4996138888], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["Ashima Foundries [E19]"], "hoverinfo": "text", "text": ["Ashima Foundries"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [179692.36912588883], "y": [-159819.16628055545], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["Draeka Processors [E20]"], "hoverinfo": "text", "text": ["Draeka Processors"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [15930.082711414743], "y": [14511.650643162908], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["Aram [M12]"], "hoverinfo": "text", "text": ["Aram"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [28111.50778615404], "y": [91175.52536324885], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["Arietis Command [Q13]"], "hoverinfo": "text", "text": ["Arietis Command"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [-102948.44406792054], "y": [145198.23281035668], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["Fortir [T06]"], "hoverinfo": "text", "text": ["Fortir"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [-106420.66629014276], "y": [129573.2328103567], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["Callee [S06]"], "hoverinfo": "text", "text": ["Callee"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [-89638.25888273533], "y": [134781.56614369003], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["Aliar [S07]"], "hoverinfo": "text", "text": ["Aliar"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [-57946.19355351723], "y": [3882.0033864883508], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["Tallith Markets [M09]"], "hoverinfo": "text", "text": ["Tallith Markets"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [-62934.83381414822], "y": [-8487.788280178313], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["Rannar Lodging [L08]"], "hoverinfo": "text", "text": ["Rannar Lodging"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [17563.399536578025], "y": [68298.76551204875], "mode": "markers", "marker": {"symbol": "pentagon-open", "size": 3, "color": "orange"}, "hovertext": ["WP 77 [P12]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [5127.469654059904], "y": [79604.15631433795], "mode": "markers", "marker": {"symbol": "pentagon-open", "size": 3, "color": "orange"}, "hovertext": ["WP 35 [P12]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [766.818916034064], "y": [96885.25368355145], "mode": "markers", "marker": {"symbol": "pentagon-open", "size": 3, "color": "orange"}, "hovertext": ["WP 9 [Q12]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [6258.0087342888055], "y": [112066.77847519696], "mode": "markers", "marker": {"symbol": "pentagon-open", "size": 3, "color": "orange"}, "hovertext": ["WP 86 [R12]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [16917.377205018656], "y": [124502.70835771509], "mode": "markers", "marker": {"symbol": "pentagon-open", "size": 3, "color": "orange"}, "hovertext": ["WP 30 [S12]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [35006.002488681355], "y": [124825.71952349477], "mode": "markers", "marker": {"symbol": "pentagon-open", "size": 3, "color": "orange"}, "hovertext": ["WP 31 [S13]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [48410.96586853857], "y": [118850.01295657048], "mode": "markers", "marker": {"symbol": "pentagon-open", "size": 3, "color": "orange"}, "hovertext": ["WP 64 [R14]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [57293.77292748009], "y": [104314.51049648436], "mode": "markers", "marker": {"symbol": "pentagon-open", "size": 3, "color": "orange"}, "hovertext": ["WP 6 [R14]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [58747.323173488694], "y": [87356.42429305054], "mode": "markers", "marker": {"symbol": "pentagon-open", "size": 3, "color": "orange"}, "hovertext": ["WP 5 [Q14]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [47409.63125462154], "y": [74629.7843613307], "mode": "markers", "marker": {"symbol": "pentagon-open", "size": 3, "color": "orange"}, "hovertext": ["WP 66 [P14]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [34359.98015712199], "y": [67006.72084892998], "mode": "markers", "marker": {"symbol": "pentagon-open", "size": 3, "color": "orange"}, "hovertext": ["WP 1 [P13]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [-221533.4910886868], "y": [137414.98225444695], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "red"}, "hovertext": ["Daggerhold [S00]"], "hoverinfo": "text", "text": ["**Daggerhold**"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "gmOnly": true, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [-221533.4910886868], "y": [118248.31558778026], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "red"}, "hovertext": ["Skorn's Peak [R00]"], "hoverinfo": "text", "text": ["**Skorn's Peak**"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "gmOnly": true, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [143137.58517527155], "y": [145447.03742314826], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["RS 48X [T19]"], "hoverinfo": "text", "text": ["RS 48X"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [149567.62632753496], "y": [130175.68968652276], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["RS 82X [S19]"], "hoverinfo": "text", "text": ["RS 82X"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [131081.25801477773], "y": [137007.60841080258], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["Pr 811L [S18]"], "hoverinfo": "text", "text": ["Pr 811L"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [58888.57825902229], "y": [-123247.76254275578], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["M 142 [F14]"], "hoverinfo": "text", "text": ["M 142"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [61444.84111948738], "y": [-115538.08060382931], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["M 080 [G15]"], "hoverinfo": "text", "text": ["M 080"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [13950.991126516223], "y": [102025.31598397721], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["DS 16 [R12]"], "hoverinfo": "text", "text": ["DS 16"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [39748.617268146845], "y": [108342.02605803091], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["DS 31 [R13]"], "hoverinfo": "text", "text": ["DS 31"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [22761.177002859178], "y": [79306.88283513345], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["DS 52 [P13]"], "hoverinfo": "text", "text": ["DS 52"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [40688.93376625595], "y": [83687.40458037237], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["DS 22 [Q14]"], "hoverinfo": "text", "text": ["DS 22"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [-35182.19382763927], "y": [-90896.02756910647], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["DS 37 [H10]"], "hoverinfo": "text", "text": ["DS 37"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [-43291.39615029169], "y": [-103992.59257862702], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["M 552 [G09]"], "hoverinfo": "text", "text": ["M 552"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [59607.199710777844], "y": [-118701.32867112731], "mode": "markers+text", "marker": {"symbol": "square", "size": 12, "color": "blue"}, "hovertext": ["DW Econ [G14]"], "hoverinfo": "text", "text": ["DW Econ"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 12, "base_text_size": 14}}, {"type": "scatter", "x": [186365.99794238695], "y": [112960.90534979424], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 85 [R21]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [148428.75514403303], "y": [91339.89197530864], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 34 [Q19]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [110491.51234567912], "y": [69718.87860082302], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 75 [P17]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [72554.26954732522], "y": [48097.86522633743], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 56 [O15]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [34617.026748971286], "y": [26476.851851851825], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 91 [N13]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [-4123.971193415539], "y": [8472.736625514377], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 32 [M11]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [-26227.237654320896], "y": [-25284.979423868346], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 95 [K10]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [-51947.402263374395], "y": [-59846.45061728399], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 27 [J09]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [-77667.5668724279], "y": [-94407.92181069964], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 42 [H08]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [-91499.1260743122], "y": [-140185.05848257677], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 73 [E07]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [140150.07716049394], "y": [138681.06995884774], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 99 [S19]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [150933.7920096023], "y": [102043.23131001371], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 96 [R19]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [161717.50685871067], "y": [65405.39266117969], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 92 [P20]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [172501.22170781903], "y": [28767.55401234566], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 41 [N20]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [183284.9365569274], "y": [-7870.284636488359], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 98 [L21]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [194068.6514060358], "y": [-44508.12328532239], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 45 [J21]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [204852.36625514415], "y": [-81145.96193415642], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 62 [H22]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [175515.3034979425], "y": [-147053.88374485602], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 90 [E20]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [181543.46707818942], "y": [-110081.14711934162], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 77 [G21]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [187571.63065843633], "y": [-73108.4104938272], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 80 [I21]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [27624.35699588488], "y": [97689.55761316871], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 19 [Q13]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [72624.35699588488], "y": [97689.55761316871], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 68 [Q15]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [55681.39807952789], "y": [132871.97432423005], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 43 [S14]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [17610.91496785073], "y": [141561.31366135078], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 67 [T12]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [-12919.24205972398], "y": [117214.32587345883], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 10 [R11]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [-12919.24205972398], "y": [78164.78935287861], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 26 [P11]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [17610.914967850724], "y": [53817.80156498665], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 15 [O12]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [55681.39807952788], "y": [62507.14090210736], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 35 [P14]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [-111425.28292181062], "y": [139886.70267489713], "mode": "markers+text", "marker": {"symbol": "circle", "size": 6, "color": "#FF13F0"}, "hovertext": ["Tri State Point [S06]"], "hoverinfo": "text", "text": ["Tri State Point"], "textposition": "top center", "textfont": {"color": "white", "size": 14}, "meta": {"base_marker_size": 6, "base_text_size": 14}}, {"type": "scatter", "x": [-85048.65626031971], "y": [150017.05637875956], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 58 [T07]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [-99390.35202093802], "y": [117651.33756763447], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 84 [R07]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [-116314.0178431129], "y": [-111307.31915842257], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 16 [G06]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [-69127.54182238871], "y": [-115964.04193100208], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 94 [G08]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [-29567.71832701833], "y": [-109517.2558799047], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 71 [G10]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [9992.105168352049], "y": [-103070.4698288073], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 36 [G12]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [49551.92866372243], "y": [-96623.6837777099], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 97 [H14]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [89111.75215909282], "y": [-90176.8977266125], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 79 [H16]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [128671.57565446319], "y": [-83730.1116755151], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 14 [H18]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [168231.39914983354], "y": [-77283.32562441772], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 39 [I20]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [207791.22264520393], "y": [-70836.53957332032], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 23 [I22]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [-117457.72860087971], "y": [-133720.43946362156], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 65 [F06]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}, {"type": "scatter", "x": [-34486.46606246662], "y": [-83276.3406715508], "mode": "markers", "marker": {"symbol": "circle", "size": 3, "color": "white"}, "hovertext": ["SR 54 [H10]"], "hoverinfo": "text", "meta": {"base_marker_size": 3, "base_text_size": 14}}], "layout": {"title": "Arietis", "paper_bgcolor": "black", "plot_bgcolor": "black", "font": {"color": "white"}, "margin": {"l": 0, "r": 0, "t": 40, "b": 0}, "autosize": true, "dragmode": "pan", "hovermode": "closest", "xaxis": {"color": "white", "showgrid": true, "gridcolor": "gray", "dtick": 20000, "title": "X Axis"}, "yaxis": {"color": "white", "showgrid": true, "gridcolor": "gray", "dtick": 20000, "scaleanchor": "x", "scaleratio": 1, "title": "Z Axis"}, "shapes": []}};
    fig.layout.showlegend = false;
    fig.layout.dragmode = 'pan';
    fig.layout.title = 'Arietis';
    if (!isGM()) {
        fig.data = fig.data.filter(t => !t.gmOnly);
        }
    Plotly.newPlot('plot', fig.data, fig.layout, {responsive: true, scrollZoom: true});
        console.log("[DEBUG JS] Plotted traces count:", fig.data.length);
        console.log("[DEBUG JS] fig.data sample:", fig.data.slice(0,3));

    var plotDiv = document.getElementById('plot');
    // Use Plotly's built-in nearest-point selection for accurate clicks
    plotDiv.on('plotly_click', function(ev) {
        if (!ev || !ev.points || !ev.points.length) return;
        var p = ev.points[0];
        var picked = null;
        // Prefer original name from hovertext: "Name [Grid]"
        if (p.hovertext && typeof p.hovertext === 'string') {
            picked = p.hovertext.split(' [')[0];
        } else if (p.text && typeof p.text === 'string') {
            // Fallback to text label (strip any ** used for GM marking)
            picked = p.text.replace(/\*/g, '');
        }
        if (picked && objData[picked]) {
            highlight(picked);
        }
    });

    // ——— Auto-scale markers based on current zoom/span (optimized: planets & blackholes only) ———
    (function() {
        var refSpan = null;
        var planetIdx = [];
        var bhIdx = [];
        function rescaleMarkers() {
            try {
                var full = plotDiv._fullLayout || {};
                var xaxis = full.xaxis || (fig.layout && fig.layout.xaxis);
                if (!xaxis || !xaxis.range) return;
                var curr = Math.abs(xaxis.range[1] - xaxis.range[0]);
                if (!curr) return;
                if (!refSpan) refSpan = curr;
                var scale = refSpan / curr;
                var indices = [];
                var markerSizes = [];
                var textSizes = [];
                function pushForIndex(i) {
                    var t = fig.data[i];
                    if (!t || !t.meta || !t.meta.base_marker_size) return;
                    var base = t.meta.base_marker_size;
                    var baseText = t.meta.base_text_size || (t.textfont && t.textfont.size) || 12;
                    var newMarker = Math.max(2, Math.round(base * scale));
                    var newText = Math.max(8, Math.round(baseText * Math.sqrt(scale)));
                    indices.push(i);
                    markerSizes.push(newMarker);
                    textSizes.push(newText);
                }
                planetIdx.forEach(pushForIndex);
                bhIdx.forEach(pushForIndex);
                if (indices.length) {
                    Plotly.restyle(plotDiv, {'marker.size': [markerSizes], 'textfont.size': [textSizes]}, indices);
                }
            } catch (e) { console.error(e); }
        }
        // initial scale after plot settles
        setTimeout(rescaleMarkers, 250);
        plotDiv.on('plotly_relayout', rescaleMarkers);
    })();

  var ctrl = document.getElementById('object-buttons');

  // Helper: create and append a single button
function addButton(label, fn, header, color, isHidden) {
    if (isHidden && !isGM()) return;
    var btn = document.createElement('button');
    btn.textContent = label;
    if (header) {
      btn.className = 'header';     // section header style
      btn.onclick = null;           // no click action
    } else {
      btn.onclick = fn;             // bind the handler
      if (color) btn.style.backgroundColor = color;
    }
    ctrl.appendChild(btn);
  }
  
  function enterGMMode() {
    const pw = prompt("Enter ONI Auth Code: --We will store a cookie for the purpose of tracking if you have authenticated or not--");
    if (pw === "oni1") {
      document.cookie = "gmMode=1; path=/; max-age=31536000";
      location.reload();
    } else {
      alert("Incorrect password.");
    }
  }

  function isGM() {
    return document.cookie.split(';').some(c => c.trim() === 'gmMode=1');
  }

  function exitGMMode() {
    document.cookie = "gmMode=; path=/; expires=Thu, 01 Jan 1970 00:00:00 UTC;";
    location.reload();
  }

  function renderGMControls() {
    const div = document.getElementById('gm-controls');
    div.innerHTML = '';
    const btn = document.createElement('button');
    btn.style.width = '100%';
    if (isGM()) {
      btn.textContent = 'ONI Logout';
      btn.onclick = exitGMMode;
    } else {
      btn.textContent = 'ONI Login';
      btn.onclick = enterGMMode;
    }
    div.appendChild(btn);
  }

  renderGMControls();

  // ——— Populate the sidebar ———
  addButton('None', clearAnnotations, false, null);

  addButton('--- Gates ---', null, true, null);
  addButton('Atlantis Gate',function(){highlight('Atlantis Gate');},false,null,false)
    addButton('Poseidon Gate',function(){highlight('Poseidon Gate');},false,null,false)
    addButton('Waypoint 89 Gate',function(){highlight('Waypoint 89 Gate');},false,null,false)

  addButton('--- Nav Points/POI ---', null, true, null);
  addButton('Tri State Point',function(){highlight('Tri State Point');},false,null,false)

    addButton('--- Planets ---', null, true, null);
    

    addButton('--- Stations ---', null, true, null);
    addButton('Aliar',function(){highlight('Aliar');},false,'blue',false)
    addButton('Aram',function(){highlight('Aram');},false,'blue',false)
    addButton('Ares Weaponry',function(){highlight('Ares Weaponry');},false,'blue',false)
    addButton('Arietis Command',function(){highlight('Arietis Command');},false,'blue',false)
    addButton('Ashima Foundries',function(){highlight('Ashima Foundries');},false,'blue',false)
    addButton('Callee',function(){highlight('Callee');},false,'blue',false)
    addButton('DS 16',function(){highlight('DS 16');},false,'blue',false)
    addButton('DS 22',function(){highlight('DS 22');},false,'blue',false)
    addButton('DS 31',function(){highlight('DS 31');},false,'blue',false)
    addButton('DS 37',function(){highlight('DS 37');},false,'blue',false)
    addButton('DS 52',function(){highlight('DS 52');},false,'blue',false)
    addButton('DW Econ',function(){highlight('DW Econ');},false,'blue',false)
    addButton('Daggerhold',function(){highlight('Daggerhold');},false,'red',true)
    addButton('Draeka Processors',function(){highlight('Draeka Processors');},false,'blue',false)
    addButton('Fortir',function(){highlight('Fortir');},false,'blue',false)
    addButton('Kala Distributors',function(){highlight('Kala Distributors');},false,'blue',false)
    addButton('M 080',function(){highlight('M 080');},false,'blue',false)
    addButton('M 142',function(){highlight('M 142');},false,'blue',false)
    addButton('M 552',function(){highlight('M 552');},false,'blue',false)
    addButton('Medusa Mining',function(){highlight('Medusa Mining');},false,'blue',false)
    addButton('Mira Hotels',function(){highlight('Mira Hotels');},false,'blue',false)
    addButton('Pr 811L',function(){highlight('Pr 811L');},false,'blue',false)
    addButton('RS 48X',function(){highlight('RS 48X');},false,'blue',false)
    addButton('RS 82X',function(){highlight('RS 82X');},false,'blue',false)
    addButton('Rannar Lodging',function(){highlight('Rannar Lodging');},false,'blue',false)
    addButton('Skorn's Peak',function(){highlight('Skorn's Peak');},false,'red',true)
    addButton('Tallith Markets',function(){highlight('Tallith Markets');},false,'blue',false)
    
  // Search filter
  document.getElementById('search-box').addEventListener('input', function() {
    const query = this.value.toLowerCase();
    const buttons = document.querySelectorAll('#object-buttons button');
    buttons.forEach(btn => {
      const label = btn.textContent.toLowerCase();
      const isHeader = btn.classList.contains('header');
      if (isHeader) {
        btn.style.display = ''; // always show section headers
      } else {
        btn.style.display = label.includes(query) ? '' : 'none';
      }
    });
  });
</script>
</body>
</html>